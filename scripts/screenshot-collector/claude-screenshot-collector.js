#!/usr/bin/env bun
// @bun
var KQ=Object.defineProperty;var AQ=(W,X)=>{for(var Y in X)KQ(W,Y,{get:X[Y],enumerable:!0,configurable:!0,set:(Q)=>X[Y]=()=>Q})};import{join as x9}from"path";import{fileURLToPath as YX}from"url";import{setMaxListeners as GX}from"events";import{spawn as BX}from"child_process";import{createInterface as HX}from"readline";import*as Q0 from"fs";import{stat as qX,open as kG}from"fs/promises";import{randomUUID as FX}from"crypto";import{appendFileSync as LX,existsSync as jX,mkdirSync as NX}from"fs";import{join as f9}from"path";import{join as KX}from"path";import{homedir as AX}from"os";import{dirname as W9,join as q6}from"path";import{cwd as qY}from"process";import{realpathSync as MY}from"fs";import{randomUUID as UY}from"crypto";import{randomUUID as CY}from"crypto";var{create:VQ,getPrototypeOf:OQ,defineProperty:e8,getOwnPropertyNames:wQ}=Object,RQ=Object.prototype.hasOwnProperty,DQ=(W,X,Y)=>{Y=W!=null?VQ(OQ(W)):{};let Q=X||!W||!W.__esModule?e8(Y,"default",{value:W,enumerable:!0}):Y;for(let G of wQ(W))if(!RQ.call(Q,G))e8(Q,G,{get:()=>W[G],enumerable:!0});return Q},M0=(W,X)=>()=>(X||W((X={exports:{}}).exports,X),X.exports),_Q=(W,X)=>{for(var Y in X)e8(W,Y,{get:X[Y],enumerable:!0,configurable:!0,set:(Q)=>X[Y]=()=>Q})};var IQ=M0((W,X)=>{(function(Y,Q){typeof W==="object"&&typeof X<"u"?Q(W):typeof define==="function"&&define.amd?define(["exports"],Q):Q(Y.URI=Y.URI||{})})(W,function(Y){function Q(){for(var K=arguments.length,F=Array(K),w=0;w<K;w++)F[w]=arguments[w];if(F.length>1){F[0]=F[0].slice(0,-1);var v=F.length-1;for(var T=1;T<v;++T)F[T]=F[T].slice(1,-1);return F[v]=F[v].slice(1),F.join("")}else return F[0]}function G(K){return"(?:"+K+")"}function z(K){return K===void 0?"undefined":K===null?"null":Object.prototype.toString.call(K).split(" ").pop().split("]").shift().toLowerCase()}function J(K){return K.toUpperCase()}function B(K){return K!==void 0&&K!==null?K instanceof Array?K:typeof K.length!=="number"||K.split||K.setInterval||K.call?[K]:Array.prototype.slice.call(K):[]}function M(K,F){var w=K;if(F)for(var v in F)w[v]=F[v];return w}function q(K){var F="[A-Za-z]",w="[\\x0D]",v="[0-9]",T="[\\x22]",r=Q(v,"[A-Fa-f]"),A0="[\\x0A]",I0="[\\x20]",S0=G(G("%[EFef]"+r+"%"+r+r+"%"+r+r)+"|"+G("%[89A-Fa-f]"+r+"%"+r+r)+"|"+G("%"+r+r)),c0="[\\:\\/\\?\\#\\[\\]\\@]",D0="[\\!\\$\\&\\'\\(\\)\\*\\+\\,\\;\\=]",m0=Q(c0,D0),d0=K?"[\\xA0-\\u200D\\u2010-\\u2029\\u202F-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF]":"[]",$0=K?"[\\uE000-\\uF8FF]":"[]",b0=Q(F,v,"[\\-\\.\\_\\~]",d0),l0=G(F+Q(F,v,"[\\+\\-\\.]")+"*"),P0=G(G(S0+"|"+Q(b0,D0,"[\\:]"))+"*"),s1=G(G("25[0-5]")+"|"+G("2[0-4]"+v)+"|"+G("1"+v+v)+"|"+G("[1-9]"+v)+"|"+v),Y1=G(G("25[0-5]")+"|"+G("2[0-4]"+v)+"|"+G("1"+v+v)+"|"+G("0?[1-9]"+v)+"|0?0?"+v),H1=G(Y1+"\\."+Y1+"\\."+Y1+"\\."+Y1),Z0=G(r+"{1,4}"),G1=G(G(Z0+"\\:"+Z0)+"|"+H1),q1=G(G(Z0+"\\:")+"{6}"+G1),I1=G("\\:\\:"+G(Z0+"\\:")+"{5}"+G1),t1=G(G(Z0)+"?\\:\\:"+G(Z0+"\\:")+"{4}"+G1),Z1=G(G(G(Z0+"\\:")+"{0,1}"+Z0)+"?\\:\\:"+G(Z0+"\\:")+"{3}"+G1),Q8=G(G(G(Z0+"\\:")+"{0,2}"+Z0)+"?\\:\\:"+G(Z0+"\\:")+"{2}"+G1),E8=G(G(G(Z0+"\\:")+"{0,3}"+Z0)+"?\\:\\:"+Z0+"\\:"+G1),b8=G(G(G(Z0+"\\:")+"{0,4}"+Z0)+"?\\:\\:"+G1),UW=G(G(G(Z0+"\\:")+"{0,5}"+Z0)+"?\\:\\:"+Z0),FW=G(G(G(Z0+"\\:")+"{0,6}"+Z0)+"?\\:\\:"),T1=G([q1,I1,t1,Z1,Q8,E8,b8,UW,FW].join("|")),LW=G(G(b0+"|"+S0)+"+"),r8=G(T1+"\\%25"+LW),e1=G(T1+G("\\%25|\\%(?!"+r+"{2})")+LW),qQ=G("[vV]"+r+"+\\."+Q(b0,D0,"[\\:]")+"+"),MQ=G("\\["+G(e1+"|"+T1+"|"+qQ)+"\\]"),b9=G(G(S0+"|"+Q(b0,D0))+"*"),X8=G(MQ+"|"+H1+"(?!"+b9+")|"+b9),J8=G(v+"*"),S9=G(G(P0+"@")+"?"+X8+G("\\:"+J8)+"?"),Y8=G(S0+"|"+Q(b0,D0,"[\\:\\@]")),UQ=G(Y8+"*"),P9=G(Y8+"+"),FQ=G(G(S0+"|"+Q(b0,D0,"[\\@]"))+"+"),k1=G(G("\\/"+UQ)+"*"),jW=G("\\/"+G(P9+k1)+"?"),a8=G(FQ+k1),S8=G(P9+k1),NW="(?!"+Y8+")",VG=G(k1+"|"+jW+"|"+a8+"|"+S8+"|"+NW),KW=G(G(Y8+"|"+Q("[\\/\\?]",$0))+"*"),G8=G(G(Y8+"|[\\/\\?]")+"*"),v9=G(G("\\/\\/"+S9+k1)+"|"+jW+"|"+S8+"|"+NW),LQ=G(l0+"\\:"+v9+G("\\?"+KW)+"?"+G("\\#"+G8)+"?"),jQ=G(G("\\/\\/"+S9+k1)+"|"+jW+"|"+a8+"|"+NW),NQ=G(jQ+G("\\?"+KW)+"?"+G("\\#"+G8)+"?"),OG=G(LQ+"|"+NQ),wG=G(l0+"\\:"+v9+G("\\?"+KW)+"?"),RG="^("+l0+")\\:"+G(G("\\/\\/("+G("("+P0+")@")+"?("+X8+")"+G("\\:("+J8+")")+"?)")+"?("+k1+"|"+jW+"|"+S8+"|"+NW+")")+G("\\?("+KW+")")+"?"+G("\\#("+G8+")")+"?$",DG="^(){0}"+G(G("\\/\\/("+G("("+P0+")@")+"?("+X8+")"+G("\\:("+J8+")")+"?)")+"?("+k1+"|"+jW+"|"+a8+"|"+NW+")")+G("\\?("+KW+")")+"?"+G("\\#("+G8+")")+"?$",_G="^("+l0+")\\:"+G(G("\\/\\/("+G("("+P0+")@")+"?("+X8+")"+G("\\:("+J8+")")+"?)")+"?("+k1+"|"+jW+"|"+S8+"|"+NW+")")+G("\\?("+KW+")")+"?$",IG="^"+G("\\#("+G8+")")+"?$",CG="^"+G("("+P0+")@")+"?("+X8+")"+G("\\:("+J8+")")+"?$";return{NOT_SCHEME:new RegExp(Q("[^]",F,v,"[\\+\\-\\.]"),"g"),NOT_USERINFO:new RegExp(Q("[^\\%\\:]",b0,D0),"g"),NOT_HOST:new RegExp(Q("[^\\%\\[\\]\\:]",b0,D0),"g"),NOT_PATH:new RegExp(Q("[^\\%\\/\\:\\@]",b0,D0),"g"),NOT_PATH_NOSCHEME:new RegExp(Q("[^\\%\\/\\@]",b0,D0),"g"),NOT_QUERY:new RegExp(Q("[^\\%]",b0,D0,"[\\:\\@\\/\\?]",$0),"g"),NOT_FRAGMENT:new RegExp(Q("[^\\%]",b0,D0,"[\\:\\@\\/\\?]"),"g"),ESCAPE:new RegExp(Q("[^]",b0,D0),"g"),UNRESERVED:new RegExp(b0,"g"),OTHER_CHARS:new RegExp(Q("[^\\%]",b0,m0),"g"),PCT_ENCODED:new RegExp(S0,"g"),IPV4ADDRESS:new RegExp("^("+H1+")$"),IPV6ADDRESS:new RegExp("^\\[?("+T1+")"+G(G("\\%25|\\%(?!"+r+"{2})")+"("+LW+")")+"?\\]?$")}}var j=q(!1),I=q(!0),C=function(){function K(F,w){var v=[],T=!0,r=!1,A0=void 0;try{for(var I0=F[Symbol.iterator](),S0;!(T=(S0=I0.next()).done);T=!0)if(v.push(S0.value),w&&v.length===w)break}catch(c0){r=!0,A0=c0}finally{try{if(!T&&I0.return)I0.return()}finally{if(r)throw A0}}return v}return function(F,w){if(Array.isArray(F))return F;else if(Symbol.iterator in Object(F))return K(F,w);else throw TypeError("Invalid attempt to destructure non-iterable instance")}}(),V=function(K){if(Array.isArray(K)){for(var F=0,w=Array(K.length);F<K.length;F++)w[F]=K[F];return w}else return Array.from(K)},R=2147483647,U=36,L=1,A=26,N=38,_=700,x=72,P=128,O="-",S=/^xn--/,Z=/[^\0-\x7E]/,g=/[\x2E\u3002\uFF0E\uFF61]/g,y={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},k=U-L,E=Math.floor,D=String.fromCharCode;function f(K){throw RangeError(y[K])}function m(K,F){var w=[],v=K.length;while(v--)w[v]=F(K[v]);return w}function n(K,F){var w=K.split("@"),v="";if(w.length>1)v=w[0]+"@",K=w[1];K=K.replace(g,".");var T=K.split("."),r=m(T,F).join(".");return v+r}function o(K){var F=[],w=0,v=K.length;while(w<v){var T=K.charCodeAt(w++);if(T>=55296&&T<=56319&&w<v){var r=K.charCodeAt(w++);if((r&64512)==56320)F.push(((T&1023)<<10)+(r&1023)+65536);else F.push(T),w--}else F.push(T)}return F}var F0=function(F){return String.fromCodePoint.apply(String,V(F))},W0=function(F){if(F-48<10)return F-22;if(F-65<26)return F-65;if(F-97<26)return F-97;return U},U0=function(F,w){return F+22+75*(F<26)-((w!=0)<<5)},J0=function(F,w,v){var T=0;F=v?E(F/_):F>>1,F+=E(F/w);for(;F>k*A>>1;T+=U)F=E(F/k);return E(T+(k+1)*F/(F+N))},Y0=function(F){var w=[],v=F.length,T=0,r=P,A0=x,I0=F.lastIndexOf(O);if(I0<0)I0=0;for(var S0=0;S0<I0;++S0){if(F.charCodeAt(S0)>=128)f("not-basic");w.push(F.charCodeAt(S0))}for(var c0=I0>0?I0+1:0;c0<v;){var D0=T;for(var m0=1,d0=U;;d0+=U){if(c0>=v)f("invalid-input");var $0=W0(F.charCodeAt(c0++));if($0>=U||$0>E((R-T)/m0))f("overflow");T+=$0*m0;var b0=d0<=A0?L:d0>=A0+A?A:d0-A0;if($0<b0)break;var l0=U-b0;if(m0>E(R/l0))f("overflow");m0*=l0}var P0=w.length+1;if(A0=J0(T-D0,P0,D0==0),E(T/P0)>R-r)f("overflow");r+=E(T/P0),T%=P0,w.splice(T++,0,r)}return String.fromCodePoint.apply(String,w)},w0=function(F){var w=[];F=o(F);var v=F.length,T=P,r=0,A0=x,I0=!0,S0=!1,c0=void 0;try{for(var D0=F[Symbol.iterator](),m0;!(I0=(m0=D0.next()).done);I0=!0){var d0=m0.value;if(d0<128)w.push(D(d0))}}catch(e1){S0=!0,c0=e1}finally{try{if(!I0&&D0.return)D0.return()}finally{if(S0)throw c0}}var $0=w.length,b0=$0;if($0)w.push(O);while(b0<v){var l0=R,P0=!0,s1=!1,Y1=void 0;try{for(var H1=F[Symbol.iterator](),Z0;!(P0=(Z0=H1.next()).done);P0=!0){var G1=Z0.value;if(G1>=T&&G1<l0)l0=G1}}catch(e1){s1=!0,Y1=e1}finally{try{if(!P0&&H1.return)H1.return()}finally{if(s1)throw Y1}}var q1=b0+1;if(l0-T>E((R-r)/q1))f("overflow");r+=(l0-T)*q1,T=l0;var I1=!0,t1=!1,Z1=void 0;try{for(var Q8=F[Symbol.iterator](),E8;!(I1=(E8=Q8.next()).done);I1=!0){var b8=E8.value;if(b8<T&&++r>R)f("overflow");if(b8==T){var UW=r;for(var FW=U;;FW+=U){var T1=FW<=A0?L:FW>=A0+A?A:FW-A0;if(UW<T1)break;var LW=UW-T1,r8=U-T1;w.push(D(U0(T1+LW%r8,0))),UW=E(LW/r8)}w.push(D(U0(UW,0))),A0=J0(r,q1,b0==$0),r=0,++b0}}}catch(e1){t1=!0,Z1=e1}finally{try{if(!I1&&Q8.return)Q8.return()}finally{if(t1)throw Z1}}++r,++T}return w.join("")},k0=function(F){return n(F,function(w){return S.test(w)?Y0(w.slice(4).toLowerCase()):w})},x0=function(F){return n(F,function(w){return Z.test(w)?"xn--"+w0(w):w})},C0={version:"2.1.0",ucs2:{decode:o,encode:F0},decode:Y0,encode:w0,toASCII:x0,toUnicode:k0},v0={};function b(K){var F=K.charCodeAt(0),w=void 0;if(F<16)w="%0"+F.toString(16).toUpperCase();else if(F<128)w="%"+F.toString(16).toUpperCase();else if(F<2048)w="%"+(F>>6|192).toString(16).toUpperCase()+"%"+(F&63|128).toString(16).toUpperCase();else w="%"+(F>>12|224).toString(16).toUpperCase()+"%"+(F>>6&63|128).toString(16).toUpperCase()+"%"+(F&63|128).toString(16).toUpperCase();return w}function h(K){var F="",w=0,v=K.length;while(w<v){var T=parseInt(K.substr(w+1,2),16);if(T<128)F+=String.fromCharCode(T),w+=3;else if(T>=194&&T<224){if(v-w>=6){var r=parseInt(K.substr(w+4,2),16);F+=String.fromCharCode((T&31)<<6|r&63)}else F+=K.substr(w,6);w+=6}else if(T>=224){if(v-w>=9){var A0=parseInt(K.substr(w+4,2),16),I0=parseInt(K.substr(w+7,2),16);F+=String.fromCharCode((T&15)<<12|(A0&63)<<6|I0&63)}else F+=K.substr(w,9);w+=9}else F+=K.substr(w,3),w+=3}return F}function s(K,F){function w(v){var T=h(v);return!T.match(F.UNRESERVED)?v:T}if(K.scheme)K.scheme=String(K.scheme).replace(F.PCT_ENCODED,w).toLowerCase().replace(F.NOT_SCHEME,"");if(K.userinfo!==void 0)K.userinfo=String(K.userinfo).replace(F.PCT_ENCODED,w).replace(F.NOT_USERINFO,b).replace(F.PCT_ENCODED,J);if(K.host!==void 0)K.host=String(K.host).replace(F.PCT_ENCODED,w).toLowerCase().replace(F.NOT_HOST,b).replace(F.PCT_ENCODED,J);if(K.path!==void 0)K.path=String(K.path).replace(F.PCT_ENCODED,w).replace(K.scheme?F.NOT_PATH:F.NOT_PATH_NOSCHEME,b).replace(F.PCT_ENCODED,J);if(K.query!==void 0)K.query=String(K.query).replace(F.PCT_ENCODED,w).replace(F.NOT_QUERY,b).replace(F.PCT_ENCODED,J);if(K.fragment!==void 0)K.fragment=String(K.fragment).replace(F.PCT_ENCODED,w).replace(F.NOT_FRAGMENT,b).replace(F.PCT_ENCODED,J);return K}function L0(K){return K.replace(/^0*(.*)/,"$1")||"0"}function $(K,F){var w=K.match(F.IPV4ADDRESS)||[],v=C(w,2),T=v[1];if(T)return T.split(".").map(L0).join(".");else return K}function u(K,F){var w=K.match(F.IPV6ADDRESS)||[],v=C(w,3),T=v[1],r=v[2];if(T){var A0=T.toLowerCase().split("::").reverse(),I0=C(A0,2),S0=I0[0],c0=I0[1],D0=c0?c0.split(":").map(L0):[],m0=S0.split(":").map(L0),d0=F.IPV4ADDRESS.test(m0[m0.length-1]),$0=d0?7:8,b0=m0.length-$0,l0=Array($0);for(var P0=0;P0<$0;++P0)l0[P0]=D0[P0]||m0[b0+P0]||"";if(d0)l0[$0-1]=$(l0[$0-1],F);var s1=l0.reduce(function(q1,I1,t1){if(!I1||I1==="0"){var Z1=q1[q1.length-1];if(Z1&&Z1.index+Z1.length===t1)Z1.length++;else q1.push({index:t1,length:1})}return q1},[]),Y1=s1.sort(function(q1,I1){return I1.length-q1.length})[0],H1=void 0;if(Y1&&Y1.length>1){var Z0=l0.slice(0,Y1.index),G1=l0.slice(Y1.index+Y1.length);H1=Z0.join(":")+"::"+G1.join(":")}else H1=l0.join(":");if(r)H1+="%"+r;return H1}else return K}var q0=/^(?:([^:\/?#]+):)?(?:\/\/((?:([^\/?#@]*)@)?(\[[^\/?#\]]+\]|[^\/?#:]*)(?:\:(\d*))?))?([^?#]*)(?:\?([^#]*))?(?:#((?:.|\n|\r)*))?/i,R0="".match(/(){0}/)[1]===void 0;function H0(K){var F=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},w={},v=F.iri!==!1?I:j;if(F.reference==="suffix")K=(F.scheme?F.scheme+":":"")+"//"+K;var T=K.match(q0);if(T){if(R0){if(w.scheme=T[1],w.userinfo=T[3],w.host=T[4],w.port=parseInt(T[5],10),w.path=T[6]||"",w.query=T[7],w.fragment=T[8],isNaN(w.port))w.port=T[5]}else if(w.scheme=T[1]||void 0,w.userinfo=K.indexOf("@")!==-1?T[3]:void 0,w.host=K.indexOf("//")!==-1?T[4]:void 0,w.port=parseInt(T[5],10),w.path=T[6]||"",w.query=K.indexOf("?")!==-1?T[7]:void 0,w.fragment=K.indexOf("#")!==-1?T[8]:void 0,isNaN(w.port))w.port=K.match(/\/\/(?:.|\n)*\:(?:\/|\?|\#|$)/)?T[4]:void 0;if(w.host)w.host=u($(w.host,v),v);if(w.scheme===void 0&&w.userinfo===void 0&&w.host===void 0&&w.port===void 0&&!w.path&&w.query===void 0)w.reference="same-document";else if(w.scheme===void 0)w.reference="relative";else if(w.fragment===void 0)w.reference="absolute";else w.reference="uri";if(F.reference&&F.reference!=="suffix"&&F.reference!==w.reference)w.error=w.error||"URI is not a "+F.reference+" reference.";var r=v0[(F.scheme||w.scheme||"").toLowerCase()];if(!F.unicodeSupport&&(!r||!r.unicodeSupport)){if(w.host&&(F.domainHost||r&&r.domainHost))try{w.host=C0.toASCII(w.host.replace(v.PCT_ENCODED,h).toLowerCase())}catch(A0){w.error=w.error||"Host's domain name can not be converted to ASCII via punycode: "+A0}s(w,j)}else s(w,v);if(r&&r.parse)r.parse(w,F)}else w.error=w.error||"URI can not be parsed.";return w}function f0(K,F){var w=F.iri!==!1?I:j,v=[];if(K.userinfo!==void 0)v.push(K.userinfo),v.push("@");if(K.host!==void 0)v.push(u($(String(K.host),w),w).replace(w.IPV6ADDRESS,function(T,r,A0){return"["+r+(A0?"%25"+A0:"")+"]"}));if(typeof K.port==="number"||typeof K.port==="string")v.push(":"),v.push(String(K.port));return v.length?v.join(""):void 0}var y0=/^\.\.?\//,E0=/^\/\.(\/|$)/,o0=/^\/\.\.(\/|$)/,n0=/^\/?(?:.|\n)*?(?=\/|$)/;function e0(K){var F=[];while(K.length)if(K.match(y0))K=K.replace(y0,"");else if(K.match(E0))K=K.replace(E0,"/");else if(K.match(o0))K=K.replace(o0,"/"),F.pop();else if(K==="."||K==="..")K="";else{var w=K.match(n0);if(w){var v=w[0];K=K.slice(v.length),F.push(v)}else throw Error("Unexpected dot segment condition")}return F.join("")}function h0(K){var F=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},w=F.iri?I:j,v=[],T=v0[(F.scheme||K.scheme||"").toLowerCase()];if(T&&T.serialize)T.serialize(K,F);if(K.host){if(w.IPV6ADDRESS.test(K.host));else if(F.domainHost||T&&T.domainHost)try{K.host=!F.iri?C0.toASCII(K.host.replace(w.PCT_ENCODED,h).toLowerCase()):C0.toUnicode(K.host)}catch(I0){K.error=K.error||"Host's domain name can not be converted to "+(!F.iri?"ASCII":"Unicode")+" via punycode: "+I0}}if(s(K,w),F.reference!=="suffix"&&K.scheme)v.push(K.scheme),v.push(":");var r=f0(K,F);if(r!==void 0){if(F.reference!=="suffix")v.push("//");if(v.push(r),K.path&&K.path.charAt(0)!=="/")v.push("/")}if(K.path!==void 0){var A0=K.path;if(!F.absolutePath&&(!T||!T.absolutePath))A0=e0(A0);if(r===void 0)A0=A0.replace(/^\/\//,"/%2F");v.push(A0)}if(K.query!==void 0)v.push("?"),v.push(K.query);if(K.fragment!==void 0)v.push("#"),v.push(K.fragment);return v.join("")}function i0(K,F){var w=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},v=arguments[3],T={};if(!v)K=H0(h0(K,w),w),F=H0(h0(F,w),w);if(w=w||{},!w.tolerant&&F.scheme)T.scheme=F.scheme,T.userinfo=F.userinfo,T.host=F.host,T.port=F.port,T.path=e0(F.path||""),T.query=F.query;else{if(F.userinfo!==void 0||F.host!==void 0||F.port!==void 0)T.userinfo=F.userinfo,T.host=F.host,T.port=F.port,T.path=e0(F.path||""),T.query=F.query;else{if(!F.path)if(T.path=K.path,F.query!==void 0)T.query=F.query;else T.query=K.query;else{if(F.path.charAt(0)==="/")T.path=e0(F.path);else{if((K.userinfo!==void 0||K.host!==void 0||K.port!==void 0)&&!K.path)T.path="/"+F.path;else if(!K.path)T.path=F.path;else T.path=K.path.slice(0,K.path.lastIndexOf("/")+1)+F.path;T.path=e0(T.path)}T.query=F.query}T.userinfo=K.userinfo,T.host=K.host,T.port=K.port}T.scheme=K.scheme}return T.fragment=F.fragment,T}function B1(K,F,w){var v=M({scheme:"null"},w);return h0(i0(H0(K,v),H0(F,v),v,!0),v)}function J1(K,F){if(typeof K==="string")K=h0(H0(K,F),F);else if(z(K)==="object")K=H0(h0(K,F),F);return K}function C8(K,F,w){if(typeof K==="string")K=h0(H0(K,w),w);else if(z(K)==="object")K=h0(K,w);if(typeof F==="string")F=h0(H0(F,w),w);else if(z(F)==="object")F=h0(F,w);return K===F}function i8(K,F){return K&&K.toString().replace(!F||!F.iri?j.ESCAPE:I.ESCAPE,b)}function L1(K,F){return K&&K.toString().replace(!F||!F.iri?j.PCT_ENCODED:I.PCT_ENCODED,h)}var eW={scheme:"http",domainHost:!0,parse:function(F,w){if(!F.host)F.error=F.error||"HTTP URIs must have a host.";return F},serialize:function(F,w){var v=String(F.scheme).toLowerCase()==="https";if(F.port===(v?443:80)||F.port==="")F.port=void 0;if(!F.path)F.path="/";return F}},O9={scheme:"https",domainHost:eW.domainHost,parse:eW.parse,serialize:eW.serialize};function w9(K){return typeof K.secure==="boolean"?K.secure:String(K.scheme).toLowerCase()==="wss"}var W8={scheme:"ws",domainHost:!0,parse:function(F,w){var v=F;return v.secure=w9(v),v.resourceName=(v.path||"/")+(v.query?"?"+v.query:""),v.path=void 0,v.query=void 0,v},serialize:function(F,w){if(F.port===(w9(F)?443:80)||F.port==="")F.port=void 0;if(typeof F.secure==="boolean")F.scheme=F.secure?"wss":"ws",F.secure=void 0;if(F.resourceName){var v=F.resourceName.split("?"),T=C(v,2),r=T[0],A0=T[1];F.path=r&&r!=="/"?r:void 0,F.query=A0,F.resourceName=void 0}return F.fragment=void 0,F}},R9={scheme:"wss",domainHost:W8.domainHost,parse:W8.parse,serialize:W8.serialize},s6={},t6=!0,D9="[A-Za-z0-9\\-\\.\\_\\~"+(t6?"\\xA0-\\u200D\\u2010-\\u2029\\u202F-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF":"")+"]",_1="[0-9A-Fa-f]",e6=G(G("%[EFef]"+_1+"%"+_1+_1+"%"+_1+_1)+"|"+G("%[89A-Fa-f]"+_1+"%"+_1+_1)+"|"+G("%"+_1+_1)),WQ="[A-Za-z0-9\\!\\$\\%\\'\\*\\+\\-\\^\\_\\`\\{\\|\\}\\~]",QQ="[\\!\\$\\%\\'\\(\\)\\*\\+\\,\\-\\.0-9\\<\\>A-Z\\x5E-\\x7E]",XQ=Q(QQ,"[\\\"\\\\]"),JQ="[\\!\\$\\'\\(\\)\\*\\+\\,\\;\\:\\@]",YQ=new RegExp(D9,"g"),MW=new RegExp(e6,"g"),GQ=new RegExp(Q("[^]",WQ,"[\\.]","[\\\"]",XQ),"g"),_9=new RegExp(Q("[^]",D9,JQ),"g"),zQ=_9;function o8(K){var F=h(K);return!F.match(YQ)?K:F}var I9={scheme:"mailto",parse:function(F,w){var v=F,T=v.to=v.path?v.path.split(","):[];if(v.path=void 0,v.query){var r=!1,A0={},I0=v.query.split("&");for(var S0=0,c0=I0.length;S0<c0;++S0){var D0=I0[S0].split("=");switch(D0[0]){case"to":var m0=D0[1].split(",");for(var d0=0,$0=m0.length;d0<$0;++d0)T.push(m0[d0]);break;case"subject":v.subject=L1(D0[1],w);break;case"body":v.body=L1(D0[1],w);break;default:r=!0,A0[L1(D0[0],w)]=L1(D0[1],w);break}}if(r)v.headers=A0}v.query=void 0;for(var b0=0,l0=T.length;b0<l0;++b0){var P0=T[b0].split("@");if(P0[0]=L1(P0[0]),!w.unicodeSupport)try{P0[1]=C0.toASCII(L1(P0[1],w).toLowerCase())}catch(s1){v.error=v.error||"Email address's domain name can not be converted to ASCII via punycode: "+s1}else P0[1]=L1(P0[1],w).toLowerCase();T[b0]=P0.join("@")}return v},serialize:function(F,w){var v=F,T=B(F.to);if(T){for(var r=0,A0=T.length;r<A0;++r){var I0=String(T[r]),S0=I0.lastIndexOf("@"),c0=I0.slice(0,S0).replace(MW,o8).replace(MW,J).replace(GQ,b),D0=I0.slice(S0+1);try{D0=!w.iri?C0.toASCII(L1(D0,w).toLowerCase()):C0.toUnicode(D0)}catch(b0){v.error=v.error||"Email address's domain name can not be converted to "+(!w.iri?"ASCII":"Unicode")+" via punycode: "+b0}T[r]=c0+"@"+D0}v.path=T.join(",")}var m0=F.headers=F.headers||{};if(F.subject)m0.subject=F.subject;if(F.body)m0.body=F.body;var d0=[];for(var $0 in m0)if(m0[$0]!==s6[$0])d0.push($0.replace(MW,o8).replace(MW,J).replace(_9,b)+"="+m0[$0].replace(MW,o8).replace(MW,J).replace(zQ,b));if(d0.length)v.query=d0.join("&");return v}},BQ=/^([^\:]+)\:(.*)/,C9={scheme:"urn",parse:function(F,w){var v=F.path&&F.path.match(BQ),T=F;if(v){var r=w.scheme||T.scheme||"urn",A0=v[1].toLowerCase(),I0=v[2],S0=r+":"+(w.nid||A0),c0=v0[S0];if(T.nid=A0,T.nss=I0,T.path=void 0,c0)T=c0.parse(T,w)}else T.error=T.error||"URN can not be parsed.";return T},serialize:function(F,w){var v=w.scheme||F.scheme||"urn",T=F.nid,r=v+":"+(w.nid||T),A0=v0[r];if(A0)F=A0.serialize(F,w);var I0=F,S0=F.nss;return I0.path=(T||w.nid)+":"+S0,I0}},HQ=/^[0-9A-Fa-f]{8}(?:\-[0-9A-Fa-f]{4}){3}\-[0-9A-Fa-f]{12}$/,E9={scheme:"urn:uuid",parse:function(F,w){var v=F;if(v.uuid=v.nss,v.nss=void 0,!w.tolerant&&(!v.uuid||!v.uuid.match(HQ)))v.error=v.error||"UUID is not valid.";return v},serialize:function(F,w){var v=F;return v.nss=(F.uuid||"").toLowerCase(),v}};v0[eW.scheme]=eW,v0[O9.scheme]=O9,v0[W8.scheme]=W8,v0[R9.scheme]=R9,v0[I9.scheme]=I9,v0[C9.scheme]=C9,v0[E9.scheme]=E9,Y.SCHEMES=v0,Y.pctEncChar=b,Y.pctDecChars=h,Y.parse=H0,Y.removeDotSegments=e0,Y.serialize=h0,Y.resolveComponents=i0,Y.resolve=B1,Y.normalize=J1,Y.equal=C8,Y.escapeComponent=i8,Y.unescapeComponent=L1,Object.defineProperty(Y,"__esModule",{value:!0})})}),B9=M0((W,X)=>{X.exports=function Y(Q,G){if(Q===G)return!0;if(Q&&G&&typeof Q=="object"&&typeof G=="object"){if(Q.constructor!==G.constructor)return!1;var z,J,B;if(Array.isArray(Q)){if(z=Q.length,z!=G.length)return!1;for(J=z;J--!==0;)if(!Y(Q[J],G[J]))return!1;return!0}if(Q.constructor===RegExp)return Q.source===G.source&&Q.flags===G.flags;if(Q.valueOf!==Object.prototype.valueOf)return Q.valueOf()===G.valueOf();if(Q.toString!==Object.prototype.toString)return Q.toString()===G.toString();if(B=Object.keys(Q),z=B.length,z!==Object.keys(G).length)return!1;for(J=z;J--!==0;)if(!Object.prototype.hasOwnProperty.call(G,B[J]))return!1;for(J=z;J--!==0;){var M=B[J];if(!Y(Q[M],G[M]))return!1}return!0}return Q!==Q&&G!==G}}),CQ=M0((W,X)=>{X.exports=function(Q){var G=0,z=Q.length,J=0,B;while(J<z)if(G++,B=Q.charCodeAt(J++),B>=55296&&B<=56319&&J<z){if(B=Q.charCodeAt(J),(B&64512)==56320)J++}return G}}),gW=M0((W,X)=>{X.exports={copy:Y,checkDataType:Q,checkDataTypes:G,coerceToTypes:J,toHash:B,getProperty:j,escapeQuotes:I,equal:B9(),ucs2length:CQ(),varOccurences:C,varReplace:V,schemaHasRules:R,schemaHasRulesExcept:U,schemaUnknownRules:L,toQuotedString:A,getPathExpr:N,getPath:_,getData:O,unescapeFragment:Z,unescapeJsonPointer:k,escapeFragment:g,escapeJsonPointer:y};function Y(E,D){D=D||{};for(var f in E)D[f]=E[f];return D}function Q(E,D,f,m){var n=m?" !== ":" === ",o=m?" || ":" && ",F0=m?"!":"",W0=m?"":"!";switch(E){case"null":return D+n+"null";case"array":return F0+"Array.isArray("+D+")";case"object":return"("+F0+D+o+"typeof "+D+n+'"object"'+o+W0+"Array.isArray("+D+"))";case"integer":return"(typeof "+D+n+'"number"'+o+W0+"("+D+" % 1)"+o+D+n+D+(f?o+F0+"isFinite("+D+")":"")+")";case"number":return"(typeof "+D+n+'"'+E+'"'+(f?o+F0+"isFinite("+D+")":"")+")";default:return"typeof "+D+n+'"'+E+'"'}}function G(E,D,f){switch(E.length){case 1:return Q(E[0],D,f,!0);default:var m="",n=B(E);if(n.array&&n.object)m=n.null?"(":"(!"+D+" || ",m+="typeof "+D+' !== "object")',delete n.null,delete n.array,delete n.object;if(n.number)delete n.integer;for(var o in n)m+=(m?" && ":"")+Q(o,D,f,!0);return m}}var z=B(["string","number","integer","boolean","null"]);function J(E,D){if(Array.isArray(D)){var f=[];for(var m=0;m<D.length;m++){var n=D[m];if(z[n])f[f.length]=n;else if(E==="array"&&n==="array")f[f.length]=n}if(f.length)return f}else if(z[D])return[D];else if(E==="array"&&D==="array")return["array"]}function B(E){var D={};for(var f=0;f<E.length;f++)D[E[f]]=!0;return D}var M=/^[a-z$_][a-z$_0-9]*$/i,q=/'|\\/g;function j(E){return typeof E=="number"?"["+E+"]":M.test(E)?"."+E:"['"+I(E)+"']"}function I(E){return E.replace(q,"\\$&").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/\f/g,"\\f").replace(/\t/g,"\\t")}function C(E,D){D+="[^0-9]";var f=E.match(new RegExp(D,"g"));return f?f.length:0}function V(E,D,f){return D+="([^0-9])",f=f.replace(/\$/g,"$$$$"),E.replace(new RegExp(D,"g"),f+"$1")}function R(E,D){if(typeof E=="boolean")return!E;for(var f in E)if(D[f])return!0}function U(E,D,f){if(typeof E=="boolean")return!E&&f!="not";for(var m in E)if(m!=f&&D[m])return!0}function L(E,D){if(typeof E=="boolean")return;for(var f in E)if(!D[f])return f}function A(E){return"'"+I(E)+"'"}function N(E,D,f,m){var n=f?"'/' + "+D+(m?"":".replace(/~/g, '~0').replace(/\\//g, '~1')"):m?"'[' + "+D+" + ']'":"'[\\'' + "+D+" + '\\']'";return S(E,n)}function _(E,D,f){var m=f?A("/"+y(D)):A(j(D));return S(E,m)}var x=/^\/(?:[^~]|~0|~1)*$/,P=/^([0-9]+)(#|\/(?:[^~]|~0|~1)*)?$/;function O(E,D,f){var m,n,o,F0;if(E==="")return"rootData";if(E[0]=="/"){if(!x.test(E))throw Error("Invalid JSON-pointer: "+E);n=E,o="rootData"}else{if(F0=E.match(P),!F0)throw Error("Invalid JSON-pointer: "+E);if(m=+F0[1],n=F0[2],n=="#"){if(m>=D)throw Error("Cannot access property/index "+m+" levels up, current level is "+D);return f[D-m]}if(m>D)throw Error("Cannot access data "+m+" levels up, current level is "+D);if(o="data"+(D-m||""),!n)return o}var W0=o,U0=n.split("/");for(var J0=0;J0<U0.length;J0++){var Y0=U0[J0];if(Y0)o+=j(k(Y0)),W0+=" && "+o}return W0}function S(E,D){if(E=='""')return D;return(E+" + "+D).replace(/([^\\])' \+ '/g,"$1")}function Z(E){return k(decodeURIComponent(E))}function g(E){return encodeURIComponent(y(E))}function y(E){return E.replace(/~/g,"~0").replace(/\//g,"~1")}function k(E){return E.replace(/~1/g,"/").replace(/~0/g,"~")}}),r9=M0((W,X)=>{var Y=gW();X.exports=Q;function Q(G){Y.copy(G,this)}}),EQ=M0((W,X)=>{var Y=X.exports=function(z,J,B){if(typeof J=="function")B=J,J={};B=J.cb||B;var M=typeof B=="function"?B:B.pre||function(){},q=B.post||function(){};Q(J,M,q,z,"",z)};Y.keywords={additionalItems:!0,items:!0,contains:!0,additionalProperties:!0,propertyNames:!0,not:!0},Y.arrayKeywords={items:!0,allOf:!0,anyOf:!0,oneOf:!0},Y.propsKeywords={definitions:!0,properties:!0,patternProperties:!0,dependencies:!0},Y.skipKeywords={default:!0,enum:!0,const:!0,required:!0,maximum:!0,minimum:!0,exclusiveMaximum:!0,exclusiveMinimum:!0,multipleOf:!0,maxLength:!0,minLength:!0,pattern:!0,format:!0,maxItems:!0,minItems:!0,uniqueItems:!0,maxProperties:!0,minProperties:!0};function Q(z,J,B,M,q,j,I,C,V,R){if(M&&typeof M=="object"&&!Array.isArray(M)){J(M,q,j,I,C,V,R);for(var U in M){var L=M[U];if(Array.isArray(L)){if(U in Y.arrayKeywords)for(var A=0;A<L.length;A++)Q(z,J,B,L[A],q+"/"+U+"/"+A,j,q,U,M,A)}else if(U in Y.propsKeywords){if(L&&typeof L=="object")for(var N in L)Q(z,J,B,L[N],q+"/"+U+"/"+G(N),j,q,U,M,N)}else if(U in Y.keywords||z.allKeys&&!(U in Y.skipKeywords))Q(z,J,B,L,q+"/"+U,j,q,U,M)}B(M,q,j,I,C,V,R)}}function G(z){return z.replace(/~/g,"~0").replace(/\//g,"~1")}}),H9=M0((W,X)=>{var Y=IQ(),Q=B9(),G=gW(),z=r9(),J=EQ();X.exports=B,B.normalizeId=_,B.fullPath=L,B.url=x,B.ids=P,B.inlineRef=V,B.schema=M;function B(O,S,Z){var g=this._refs[Z];if(typeof g=="string")if(this._refs[g])g=this._refs[g];else return B.call(this,O,S,g);if(g=g||this._schemas[Z],g instanceof z)return V(g.schema,this._opts.inlineRefs)?g.schema:g.validate||this._compile(g);var y=M.call(this,S,Z),k,E,D;if(y)k=y.schema,S=y.root,D=y.baseId;if(k instanceof z)E=k.validate||O.call(this,k.schema,S,void 0,D);else if(k!==void 0)E=V(k,this._opts.inlineRefs)?k:O.call(this,k,S,void 0,D);return E}function M(O,S){var Z=Y.parse(S),g=A(Z),y=L(this._getId(O.schema));if(Object.keys(O.schema).length===0||g!==y){var k=_(g),E=this._refs[k];if(typeof E=="string")return q.call(this,O,E,Z);else if(E instanceof z){if(!E.validate)this._compile(E);O=E}else if(E=this._schemas[k],E instanceof z){if(!E.validate)this._compile(E);if(k==_(S))return{schema:E,root:O,baseId:y};O=E}else return;if(!O.schema)return;y=L(this._getId(O.schema))}return I.call(this,Z,y,O.schema,O)}function q(O,S,Z){var g=M.call(this,O,S);if(g){var{schema:y,baseId:k}=g;O=g.root;var E=this._getId(y);if(E)k=x(k,E);return I.call(this,Z,k,y,O)}}var j=G.toHash(["properties","patternProperties","enum","dependencies","definitions"]);function I(O,S,Z,g){if(O.fragment=O.fragment||"",O.fragment.slice(0,1)!="/")return;var y=O.fragment.split("/");for(var k=1;k<y.length;k++){var E=y[k];if(E){if(E=G.unescapeFragment(E),Z=Z[E],Z===void 0)break;var D;if(!j[E]){if(D=this._getId(Z),D)S=x(S,D);if(Z.$ref){var f=x(S,Z.$ref),m=M.call(this,g,f);if(m)Z=m.schema,g=m.root,S=m.baseId}}}}if(Z!==void 0&&Z!==g.schema)return{schema:Z,root:g,baseId:S}}var C=G.toHash(["type","format","pattern","maxLength","minLength","maxProperties","minProperties","maxItems","minItems","maximum","minimum","uniqueItems","multipleOf","required","enum"]);function V(O,S){if(S===!1)return!1;if(S===void 0||S===!0)return R(O);else if(S)return U(O)<=S}function R(O){var S;if(Array.isArray(O)){for(var Z=0;Z<O.length;Z++)if(S=O[Z],typeof S=="object"&&!R(S))return!1}else for(var g in O){if(g=="$ref")return!1;if(S=O[g],typeof S=="object"&&!R(S))return!1}return!0}function U(O){var S=0,Z;if(Array.isArray(O))for(var g=0;g<O.length;g++){if(Z=O[g],typeof Z=="object")S+=U(Z);if(S==1/0)return 1/0}else for(var y in O){if(y=="$ref")return 1/0;if(C[y])S++;else{if(Z=O[y],typeof Z=="object")S+=U(Z)+1;if(S==1/0)return 1/0}}return S}function L(O,S){if(S!==!1)O=_(O);var Z=Y.parse(O);return A(Z)}function A(O){return Y.serialize(O).split("#")[0]+"#"}var N=/#\/?$/;function _(O){return O?O.replace(N,""):""}function x(O,S){return S=_(S),Y.resolve(O,S)}function P(O){var S=_(this._getId(O)),Z={"":S},g={"":L(S,!1)},y={},k=this;return J(O,{allKeys:!0},function(E,D,f,m,n,o,F0){if(D==="")return;var W0=k._getId(E),U0=Z[m],J0=g[m]+"/"+n;if(F0!==void 0)J0+="/"+(typeof F0=="number"?F0:G.escapeFragment(F0));if(typeof W0=="string"){W0=U0=_(U0?Y.resolve(U0,W0):W0);var Y0=k._refs[W0];if(typeof Y0=="string")Y0=k._refs[Y0];if(Y0&&Y0.schema){if(!Q(E,Y0.schema))throw Error('id "'+W0+'" resolves to more than one schema')}else if(W0!=_(J0))if(W0[0]=="#"){if(y[W0]&&!Q(E,y[W0]))throw Error('id "'+W0+'" resolves to more than one schema');y[W0]=E}else k._refs[W0]=J0}Z[D]=U0,g[D]=J0}),y}}),q9=M0((W,X)=>{var Y=H9();X.exports={Validation:z(Q),MissingRef:z(G)};function Q(J){this.message="validation failed",this.errors=J,this.ajv=this.validation=!0}G.message=function(J,B){return"can't resolve reference "+B+" from id "+J};function G(J,B,M){this.message=M||G.message(J,B),this.missingRef=Y.url(J,B),this.missingSchema=Y.normalizeId(Y.fullPath(this.missingRef))}function z(J){return J.prototype=Object.create(Error.prototype),J.prototype.constructor=J,J}}),a9=M0((W,X)=>{X.exports=function(Y,Q){if(!Q)Q={};if(typeof Q==="function")Q={cmp:Q};var G=typeof Q.cycles==="boolean"?Q.cycles:!1,z=Q.cmp&&function(B){return function(M){return function(q,j){var I={key:q,value:M[q]},C={key:j,value:M[j]};return B(I,C)}}}(Q.cmp),J=[];return function B(M){if(M&&M.toJSON&&typeof M.toJSON==="function")M=M.toJSON();if(M===void 0)return;if(typeof M=="number")return isFinite(M)?""+M:"null";if(typeof M!=="object")return JSON.stringify(M);var q,j;if(Array.isArray(M)){j="[";for(q=0;q<M.length;q++){if(q)j+=",";j+=B(M[q])||"null"}return j+"]"}if(M===null)return"null";if(J.indexOf(M)!==-1){if(G)return JSON.stringify("__cycle__");throw TypeError("Converting circular structure to JSON")}var I=J.push(M)-1,C=Object.keys(M).sort(z&&z(M));j="";for(q=0;q<C.length;q++){var V=C[q],R=B(M[V]);if(!R)continue;if(j)j+=",";j+=JSON.stringify(V)+":"+R}return J.splice(I,1),"{"+j+"}"}(Y)}}),s9=M0((W,X)=>{X.exports=function(Q,G,z){var J="",B=Q.schema.$async===!0,M=Q.util.schemaHasRulesExcept(Q.schema,Q.RULES.all,"$ref"),q=Q.self._getId(Q.schema);if(Q.opts.strictKeywords){var j=Q.util.schemaUnknownRules(Q.schema,Q.RULES.keywords);if(j){var I="unknown keyword: "+j;if(Q.opts.strictKeywords==="log")Q.logger.warn(I);else throw Error(I)}}if(Q.isTop){if(J+=" var validate = ",B)Q.async=!0,J+="async ";if(J+="function(data, dataPath, parentData, parentDataProperty, rootData) { 'use strict'; ",q&&(Q.opts.sourceCode||Q.opts.processCode))J+=" "+("/*# sourceURL="+q+" */")+" "}if(typeof Q.schema=="boolean"||!(M||Q.schema.$ref)){var G="false schema",C=Q.level,V=Q.dataLevel,R=Q.schema[G],U=Q.schemaPath+Q.util.getProperty(G),L=Q.errSchemaPath+"/"+G,S=!Q.opts.allErrors,y,A="data"+(V||""),O="valid"+C;if(Q.schema===!1){if(Q.isTop)S=!0;else J+=" var "+O+" = false; ";var N=N||[];if(N.push(J),J="",Q.createErrors!==!1){if(J+=" { keyword: '"+(y||"false schema")+"' , dataPath: (dataPath || '') + "+Q.errorPath+" , schemaPath: "+Q.util.toQuotedString(L)+" , params: {} ",Q.opts.messages!==!1)J+=" , message: 'boolean schema is false' ";if(Q.opts.verbose)J+=" , schema: false , parentSchema: validate.schema"+Q.schemaPath+" , data: "+A+" ";J+=" } "}else J+=" {} ";var _=J;if(J=N.pop(),!Q.compositeRule&&S)if(Q.async)J+=" throw new ValidationError(["+_+"]); ";else J+=" validate.errors = ["+_+"]; return false; ";else J+=" var err = "+_+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; "}else if(Q.isTop)if(B)J+=" return data; ";else J+=" validate.errors = null; return true; ";else J+=" var "+O+" = true; ";if(Q.isTop)J+=" }; return validate; ";return J}if(Q.isTop){var x=Q.isTop,C=Q.level=0,V=Q.dataLevel=0,A="data";if(Q.rootId=Q.resolve.fullPath(Q.self._getId(Q.root.schema)),Q.baseId=Q.baseId||Q.rootId,delete Q.isTop,Q.dataPathArr=[""],Q.schema.default!==void 0&&Q.opts.useDefaults&&Q.opts.strictDefaults){var P="default is ignored in the schema root";if(Q.opts.strictDefaults==="log")Q.logger.warn(P);else throw Error(P)}J+=" var vErrors = null; ",J+=" var errors = 0;     ",J+=" if (rootData === undefined) rootData = data; "}else{var{level:C,dataLevel:V}=Q,A="data"+(V||"");if(q)Q.baseId=Q.resolve.url(Q.baseId,q);if(B&&!Q.async)throw Error("async schema in sync schema");J+=" var errs_"+C+" = errors;"}var O="valid"+C,S=!Q.opts.allErrors,Z="",g="",y,k=Q.schema.type,E=Array.isArray(k);if(k&&Q.opts.nullable&&Q.schema.nullable===!0){if(E){if(k.indexOf("null")==-1)k=k.concat("null")}else if(k!="null")k=[k,"null"],E=!0}if(E&&k.length==1)k=k[0],E=!1;if(Q.schema.$ref&&M){if(Q.opts.extendRefs=="fail")throw Error('$ref: validation keywords used in schema at path "'+Q.errSchemaPath+'" (see option extendRefs)');else if(Q.opts.extendRefs!==!0)M=!1,Q.logger.warn('$ref: keywords ignored in schema at path "'+Q.errSchemaPath+'"')}if(Q.schema.$comment&&Q.opts.$comment)J+=" "+Q.RULES.all.$comment.code(Q,"$comment");if(k){if(Q.opts.coerceTypes)var D=Q.util.coerceToTypes(Q.opts.coerceTypes,k);var f=Q.RULES.types[k];if(D||E||f===!0||f&&!n0(f)){var U=Q.schemaPath+".type",L=Q.errSchemaPath+"/type",U=Q.schemaPath+".type",L=Q.errSchemaPath+"/type",m=E?"checkDataTypes":"checkDataType";if(J+=" if ("+Q.util[m](k,A,Q.opts.strictNumbers,!0)+") { ",D){var n="dataType"+C,o="coerced"+C;if(J+=" var "+n+" = typeof "+A+"; var "+o+" = undefined; ",Q.opts.coerceTypes=="array")J+=" if ("+n+" == 'object' && Array.isArray("+A+") && "+A+".length == 1) { "+A+" = "+A+"[0]; "+n+" = typeof "+A+"; if ("+Q.util.checkDataType(Q.schema.type,A,Q.opts.strictNumbers)+") "+o+" = "+A+"; } ";J+=" if ("+o+" !== undefined) ; ";var F0=D;if(F0){var W0,U0=-1,J0=F0.length-1;while(U0<J0)if(W0=F0[U0+=1],W0=="string")J+=" else if ("+n+" == 'number' || "+n+" == 'boolean') "+o+" = '' + "+A+"; else if ("+A+" === null) "+o+" = ''; ";else if(W0=="number"||W0=="integer"){if(J+=" else if ("+n+" == 'boolean' || "+A+" === null || ("+n+" == 'string' && "+A+" && "+A+" == +"+A+" ",W0=="integer")J+=" && !("+A+" % 1)";J+=")) "+o+" = +"+A+"; "}else if(W0=="boolean")J+=" else if ("+A+" === 'false' || "+A+" === 0 || "+A+" === null) "+o+" = false; else if ("+A+" === 'true' || "+A+" === 1) "+o+" = true; ";else if(W0=="null")J+=" else if ("+A+" === '' || "+A+" === 0 || "+A+" === false) "+o+" = null; ";else if(Q.opts.coerceTypes=="array"&&W0=="array")J+=" else if ("+n+" == 'string' || "+n+" == 'number' || "+n+" == 'boolean' || "+A+" == null) "+o+" = ["+A+"]; "}J+=" else {   ";var N=N||[];if(N.push(J),J="",Q.createErrors!==!1){if(J+=" { keyword: '"+(y||"type")+"' , dataPath: (dataPath || '') + "+Q.errorPath+" , schemaPath: "+Q.util.toQuotedString(L)+" , params: { type: '",E)J+=""+k.join(",");else J+=""+k;if(J+="' } ",Q.opts.messages!==!1){if(J+=" , message: 'should be ",E)J+=""+k.join(",");else J+=""+k;J+="' "}if(Q.opts.verbose)J+=" , schema: validate.schema"+U+" , parentSchema: validate.schema"+Q.schemaPath+" , data: "+A+" ";J+=" } "}else J+=" {} ";var _=J;if(J=N.pop(),!Q.compositeRule&&S)if(Q.async)J+=" throw new ValidationError(["+_+"]); ";else J+=" validate.errors = ["+_+"]; return false; ";else J+=" var err = "+_+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ";J+=" } if ("+o+" !== undefined) {  ";var Y0=V?"data"+(V-1||""):"parentData",w0=V?Q.dataPathArr[V]:"parentDataProperty";if(J+=" "+A+" = "+o+"; ",!V)J+="if ("+Y0+" !== undefined)";J+=" "+Y0+"["+w0+"] = "+o+"; } "}else{var N=N||[];if(N.push(J),J="",Q.createErrors!==!1){if(J+=" { keyword: '"+(y||"type")+"' , dataPath: (dataPath || '') + "+Q.errorPath+" , schemaPath: "+Q.util.toQuotedString(L)+" , params: { type: '",E)J+=""+k.join(",");else J+=""+k;if(J+="' } ",Q.opts.messages!==!1){if(J+=" , message: 'should be ",E)J+=""+k.join(",");else J+=""+k;J+="' "}if(Q.opts.verbose)J+=" , schema: validate.schema"+U+" , parentSchema: validate.schema"+Q.schemaPath+" , data: "+A+" ";J+=" } "}else J+=" {} ";var _=J;if(J=N.pop(),!Q.compositeRule&&S)if(Q.async)J+=" throw new ValidationError(["+_+"]); ";else J+=" validate.errors = ["+_+"]; return false; ";else J+=" var err = "+_+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; "}J+=" } "}}if(Q.schema.$ref&&!M){if(J+=" "+Q.RULES.all.$ref.code(Q,"$ref")+" ",S){if(J+=" } if (errors === ",x)J+="0";else J+="errs_"+C;J+=") { ",g+="}"}}else{var k0=Q.RULES;if(k0){var f,x0=-1,C0=k0.length-1;while(x0<C0)if(f=k0[x0+=1],n0(f)){if(f.type)J+=" if ("+Q.util.checkDataType(f.type,A,Q.opts.strictNumbers)+") { ";if(Q.opts.useDefaults){if(f.type=="object"&&Q.schema.properties){var R=Q.schema.properties,v0=Object.keys(R),b=v0;if(b){var h,s=-1,L0=b.length-1;while(s<L0){h=b[s+=1];var $=R[h];if($.default!==void 0){var u=A+Q.util.getProperty(h);if(Q.compositeRule){if(Q.opts.strictDefaults){var P="default is ignored for: "+u;if(Q.opts.strictDefaults==="log")Q.logger.warn(P);else throw Error(P)}}else{if(J+=" if ("+u+" === undefined ",Q.opts.useDefaults=="empty")J+=" || "+u+" === null || "+u+" === '' ";if(J+=" ) "+u+" = ",Q.opts.useDefaults=="shared")J+=" "+Q.useDefault($.default)+" ";else J+=" "+JSON.stringify($.default)+" ";J+="; "}}}}}else if(f.type=="array"&&Array.isArray(Q.schema.items)){var q0=Q.schema.items;if(q0){var $,U0=-1,R0=q0.length-1;while(U0<R0)if($=q0[U0+=1],$.default!==void 0){var u=A+"["+U0+"]";if(Q.compositeRule){if(Q.opts.strictDefaults){var P="default is ignored for: "+u;if(Q.opts.strictDefaults==="log")Q.logger.warn(P);else throw Error(P)}}else{if(J+=" if ("+u+" === undefined ",Q.opts.useDefaults=="empty")J+=" || "+u+" === null || "+u+" === '' ";if(J+=" ) "+u+" = ",Q.opts.useDefaults=="shared")J+=" "+Q.useDefault($.default)+" ";else J+=" "+JSON.stringify($.default)+" ";J+="; "}}}}}var H0=f.rules;if(H0){var f0,y0=-1,E0=H0.length-1;while(y0<E0)if(f0=H0[y0+=1],e0(f0)){var o0=f0.code(Q,f0.keyword,f.type);if(o0){if(J+=" "+o0+" ",S)Z+="}"}}}if(S)J+=" "+Z+" ",Z="";if(f.type){if(J+=" } ",k&&k===f.type&&!D){J+=" else { ";var U=Q.schemaPath+".type",L=Q.errSchemaPath+"/type",N=N||[];if(N.push(J),J="",Q.createErrors!==!1){if(J+=" { keyword: '"+(y||"type")+"' , dataPath: (dataPath || '') + "+Q.errorPath+" , schemaPath: "+Q.util.toQuotedString(L)+" , params: { type: '",E)J+=""+k.join(",");else J+=""+k;if(J+="' } ",Q.opts.messages!==!1){if(J+=" , message: 'should be ",E)J+=""+k.join(",");else J+=""+k;J+="' "}if(Q.opts.verbose)J+=" , schema: validate.schema"+U+" , parentSchema: validate.schema"+Q.schemaPath+" , data: "+A+" ";J+=" } "}else J+=" {} ";var _=J;if(J=N.pop(),!Q.compositeRule&&S)if(Q.async)J+=" throw new ValidationError(["+_+"]); ";else J+=" validate.errors = ["+_+"]; return false; ";else J+=" var err = "+_+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ";J+=" } "}}if(S){if(J+=" if (errors === ",x)J+="0";else J+="errs_"+C;J+=") { ",g+="}"}}}}if(S)J+=" "+g+" ";if(x){if(B)J+=" if (errors === 0) return data;           ",J+=" else throw new ValidationError(vErrors); ";else J+=" validate.errors = vErrors; ",J+=" return errors === 0;       ";J+=" }; return validate;"}else J+=" var "+O+" = errors === errs_"+C+";";function n0(i0){var B1=i0.rules;for(var J1=0;J1<B1.length;J1++)if(e0(B1[J1]))return!0}function e0(i0){return Q.schema[i0.keyword]!==void 0||i0.implements&&h0(i0)}function h0(i0){var B1=i0.implements;for(var J1=0;J1<B1.length;J1++)if(Q.schema[B1[J1]]!==void 0)return!0}return J}}),bQ=M0((W,X)=>{var Y=H9(),Q=gW(),G=q9(),z=a9(),J=s9(),B=Q.ucs2length,M=B9(),q=G.Validation;X.exports=j;function j(_,x,P,O){var S=this,Z=this._opts,g=[void 0],y={},k=[],E={},D=[],f={},m=[];x=x||{schema:_,refVal:g,refs:y};var n=I.call(this,_,x,O),o=this._compilations[n.index];if(n.compiling)return o.callValidate=Y0;var F0=this._formats,W0=this.RULES;try{var U0=w0(_,x,P,O);o.validate=U0;var J0=o.callValidate;if(J0){if(J0.schema=U0.schema,J0.errors=null,J0.refs=U0.refs,J0.refVal=U0.refVal,J0.root=U0.root,J0.$async=U0.$async,Z.sourceCode)J0.source=U0.source}return U0}finally{C.call(this,_,x,O)}function Y0(){var $=o.validate,u=$.apply(this,arguments);return Y0.errors=$.errors,u}function w0($,u,q0,R0){var H0=!u||u&&u.schema==$;if(u.schema!=x.schema)return j.call(S,$,u,q0,R0);var f0=$.$async===!0,y0=J({isTop:!0,schema:$,isRoot:H0,baseId:R0,root:u,schemaPath:"",errSchemaPath:"#",errorPath:'""',MissingRefError:G.MissingRef,RULES:W0,validate:J,util:Q,resolve:Y,resolveRef:k0,usePattern:h,useDefault:s,useCustomRule:L0,opts:Z,formats:F0,logger:S.logger,self:S});if(y0=N(g,L)+N(k,R)+N(D,U)+N(m,A)+y0,Z.processCode)y0=Z.processCode(y0,$);var E0;try{var o0=Function("self","RULES","formats","root","refVal","defaults","customRules","equal","ucs2length","ValidationError",y0);E0=o0(S,W0,F0,x,g,D,m,M,B,q),g[0]=E0}catch(n0){throw S.logger.error("Error compiling schema, function code:",y0),n0}if(E0.schema=$,E0.errors=null,E0.refs=y,E0.refVal=g,E0.root=H0?E0:u,f0)E0.$async=!0;if(Z.sourceCode===!0)E0.source={code:y0,patterns:k,defaults:D};return E0}function k0($,u,q0){u=Y.url($,u);var R0=y[u],H0,f0;if(R0!==void 0)return H0=g[R0],f0="refVal["+R0+"]",b(H0,f0);if(!q0&&x.refs){var y0=x.refs[u];if(y0!==void 0)return H0=x.refVal[y0],f0=x0(u,H0),b(H0,f0)}f0=x0(u);var E0=Y.call(S,w0,x,u);if(E0===void 0){var o0=P&&P[u];if(o0)E0=Y.inlineRef(o0,Z.inlineRefs)?o0:j.call(S,o0,x,P,$)}if(E0===void 0)C0(u);else return v0(u,E0),b(E0,f0)}function x0($,u){var q0=g.length;return g[q0]=u,y[$]=q0,"refVal"+q0}function C0($){delete y[$]}function v0($,u){var q0=y[$];g[q0]=u}function b($,u){return typeof $=="object"||typeof $=="boolean"?{code:u,schema:$,inline:!0}:{code:u,$async:$&&!!$.$async}}function h($){var u=E[$];if(u===void 0)u=E[$]=k.length,k[u]=$;return"pattern"+u}function s($){switch(typeof $){case"boolean":case"number":return""+$;case"string":return Q.toQuotedString($);case"object":if($===null)return"null";var u=z($),q0=f[u];if(q0===void 0)q0=f[u]=D.length,D[q0]=$;return"default"+q0}}function L0($,u,q0,R0){if(S._opts.validateSchema!==!1){var H0=$.definition.dependencies;if(H0&&!H0.every(function(B1){return Object.prototype.hasOwnProperty.call(q0,B1)}))throw Error("parent schema must have all required keywords: "+H0.join(","));var f0=$.definition.validateSchema;if(f0){var y0=f0(u);if(!y0){var E0="keyword schema is invalid: "+S.errorsText(f0.errors);if(S._opts.validateSchema=="log")S.logger.error(E0);else throw Error(E0)}}}var o0=$.definition.compile,n0=$.definition.inline,e0=$.definition.macro,h0;if(o0)h0=o0.call(S,u,q0,R0);else if(e0){if(h0=e0.call(S,u,q0,R0),Z.validateSchema!==!1)S.validateSchema(h0,!0)}else if(n0)h0=n0.call(S,R0,$.keyword,u,q0);else if(h0=$.definition.validate,!h0)return;if(h0===void 0)throw Error('custom keyword "'+$.keyword+'"failed to compile');var i0=m.length;return m[i0]=h0,{code:"customRule"+i0,validate:h0}}}function I(_,x,P){var O=V.call(this,_,x,P);if(O>=0)return{index:O,compiling:!0};return O=this._compilations.length,this._compilations[O]={schema:_,root:x,baseId:P},{index:O,compiling:!1}}function C(_,x,P){var O=V.call(this,_,x,P);if(O>=0)this._compilations.splice(O,1)}function V(_,x,P){for(var O=0;O<this._compilations.length;O++){var S=this._compilations[O];if(S.schema==_&&S.root==x&&S.baseId==P)return O}return-1}function R(_,x){return"var pattern"+_+" = new RegExp("+Q.toQuotedString(x[_])+");"}function U(_){return"var default"+_+" = defaults["+_+"];"}function L(_,x){return x[_]===void 0?"":"var refVal"+_+" = refVal["+_+"];"}function A(_){return"var customRule"+_+" = customRules["+_+"];"}function N(_,x){if(!_.length)return"";var P="";for(var O=0;O<_.length;O++)P+=x(O,_);return P}}),SQ=M0((W,X)=>{var Y=X.exports=function(){this._cache={}};Y.prototype.put=function(G,z){this._cache[G]=z},Y.prototype.get=function(G){return this._cache[G]},Y.prototype.del=function(G){delete this._cache[G]},Y.prototype.clear=function(){this._cache={}}}),PQ=M0((W,X)=>{var Y=gW(),Q=/^(\d\d\d\d)-(\d\d)-(\d\d)$/,G=[0,31,28,31,30,31,30,31,31,30,31,30,31],z=/^(\d\d):(\d\d):(\d\d)(\.\d+)?(z|[+-]\d\d(?::?\d\d)?)?$/i,J=/^(?=.{1,253}\.?$)[a-z0-9](?:[a-z0-9-]{0,61}[a-z0-9])?(?:\.[a-z0-9](?:[-0-9a-z]{0,61}[0-9a-z])?)*\.?$/i,B=/^(?:[a-z][a-z0-9+\-.]*:)(?:\/?\/(?:(?:[a-z0-9\-._~!$&'()*+,;=:]|%[0-9a-f]{2})*@)?(?:\[(?:(?:(?:(?:[0-9a-f]{1,4}:){6}|::(?:[0-9a-f]{1,4}:){5}|(?:[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){4}|(?:(?:[0-9a-f]{1,4}:){0,1}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){3}|(?:(?:[0-9a-f]{1,4}:){0,2}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){2}|(?:(?:[0-9a-f]{1,4}:){0,3}[0-9a-f]{1,4})?::[0-9a-f]{1,4}:|(?:(?:[0-9a-f]{1,4}:){0,4}[0-9a-f]{1,4})?::)(?:[0-9a-f]{1,4}:[0-9a-f]{1,4}|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?))|(?:(?:[0-9a-f]{1,4}:){0,5}[0-9a-f]{1,4})?::[0-9a-f]{1,4}|(?:(?:[0-9a-f]{1,4}:){0,6}[0-9a-f]{1,4})?::)|[Vv][0-9a-f]+\.[a-z0-9\-._~!$&'()*+,;=:]+)\]|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?)|(?:[a-z0-9\-._~!$&'()*+,;=]|%[0-9a-f]{2})*)(?::\d*)?(?:\/(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})*)*|\/(?:(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})*)*)?|(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})*)*)(?:\?(?:[a-z0-9\-._~!$&'()*+,;=:@/?]|%[0-9a-f]{2})*)?(?:#(?:[a-z0-9\-._~!$&'()*+,;=:@/?]|%[0-9a-f]{2})*)?$/i,M=/^(?:[a-z][a-z0-9+\-.]*:)?(?:\/?\/(?:(?:[a-z0-9\-._~!$&'()*+,;=:]|%[0-9a-f]{2})*@)?(?:\[(?:(?:(?:(?:[0-9a-f]{1,4}:){6}|::(?:[0-9a-f]{1,4}:){5}|(?:[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){4}|(?:(?:[0-9a-f]{1,4}:){0,1}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){3}|(?:(?:[0-9a-f]{1,4}:){0,2}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){2}|(?:(?:[0-9a-f]{1,4}:){0,3}[0-9a-f]{1,4})?::[0-9a-f]{1,4}:|(?:(?:[0-9a-f]{1,4}:){0,4}[0-9a-f]{1,4})?::)(?:[0-9a-f]{1,4}:[0-9a-f]{1,4}|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?))|(?:(?:[0-9a-f]{1,4}:){0,5}[0-9a-f]{1,4})?::[0-9a-f]{1,4}|(?:(?:[0-9a-f]{1,4}:){0,6}[0-9a-f]{1,4})?::)|[Vv][0-9a-f]+\.[a-z0-9\-._~!$&'()*+,;=:]+)\]|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?)|(?:[a-z0-9\-._~!$&'"()*+,;=]|%[0-9a-f]{2})*)(?::\d*)?(?:\/(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})*)*|\/(?:(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})*)*)?|(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})*)*)?(?:\?(?:[a-z0-9\-._~!$&'"()*+,;=:@/?]|%[0-9a-f]{2})*)?(?:#(?:[a-z0-9\-._~!$&'"()*+,;=:@/?]|%[0-9a-f]{2})*)?$/i,q=/^(?:(?:[^\x00-\x20"'<>%\\^`{|}]|%[0-9a-f]{2})|\{[+#./;?&=,!@|]?(?:[a-z0-9_]|%[0-9a-f]{2})+(?::[1-9][0-9]{0,3}|\*)?(?:,(?:[a-z0-9_]|%[0-9a-f]{2})+(?::[1-9][0-9]{0,3}|\*)?)*\})*$/i,j=/^(?:(?:http[s\u017F]?|ftp):\/\/)(?:(?:[\0-\x08\x0E-\x1F!-\x9F\xA1-\u167F\u1681-\u1FFF\u200B-\u2027\u202A-\u202E\u2030-\u205E\u2060-\u2FFF\u3001-\uD7FF\uE000-\uFEFE\uFF00-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])+(?::(?:[\0-\x08\x0E-\x1F!-\x9F\xA1-\u167F\u1681-\u1FFF\u200B-\u2027\u202A-\u202E\u2030-\u205E\u2060-\u2FFF\u3001-\uD7FF\uE000-\uFEFE\uFF00-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])*)?@)?(?:(?!10(?:\.[0-9]{1,3}){3})(?!127(?:\.[0-9]{1,3}){3})(?!169\.254(?:\.[0-9]{1,3}){2})(?!192\.168(?:\.[0-9]{1,3}){2})(?!172\.(?:1[6-9]|2[0-9]|3[01])(?:\.[0-9]{1,3}){2})(?:[1-9][0-9]?|1[0-9][0-9]|2[01][0-9]|22[0-3])(?:\.(?:1?[0-9]{1,2}|2[0-4][0-9]|25[0-5])){2}(?:\.(?:[1-9][0-9]?|1[0-9][0-9]|2[0-4][0-9]|25[0-4]))|(?:(?:(?:[0-9a-z\xA1-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])+-)*(?:[0-9a-z\xA1-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])+)(?:\.(?:(?:[0-9a-z\xA1-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])+-)*(?:[0-9a-z\xA1-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])+)*(?:\.(?:(?:[a-z\xA1-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF]){2,})))(?::[0-9]{2,5})?(?:\/(?:[\0-\x08\x0E-\x1F!-\x9F\xA1-\u167F\u1681-\u1FFF\u200B-\u2027\u202A-\u202E\u2030-\u205E\u2060-\u2FFF\u3001-\uD7FF\uE000-\uFEFE\uFF00-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])*)?$/i,I=/^(?:urn:uuid:)?[0-9a-f]{8}-(?:[0-9a-f]{4}-){3}[0-9a-f]{12}$/i,C=/^(?:\/(?:[^~/]|~0|~1)*)*$/,V=/^#(?:\/(?:[a-z0-9_\-.!$&'()*+,;:=@]|%[0-9a-f]{2}|~0|~1)*)*$/i,R=/^(?:0|[1-9][0-9]*)(?:#|(?:\/(?:[^~/]|~0|~1)*)*)$/;X.exports=U;function U(g){return g=g=="full"?"full":"fast",Y.copy(U[g])}U.fast={date:/^\d\d\d\d-[0-1]\d-[0-3]\d$/,time:/^(?:[0-2]\d:[0-5]\d:[0-5]\d|23:59:60)(?:\.\d+)?(?:z|[+-]\d\d(?::?\d\d)?)?$/i,"date-time":/^\d\d\d\d-[0-1]\d-[0-3]\d[t\s](?:[0-2]\d:[0-5]\d:[0-5]\d|23:59:60)(?:\.\d+)?(?:z|[+-]\d\d(?::?\d\d)?)$/i,uri:/^(?:[a-z][a-z0-9+\-.]*:)(?:\/?\/)?[^\s]*$/i,"uri-reference":/^(?:(?:[a-z][a-z0-9+\-.]*:)?\/?\/)?(?:[^\\\s#][^\s#]*)?(?:#[^\\\s]*)?$/i,"uri-template":q,url:j,email:/^[a-z0-9.!#$%&'*+/=?^_`{|}~-]+@[a-z0-9](?:[a-z0-9-]{0,61}[a-z0-9])?(?:\.[a-z0-9](?:[a-z0-9-]{0,61}[a-z0-9])?)*$/i,hostname:J,ipv4:/^(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?)$/,ipv6:/^\s*(?:(?:(?:[0-9a-f]{1,4}:){7}(?:[0-9a-f]{1,4}|:))|(?:(?:[0-9a-f]{1,4}:){6}(?::[0-9a-f]{1,4}|(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(?:(?:[0-9a-f]{1,4}:){5}(?:(?:(?::[0-9a-f]{1,4}){1,2})|:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(?:(?:[0-9a-f]{1,4}:){4}(?:(?:(?::[0-9a-f]{1,4}){1,3})|(?:(?::[0-9a-f]{1,4})?:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(?:(?:[0-9a-f]{1,4}:){3}(?:(?:(?::[0-9a-f]{1,4}){1,4})|(?:(?::[0-9a-f]{1,4}){0,2}:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(?:(?:[0-9a-f]{1,4}:){2}(?:(?:(?::[0-9a-f]{1,4}){1,5})|(?:(?::[0-9a-f]{1,4}){0,3}:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(?:(?:[0-9a-f]{1,4}:){1}(?:(?:(?::[0-9a-f]{1,4}){1,6})|(?:(?::[0-9a-f]{1,4}){0,4}:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(?::(?:(?:(?::[0-9a-f]{1,4}){1,7})|(?:(?::[0-9a-f]{1,4}){0,5}:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:)))(?:%.+)?\s*$/i,regex:Z,uuid:I,"json-pointer":C,"json-pointer-uri-fragment":V,"relative-json-pointer":R},U.full={date:A,time:N,"date-time":x,uri:O,"uri-reference":M,"uri-template":q,url:j,email:/^[a-z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-z0-9!#$%&'*+/=?^_`{|}~-]+)*@(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?$/i,hostname:J,ipv4:/^(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?)$/,ipv6:/^\s*(?:(?:(?:[0-9a-f]{1,4}:){7}(?:[0-9a-f]{1,4}|:))|(?:(?:[0-9a-f]{1,4}:){6}(?::[0-9a-f]{1,4}|(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(?:(?:[0-9a-f]{1,4}:){5}(?:(?:(?::[0-9a-f]{1,4}){1,2})|:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(?:(?:[0-9a-f]{1,4}:){4}(?:(?:(?::[0-9a-f]{1,4}){1,3})|(?:(?::[0-9a-f]{1,4})?:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(?:(?:[0-9a-f]{1,4}:){3}(?:(?:(?::[0-9a-f]{1,4}){1,4})|(?:(?::[0-9a-f]{1,4}){0,2}:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(?:(?:[0-9a-f]{1,4}:){2}(?:(?:(?::[0-9a-f]{1,4}){1,5})|(?:(?::[0-9a-f]{1,4}){0,3}:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(?:(?:[0-9a-f]{1,4}:){1}(?:(?:(?::[0-9a-f]{1,4}){1,6})|(?:(?::[0-9a-f]{1,4}){0,4}:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(?::(?:(?:(?::[0-9a-f]{1,4}){1,7})|(?:(?::[0-9a-f]{1,4}){0,5}:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:)))(?:%.+)?\s*$/i,regex:Z,uuid:I,"json-pointer":C,"json-pointer-uri-fragment":V,"relative-json-pointer":R};function L(g){return g%4===0&&(g%100!==0||g%400===0)}function A(g){var y=g.match(Q);if(!y)return!1;var k=+y[1],E=+y[2],D=+y[3];return E>=1&&E<=12&&D>=1&&D<=(E==2&&L(k)?29:G[E])}function N(g,y){var k=g.match(z);if(!k)return!1;var E=k[1],D=k[2],f=k[3],m=k[5];return(E<=23&&D<=59&&f<=59||E==23&&D==59&&f==60)&&(!y||m)}var _=/t|\s/i;function x(g){var y=g.split(_);return y.length==2&&A(y[0])&&N(y[1],!0)}var P=/\/|:/;function O(g){return P.test(g)&&B.test(g)}var S=/[^\\]\\Z/;function Z(g){if(S.test(g))return!1;try{return new RegExp(g),!0}catch(y){return!1}}}),vQ=M0((W,X)=>{X.exports=function(Q,G,z){var J=" ",B=Q.level,M=Q.dataLevel,q=Q.schema[G],j=Q.errSchemaPath+"/"+G,I=!Q.opts.allErrors,C="data"+(M||""),V="valid"+B,R,U;if(q=="#"||q=="#/")if(Q.isRoot)R=Q.async,U="validate";else R=Q.root.schema.$async===!0,U="root.refVal[0]";else{var L=Q.resolveRef(Q.baseId,q,Q.isRoot);if(L===void 0){var A=Q.MissingRefError.message(Q.baseId,q);if(Q.opts.missingRefs=="fail"){Q.logger.error(A);var N=N||[];if(N.push(J),J="",Q.createErrors!==!1){if(J+=" { keyword: '$ref' , dataPath: (dataPath || '') + "+Q.errorPath+" , schemaPath: "+Q.util.toQuotedString(j)+" , params: { ref: '"+Q.util.escapeQuotes(q)+"' } ",Q.opts.messages!==!1)J+=" , message: 'can\\'t resolve reference "+Q.util.escapeQuotes(q)+"' ";if(Q.opts.verbose)J+=" , schema: "+Q.util.toQuotedString(q)+" , parentSchema: validate.schema"+Q.schemaPath+" , data: "+C+" ";J+=" } "}else J+=" {} ";var _=J;if(J=N.pop(),!Q.compositeRule&&I)if(Q.async)J+=" throw new ValidationError(["+_+"]); ";else J+=" validate.errors = ["+_+"]; return false; ";else J+=" var err = "+_+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ";if(I)J+=" if (false) { "}else if(Q.opts.missingRefs=="ignore"){if(Q.logger.warn(A),I)J+=" if (true) { "}else throw new Q.MissingRefError(Q.baseId,q,A)}else if(L.inline){var x=Q.util.copy(Q);x.level++;var P="valid"+x.level;x.schema=L.schema,x.schemaPath="",x.errSchemaPath=q;var O=Q.validate(x).replace(/validate\.schema/g,L.code);if(J+=" "+O+" ",I)J+=" if ("+P+") { "}else R=L.$async===!0||Q.async&&L.$async!==!1,U=L.code}if(U){var N=N||[];if(N.push(J),J="",Q.opts.passContext)J+=" "+U+".call(this, ";else J+=" "+U+"( ";if(J+=" "+C+", (dataPath || '')",Q.errorPath!='""')J+=" + "+Q.errorPath;var S=M?"data"+(M-1||""):"parentData",Z=M?Q.dataPathArr[M]:"parentDataProperty";J+=" , "+S+" , "+Z+", rootData)  ";var g=J;if(J=N.pop(),R){if(!Q.async)throw Error("async schema referenced by sync schema");if(I)J+=" var "+V+"; ";if(J+=" try { await "+g+"; ",I)J+=" "+V+" = true; ";if(J+=" } catch (e) { if (!(e instanceof ValidationError)) throw e; if (vErrors === null) vErrors = e.errors; else vErrors = vErrors.concat(e.errors); errors = vErrors.length; ",I)J+=" "+V+" = false; ";if(J+=" } ",I)J+=" if ("+V+") { "}else if(J+=" if (!"+g+") { if (vErrors === null) vErrors = "+U+".errors; else vErrors = vErrors.concat("+U+".errors); errors = vErrors.length; } ",I)J+=" else { "}return J}}),ZQ=M0((W,X)=>{X.exports=function(Q,G,z){var J=" ",B=Q.schema[G],M=Q.schemaPath+Q.util.getProperty(G),q=Q.errSchemaPath+"/"+G,j=!Q.opts.allErrors,I=Q.util.copy(Q),C="";I.level++;var V="valid"+I.level,R=I.baseId,U=!0,L=B;if(L){var A,N=-1,_=L.length-1;while(N<_)if(A=L[N+=1],Q.opts.strictKeywords?typeof A=="object"&&Object.keys(A).length>0||A===!1:Q.util.schemaHasRules(A,Q.RULES.all)){if(U=!1,I.schema=A,I.schemaPath=M+"["+N+"]",I.errSchemaPath=q+"/"+N,J+="  "+Q.validate(I)+" ",I.baseId=R,j)J+=" if ("+V+") { ",C+="}"}}if(j)if(U)J+=" if (true) { ";else J+=" "+C.slice(0,-1)+" ";return J}}),TQ=M0((W,X)=>{X.exports=function(Q,G,z){var J=" ",B=Q.level,M=Q.dataLevel,q=Q.schema[G],j=Q.schemaPath+Q.util.getProperty(G),I=Q.errSchemaPath+"/"+G,C=!Q.opts.allErrors,V="data"+(M||""),R="valid"+B,U="errs__"+B,L=Q.util.copy(Q),A="";L.level++;var N="valid"+L.level,_=q.every(function(y){return Q.opts.strictKeywords?typeof y=="object"&&Object.keys(y).length>0||y===!1:Q.util.schemaHasRules(y,Q.RULES.all)});if(_){var x=L.baseId;J+=" var "+U+" = errors; var "+R+" = false;  ";var P=Q.compositeRule;Q.compositeRule=L.compositeRule=!0;var O=q;if(O){var S,Z=-1,g=O.length-1;while(Z<g)S=O[Z+=1],L.schema=S,L.schemaPath=j+"["+Z+"]",L.errSchemaPath=I+"/"+Z,J+="  "+Q.validate(L)+" ",L.baseId=x,J+=" "+R+" = "+R+" || "+N+"; if (!"+R+") { ",A+="}"}if(Q.compositeRule=L.compositeRule=P,J+=" "+A+" if (!"+R+") {   var err =   ",Q.createErrors!==!1){if(J+=" { keyword: 'anyOf' , dataPath: (dataPath || '') + "+Q.errorPath+" , schemaPath: "+Q.util.toQuotedString(I)+" , params: {} ",Q.opts.messages!==!1)J+=" , message: 'should match some schema in anyOf' ";if(Q.opts.verbose)J+=" , schema: validate.schema"+j+" , parentSchema: validate.schema"+Q.schemaPath+" , data: "+V+" ";J+=" } "}else J+=" {} ";if(J+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",!Q.compositeRule&&C)if(Q.async)J+=" throw new ValidationError(vErrors); ";else J+=" validate.errors = vErrors; return false; ";if(J+=" } else {  errors = "+U+"; if (vErrors !== null) { if ("+U+") vErrors.length = "+U+"; else vErrors = null; } ",Q.opts.allErrors)J+=" } "}else if(C)J+=" if (true) { ";return J}}),kQ=M0((W,X)=>{X.exports=function(Q,G,z){var J=" ",B=Q.schema[G],M=Q.errSchemaPath+"/"+G,q=!Q.opts.allErrors,j=Q.util.toQuotedString(B);if(Q.opts.$comment===!0)J+=" console.log("+j+");";else if(typeof Q.opts.$comment=="function")J+=" self._opts.$comment("+j+", "+Q.util.toQuotedString(M)+", validate.root.schema);";return J}}),gQ=M0((W,X)=>{X.exports=function(Q,G,z){var J=" ",B=Q.level,M=Q.dataLevel,q=Q.schema[G],j=Q.schemaPath+Q.util.getProperty(G),I=Q.errSchemaPath+"/"+G,C=!Q.opts.allErrors,V="data"+(M||""),R="valid"+B,U=Q.opts.$data&&q&&q.$data,L;if(U)J+=" var schema"+B+" = "+Q.util.getData(q.$data,M,Q.dataPathArr)+"; ",L="schema"+B;else L=q;if(!U)J+=" var schema"+B+" = validate.schema"+j+";";J+="var "+R+" = equal("+V+", schema"+B+"); if (!"+R+") {   ";var A=A||[];if(A.push(J),J="",Q.createErrors!==!1){if(J+=" { keyword: 'const' , dataPath: (dataPath || '') + "+Q.errorPath+" , schemaPath: "+Q.util.toQuotedString(I)+" , params: { allowedValue: schema"+B+" } ",Q.opts.messages!==!1)J+=" , message: 'should be equal to constant' ";if(Q.opts.verbose)J+=" , schema: validate.schema"+j+" , parentSchema: validate.schema"+Q.schemaPath+" , data: "+V+" ";J+=" } "}else J+=" {} ";var N=J;if(J=A.pop(),!Q.compositeRule&&C)if(Q.async)J+=" throw new ValidationError(["+N+"]); ";else J+=" validate.errors = ["+N+"]; return false; ";else J+=" var err = "+N+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ";if(J+=" }",C)J+=" else { ";return J}}),xQ=M0((W,X)=>{X.exports=function(Q,G,z){var J=" ",B=Q.level,M=Q.dataLevel,q=Q.schema[G],j=Q.schemaPath+Q.util.getProperty(G),I=Q.errSchemaPath+"/"+G,C=!Q.opts.allErrors,V="data"+(M||""),R="valid"+B,U="errs__"+B,L=Q.util.copy(Q),A="";L.level++;var N="valid"+L.level,_="i"+B,x=L.dataLevel=Q.dataLevel+1,P="data"+x,O=Q.baseId,S=Q.opts.strictKeywords?typeof q=="object"&&Object.keys(q).length>0||q===!1:Q.util.schemaHasRules(q,Q.RULES.all);if(J+="var "+U+" = errors;var "+R+";",S){var Z=Q.compositeRule;Q.compositeRule=L.compositeRule=!0,L.schema=q,L.schemaPath=j,L.errSchemaPath=I,J+=" var "+N+" = false; for (var "+_+" = 0; "+_+" < "+V+".length; "+_+"++) { ",L.errorPath=Q.util.getPathExpr(Q.errorPath,_,Q.opts.jsonPointers,!0);var g=V+"["+_+"]";L.dataPathArr[x]=_;var y=Q.validate(L);if(L.baseId=O,Q.util.varOccurences(y,P)<2)J+=" "+Q.util.varReplace(y,P,g)+" ";else J+=" var "+P+" = "+g+"; "+y+" ";J+=" if ("+N+") break; }  ",Q.compositeRule=L.compositeRule=Z,J+=" "+A+" if (!"+N+") {"}else J+=" if ("+V+".length == 0) {";var k=k||[];if(k.push(J),J="",Q.createErrors!==!1){if(J+=" { keyword: 'contains' , dataPath: (dataPath || '') + "+Q.errorPath+" , schemaPath: "+Q.util.toQuotedString(I)+" , params: {} ",Q.opts.messages!==!1)J+=" , message: 'should contain a valid item' ";if(Q.opts.verbose)J+=" , schema: validate.schema"+j+" , parentSchema: validate.schema"+Q.schemaPath+" , data: "+V+" ";J+=" } "}else J+=" {} ";var E=J;if(J=k.pop(),!Q.compositeRule&&C)if(Q.async)J+=" throw new ValidationError(["+E+"]); ";else J+=" validate.errors = ["+E+"]; return false; ";else J+=" var err = "+E+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ";if(J+=" } else { ",S)J+="  errors = "+U+"; if (vErrors !== null) { if ("+U+") vErrors.length = "+U+"; else vErrors = null; } ";if(Q.opts.allErrors)J+=" } ";return J}}),fQ=M0((W,X)=>{X.exports=function(Q,G,z){var J=" ",B=Q.level,M=Q.dataLevel,q=Q.schema[G],j=Q.schemaPath+Q.util.getProperty(G),I=Q.errSchemaPath+"/"+G,C=!Q.opts.allErrors,V="data"+(M||""),R="errs__"+B,U=Q.util.copy(Q),L="";U.level++;var A="valid"+U.level,N={},_={},x=Q.opts.ownProperties;for(Z in q){if(Z=="__proto__")continue;var P=q[Z],O=Array.isArray(P)?_:N;O[Z]=P}J+="var "+R+" = errors;";var S=Q.errorPath;J+="var missing"+B+";";for(var Z in _)if(O=_[Z],O.length){if(J+=" if ( "+V+Q.util.getProperty(Z)+" !== undefined ",x)J+=" && Object.prototype.hasOwnProperty.call("+V+", '"+Q.util.escapeQuotes(Z)+"') ";if(C){J+=" && ( ";var g=O;if(g){var y,k=-1,E=g.length-1;while(k<E){if(y=g[k+=1],k)J+=" || ";var D=Q.util.getProperty(y),f=V+D;if(J+=" ( ( "+f+" === undefined ",x)J+=" || ! Object.prototype.hasOwnProperty.call("+V+", '"+Q.util.escapeQuotes(y)+"') ";J+=") && (missing"+B+" = "+Q.util.toQuotedString(Q.opts.jsonPointers?y:D)+") ) "}}J+=")) {  ";var m="missing"+B,n="' + "+m+" + '";if(Q.opts._errorDataPathProperty)Q.errorPath=Q.opts.jsonPointers?Q.util.getPathExpr(S,m,!0):S+" + "+m;var o=o||[];if(o.push(J),J="",Q.createErrors!==!1){if(J+=" { keyword: 'dependencies' , dataPath: (dataPath || '') + "+Q.errorPath+" , schemaPath: "+Q.util.toQuotedString(I)+" , params: { property: '"+Q.util.escapeQuotes(Z)+"', missingProperty: '"+n+"', depsCount: "+O.length+", deps: '"+Q.util.escapeQuotes(O.length==1?O[0]:O.join(", "))+"' } ",Q.opts.messages!==!1){if(J+=" , message: 'should have ",O.length==1)J+="property "+Q.util.escapeQuotes(O[0]);else J+="properties "+Q.util.escapeQuotes(O.join(", "));J+=" when property "+Q.util.escapeQuotes(Z)+" is present' "}if(Q.opts.verbose)J+=" , schema: validate.schema"+j+" , parentSchema: validate.schema"+Q.schemaPath+" , data: "+V+" ";J+=" } "}else J+=" {} ";var F0=J;if(J=o.pop(),!Q.compositeRule&&C)if(Q.async)J+=" throw new ValidationError(["+F0+"]); ";else J+=" validate.errors = ["+F0+"]; return false; ";else J+=" var err = "+F0+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; "}else{J+=" ) { ";var W0=O;if(W0){var y,U0=-1,J0=W0.length-1;while(U0<J0){y=W0[U0+=1];var D=Q.util.getProperty(y),n=Q.util.escapeQuotes(y),f=V+D;if(Q.opts._errorDataPathProperty)Q.errorPath=Q.util.getPath(S,y,Q.opts.jsonPointers);if(J+=" if ( "+f+" === undefined ",x)J+=" || ! Object.prototype.hasOwnProperty.call("+V+", '"+Q.util.escapeQuotes(y)+"') ";if(J+=") {  var err =   ",Q.createErrors!==!1){if(J+=" { keyword: 'dependencies' , dataPath: (dataPath || '') + "+Q.errorPath+" , schemaPath: "+Q.util.toQuotedString(I)+" , params: { property: '"+Q.util.escapeQuotes(Z)+"', missingProperty: '"+n+"', depsCount: "+O.length+", deps: '"+Q.util.escapeQuotes(O.length==1?O[0]:O.join(", "))+"' } ",Q.opts.messages!==!1){if(J+=" , message: 'should have ",O.length==1)J+="property "+Q.util.escapeQuotes(O[0]);else J+="properties "+Q.util.escapeQuotes(O.join(", "));J+=" when property "+Q.util.escapeQuotes(Z)+" is present' "}if(Q.opts.verbose)J+=" , schema: validate.schema"+j+" , parentSchema: validate.schema"+Q.schemaPath+" , data: "+V+" ";J+=" } "}else J+=" {} ";J+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; } "}}}if(J+=" }   ",C)L+="}",J+=" else { "}Q.errorPath=S;var Y0=U.baseId;for(var Z in N){var P=N[Z];if(Q.opts.strictKeywords?typeof P=="object"&&Object.keys(P).length>0||P===!1:Q.util.schemaHasRules(P,Q.RULES.all)){if(J+=" "+A+" = true; if ( "+V+Q.util.getProperty(Z)+" !== undefined ",x)J+=" && Object.prototype.hasOwnProperty.call("+V+", '"+Q.util.escapeQuotes(Z)+"') ";if(J+=") { ",U.schema=P,U.schemaPath=j+Q.util.getProperty(Z),U.errSchemaPath=I+"/"+Q.util.escapeFragment(Z),J+="  "+Q.validate(U)+" ",U.baseId=Y0,J+=" }  ",C)J+=" if ("+A+") { ",L+="}"}}if(C)J+="   "+L+" if ("+R+" == errors) {";return J}}),yQ=M0((W,X)=>{X.exports=function(Q,G,z){var J=" ",B=Q.level,M=Q.dataLevel,q=Q.schema[G],j=Q.schemaPath+Q.util.getProperty(G),I=Q.errSchemaPath+"/"+G,C=!Q.opts.allErrors,V="data"+(M||""),R="valid"+B,U=Q.opts.$data&&q&&q.$data,L;if(U)J+=" var schema"+B+" = "+Q.util.getData(q.$data,M,Q.dataPathArr)+"; ",L="schema"+B;else L=q;var A="i"+B,N="schema"+B;if(!U)J+=" var "+N+" = validate.schema"+j+";";if(J+="var "+R+";",U)J+=" if (schema"+B+" === undefined) "+R+" = true; else if (!Array.isArray(schema"+B+")) "+R+" = false; else {";if(J+=""+R+" = false;for (var "+A+"=0; "+A+"<"+N+".length; "+A+"++) if (equal("+V+", "+N+"["+A+"])) { "+R+" = true; break; }",U)J+="  }  ";J+=" if (!"+R+") {   ";var _=_||[];if(_.push(J),J="",Q.createErrors!==!1){if(J+=" { keyword: 'enum' , dataPath: (dataPath || '') + "+Q.errorPath+" , schemaPath: "+Q.util.toQuotedString(I)+" , params: { allowedValues: schema"+B+" } ",Q.opts.messages!==!1)J+=" , message: 'should be equal to one of the allowed values' ";if(Q.opts.verbose)J+=" , schema: validate.schema"+j+" , parentSchema: validate.schema"+Q.schemaPath+" , data: "+V+" ";J+=" } "}else J+=" {} ";var x=J;if(J=_.pop(),!Q.compositeRule&&C)if(Q.async)J+=" throw new ValidationError(["+x+"]); ";else J+=" validate.errors = ["+x+"]; return false; ";else J+=" var err = "+x+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ";if(J+=" }",C)J+=" else { ";return J}}),hQ=M0((W,X)=>{X.exports=function(Q,G,z){var J=" ",B=Q.level,M=Q.dataLevel,q=Q.schema[G],j=Q.schemaPath+Q.util.getProperty(G),I=Q.errSchemaPath+"/"+G,C=!Q.opts.allErrors,V="data"+(M||"");if(Q.opts.format===!1){if(C)J+=" if (true) { ";return J}var R=Q.opts.$data&&q&&q.$data,U;if(R)J+=" var schema"+B+" = "+Q.util.getData(q.$data,M,Q.dataPathArr)+"; ",U="schema"+B;else U=q;var L=Q.opts.unknownFormats,A=Array.isArray(L);if(R){var N="format"+B,_="isObject"+B,x="formatType"+B;if(J+=" var "+N+" = formats["+U+"]; var "+_+" = typeof "+N+" == 'object' && !("+N+" instanceof RegExp) && "+N+".validate; var "+x+" = "+_+" && "+N+".type || 'string'; if ("+_+") { ",Q.async)J+=" var async"+B+" = "+N+".async; ";if(J+=" "+N+" = "+N+".validate; } if (  ",R)J+=" ("+U+" !== undefined && typeof "+U+" != 'string') || ";if(J+=" (",L!="ignore"){if(J+=" ("+U+" && !"+N+" ",A)J+=" && self._opts.unknownFormats.indexOf("+U+") == -1 ";J+=") || "}if(J+=" ("+N+" && "+x+" == '"+z+"' && !(typeof "+N+" == 'function' ? ",Q.async)J+=" (async"+B+" ? await "+N+"("+V+") : "+N+"("+V+")) ";else J+=" "+N+"("+V+") ";J+=" : "+N+".test("+V+"))))) {"}else{var N=Q.formats[q];if(!N)if(L=="ignore"){if(Q.logger.warn('unknown format "'+q+'" ignored in schema at path "'+Q.errSchemaPath+'"'),C)J+=" if (true) { ";return J}else if(A&&L.indexOf(q)>=0){if(C)J+=" if (true) { ";return J}else throw Error('unknown format "'+q+'" is used in schema at path "'+Q.errSchemaPath+'"');var _=typeof N=="object"&&!(N instanceof RegExp)&&N.validate,x=_&&N.type||"string";if(_){var P=N.async===!0;N=N.validate}if(x!=z){if(C)J+=" if (true) { ";return J}if(P){if(!Q.async)throw Error("async format in sync schema");var O="formats"+Q.util.getProperty(q)+".validate";J+=" if (!(await "+O+"("+V+"))) { "}else{J+=" if (! ";var O="formats"+Q.util.getProperty(q);if(_)O+=".validate";if(typeof N=="function")J+=" "+O+"("+V+") ";else J+=" "+O+".test("+V+") ";J+=") { "}}var S=S||[];if(S.push(J),J="",Q.createErrors!==!1){if(J+=" { keyword: 'format' , dataPath: (dataPath || '') + "+Q.errorPath+" , schemaPath: "+Q.util.toQuotedString(I)+" , params: { format:  ",R)J+=""+U;else J+=""+Q.util.toQuotedString(q);if(J+="  } ",Q.opts.messages!==!1){if(J+=` , message: 'should match format "`,R)J+="' + "+U+" + '";else J+=""+Q.util.escapeQuotes(q);J+=`"' `}if(Q.opts.verbose){if(J+=" , schema:  ",R)J+="validate.schema"+j;else J+=""+Q.util.toQuotedString(q);J+="         , parentSchema: validate.schema"+Q.schemaPath+" , data: "+V+" "}J+=" } "}else J+=" {} ";var Z=J;if(J=S.pop(),!Q.compositeRule&&C)if(Q.async)J+=" throw new ValidationError(["+Z+"]); ";else J+=" validate.errors = ["+Z+"]; return false; ";else J+=" var err = "+Z+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ";if(J+=" } ",C)J+=" else { ";return J}}),$Q=M0((W,X)=>{X.exports=function(Q,G,z){var J=" ",B=Q.level,M=Q.dataLevel,q=Q.schema[G],j=Q.schemaPath+Q.util.getProperty(G),I=Q.errSchemaPath+"/"+G,C=!Q.opts.allErrors,V="data"+(M||""),R="valid"+B,U="errs__"+B,L=Q.util.copy(Q);L.level++;var A="valid"+L.level,N=Q.schema.then,_=Q.schema.else,x=N!==void 0&&(Q.opts.strictKeywords?typeof N=="object"&&Object.keys(N).length>0||N===!1:Q.util.schemaHasRules(N,Q.RULES.all)),P=_!==void 0&&(Q.opts.strictKeywords?typeof _=="object"&&Object.keys(_).length>0||_===!1:Q.util.schemaHasRules(_,Q.RULES.all)),O=L.baseId;if(x||P){var S;L.createErrors=!1,L.schema=q,L.schemaPath=j,L.errSchemaPath=I,J+=" var "+U+" = errors; var "+R+" = true;  ";var Z=Q.compositeRule;if(Q.compositeRule=L.compositeRule=!0,J+="  "+Q.validate(L)+" ",L.baseId=O,L.createErrors=!0,J+="  errors = "+U+"; if (vErrors !== null) { if ("+U+") vErrors.length = "+U+"; else vErrors = null; }  ",Q.compositeRule=L.compositeRule=Z,x){if(J+=" if ("+A+") {  ",L.schema=Q.schema.then,L.schemaPath=Q.schemaPath+".then",L.errSchemaPath=Q.errSchemaPath+"/then",J+="  "+Q.validate(L)+" ",L.baseId=O,J+=" "+R+" = "+A+"; ",x&&P)S="ifClause"+B,J+=" var "+S+" = 'then'; ";else S="'then'";if(J+=" } ",P)J+=" else { "}else J+=" if (!"+A+") { ";if(P){if(L.schema=Q.schema.else,L.schemaPath=Q.schemaPath+".else",L.errSchemaPath=Q.errSchemaPath+"/else",J+="  "+Q.validate(L)+" ",L.baseId=O,J+=" "+R+" = "+A+"; ",x&&P)S="ifClause"+B,J+=" var "+S+" = 'else'; ";else S="'else'";J+=" } "}if(J+=" if (!"+R+") {   var err =   ",Q.createErrors!==!1){if(J+=" { keyword: 'if' , dataPath: (dataPath || '') + "+Q.errorPath+" , schemaPath: "+Q.util.toQuotedString(I)+" , params: { failingKeyword: "+S+" } ",Q.opts.messages!==!1)J+=` , message: 'should match "' + `+S+` + '" schema' `;if(Q.opts.verbose)J+=" , schema: validate.schema"+j+" , parentSchema: validate.schema"+Q.schemaPath+" , data: "+V+" ";J+=" } "}else J+=" {} ";if(J+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",!Q.compositeRule&&C)if(Q.async)J+=" throw new ValidationError(vErrors); ";else J+=" validate.errors = vErrors; return false; ";if(J+=" }   ",C)J+=" else { "}else if(C)J+=" if (true) { ";return J}}),mQ=M0((W,X)=>{X.exports=function(Q,G,z){var J=" ",B=Q.level,M=Q.dataLevel,q=Q.schema[G],j=Q.schemaPath+Q.util.getProperty(G),I=Q.errSchemaPath+"/"+G,C=!Q.opts.allErrors,V="data"+(M||""),R="valid"+B,U="errs__"+B,L=Q.util.copy(Q),A="";L.level++;var N="valid"+L.level,_="i"+B,x=L.dataLevel=Q.dataLevel+1,P="data"+x,O=Q.baseId;if(J+="var "+U+" = errors;var "+R+";",Array.isArray(q)){var S=Q.schema.additionalItems;if(S===!1){J+=" "+R+" = "+V+".length <= "+q.length+"; ";var Z=I;I=Q.errSchemaPath+"/additionalItems",J+="  if (!"+R+") {   ";var g=g||[];if(g.push(J),J="",Q.createErrors!==!1){if(J+=" { keyword: 'additionalItems' , dataPath: (dataPath || '') + "+Q.errorPath+" , schemaPath: "+Q.util.toQuotedString(I)+" , params: { limit: "+q.length+" } ",Q.opts.messages!==!1)J+=" , message: 'should NOT have more than "+q.length+" items' ";if(Q.opts.verbose)J+=" , schema: false , parentSchema: validate.schema"+Q.schemaPath+" , data: "+V+" ";J+=" } "}else J+=" {} ";var y=J;if(J=g.pop(),!Q.compositeRule&&C)if(Q.async)J+=" throw new ValidationError(["+y+"]); ";else J+=" validate.errors = ["+y+"]; return false; ";else J+=" var err = "+y+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ";if(J+=" } ",I=Z,C)A+="}",J+=" else { "}var k=q;if(k){var E,D=-1,f=k.length-1;while(D<f)if(E=k[D+=1],Q.opts.strictKeywords?typeof E=="object"&&Object.keys(E).length>0||E===!1:Q.util.schemaHasRules(E,Q.RULES.all)){J+=" "+N+" = true; if ("+V+".length > "+D+") { ";var m=V+"["+D+"]";L.schema=E,L.schemaPath=j+"["+D+"]",L.errSchemaPath=I+"/"+D,L.errorPath=Q.util.getPathExpr(Q.errorPath,D,Q.opts.jsonPointers,!0),L.dataPathArr[x]=D;var n=Q.validate(L);if(L.baseId=O,Q.util.varOccurences(n,P)<2)J+=" "+Q.util.varReplace(n,P,m)+" ";else J+=" var "+P+" = "+m+"; "+n+" ";if(J+=" }  ",C)J+=" if ("+N+") { ",A+="}"}}if(typeof S=="object"&&(Q.opts.strictKeywords?typeof S=="object"&&Object.keys(S).length>0||S===!1:Q.util.schemaHasRules(S,Q.RULES.all))){L.schema=S,L.schemaPath=Q.schemaPath+".additionalItems",L.errSchemaPath=Q.errSchemaPath+"/additionalItems",J+=" "+N+" = true; if ("+V+".length > "+q.length+") {  for (var "+_+" = "+q.length+"; "+_+" < "+V+".length; "+_+"++) { ",L.errorPath=Q.util.getPathExpr(Q.errorPath,_,Q.opts.jsonPointers,!0);var m=V+"["+_+"]";L.dataPathArr[x]=_;var n=Q.validate(L);if(L.baseId=O,Q.util.varOccurences(n,P)<2)J+=" "+Q.util.varReplace(n,P,m)+" ";else J+=" var "+P+" = "+m+"; "+n+" ";if(C)J+=" if (!"+N+") break; ";if(J+=" } }  ",C)J+=" if ("+N+") { ",A+="}"}}else if(Q.opts.strictKeywords?typeof q=="object"&&Object.keys(q).length>0||q===!1:Q.util.schemaHasRules(q,Q.RULES.all)){L.schema=q,L.schemaPath=j,L.errSchemaPath=I,J+="  for (var "+_+" = 0; "+_+" < "+V+".length; "+_+"++) { ",L.errorPath=Q.util.getPathExpr(Q.errorPath,_,Q.opts.jsonPointers,!0);var m=V+"["+_+"]";L.dataPathArr[x]=_;var n=Q.validate(L);if(L.baseId=O,Q.util.varOccurences(n,P)<2)J+=" "+Q.util.varReplace(n,P,m)+" ";else J+=" var "+P+" = "+m+"; "+n+" ";if(C)J+=" if (!"+N+") break; ";J+=" }"}if(C)J+=" "+A+" if ("+U+" == errors) {";return J}}),Z9=M0((W,X)=>{X.exports=function(Q,G,z){var J=" ",B=Q.level,M=Q.dataLevel,q=Q.schema[G],j=Q.schemaPath+Q.util.getProperty(G),I=Q.errSchemaPath+"/"+G,C=!Q.opts.allErrors,O,V="data"+(M||""),R=Q.opts.$data&&q&&q.$data,U;if(R)J+=" var schema"+B+" = "+Q.util.getData(q.$data,M,Q.dataPathArr)+"; ",U="schema"+B;else U=q;var L=G=="maximum",A=L?"exclusiveMaximum":"exclusiveMinimum",N=Q.schema[A],_=Q.opts.$data&&N&&N.$data,x=L?"<":">",P=L?">":"<",O=void 0;if(!(R||typeof q=="number"||q===void 0))throw Error(G+" must be number");if(!(_||N===void 0||typeof N=="number"||typeof N=="boolean"))throw Error(A+" must be number or boolean");if(_){var S=Q.util.getData(N.$data,M,Q.dataPathArr),Z="exclusive"+B,g="exclType"+B,y="exclIsNumber"+B,k="op"+B,E="' + "+k+" + '";J+=" var schemaExcl"+B+" = "+S+"; ",S="schemaExcl"+B,J+=" var "+Z+"; var "+g+" = typeof "+S+"; if ("+g+" != 'boolean' && "+g+" != 'undefined' && "+g+" != 'number') { ";var O=A,D=D||[];if(D.push(J),J="",Q.createErrors!==!1){if(J+=" { keyword: '"+(O||"_exclusiveLimit")+"' , dataPath: (dataPath || '') + "+Q.errorPath+" , schemaPath: "+Q.util.toQuotedString(I)+" , params: {} ",Q.opts.messages!==!1)J+=" , message: '"+A+" should be boolean' ";if(Q.opts.verbose)J+=" , schema: validate.schema"+j+" , parentSchema: validate.schema"+Q.schemaPath+" , data: "+V+" ";J+=" } "}else J+=" {} ";var f=J;if(J=D.pop(),!Q.compositeRule&&C)if(Q.async)J+=" throw new ValidationError(["+f+"]); ";else J+=" validate.errors = ["+f+"]; return false; ";else J+=" var err = "+f+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ";if(J+=" } else if ( ",R)J+=" ("+U+" !== undefined && typeof "+U+" != 'number') || ";if(J+=" "+g+" == 'number' ? ( ("+Z+" = "+U+" === undefined || "+S+" "+x+"= "+U+") ? "+V+" "+P+"= "+S+" : "+V+" "+P+" "+U+" ) : ( ("+Z+" = "+S+" === true) ? "+V+" "+P+"= "+U+" : "+V+" "+P+" "+U+" ) || "+V+" !== "+V+") { var op"+B+" = "+Z+" ? '"+x+"' : '"+x+"='; ",q===void 0)O=A,I=Q.errSchemaPath+"/"+A,U=S,R=_}else{var y=typeof N=="number",E=x;if(y&&R){var k="'"+E+"'";if(J+=" if ( ",R)J+=" ("+U+" !== undefined && typeof "+U+" != 'number') || ";J+=" ( "+U+" === undefined || "+N+" "+x+"= "+U+" ? "+V+" "+P+"= "+N+" : "+V+" "+P+" "+U+" ) || "+V+" !== "+V+") { "}else{if(y&&q===void 0)Z=!0,O=A,I=Q.errSchemaPath+"/"+A,U=N,P+="=";else{if(y)U=Math[L?"min":"max"](N,q);if(N===(y?U:!0))Z=!0,O=A,I=Q.errSchemaPath+"/"+A,P+="=";else Z=!1,E+="="}var k="'"+E+"'";if(J+=" if ( ",R)J+=" ("+U+" !== undefined && typeof "+U+" != 'number') || ";J+=" "+V+" "+P+" "+U+" || "+V+" !== "+V+") { "}}O=O||G;var D=D||[];if(D.push(J),J="",Q.createErrors!==!1){if(J+=" { keyword: '"+(O||"_limit")+"' , dataPath: (dataPath || '') + "+Q.errorPath+" , schemaPath: "+Q.util.toQuotedString(I)+" , params: { comparison: "+k+", limit: "+U+", exclusive: "+Z+" } ",Q.opts.messages!==!1)if(J+=" , message: 'should be "+E+" ",R)J+="' + "+U;else J+=""+U+"'";if(Q.opts.verbose){if(J+=" , schema:  ",R)J+="validate.schema"+j;else J+=""+q;J+="         , parentSchema: validate.schema"+Q.schemaPath+" , data: "+V+" "}J+=" } "}else J+=" {} ";var f=J;if(J=D.pop(),!Q.compositeRule&&C)if(Q.async)J+=" throw new ValidationError(["+f+"]); ";else J+=" validate.errors = ["+f+"]; return false; ";else J+=" var err = "+f+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ";if(J+=" } ",C)J+=" else { ";return J}}),T9=M0((W,X)=>{X.exports=function(Q,G,z){var J=" ",B=Q.level,M=Q.dataLevel,q=Q.schema[G],j=Q.schemaPath+Q.util.getProperty(G),I=Q.errSchemaPath+"/"+G,C=!Q.opts.allErrors,A,V="data"+(M||""),R=Q.opts.$data&&q&&q.$data,U;if(R)J+=" var schema"+B+" = "+Q.util.getData(q.$data,M,Q.dataPathArr)+"; ",U="schema"+B;else U=q;if(!(R||typeof q=="number"))throw Error(G+" must be number");var L=G=="maxItems"?">":"<";if(J+="if ( ",R)J+=" ("+U+" !== undefined && typeof "+U+" != 'number') || ";J+=" "+V+".length "+L+" "+U+") { ";var A=G,N=N||[];if(N.push(J),J="",Q.createErrors!==!1){if(J+=" { keyword: '"+(A||"_limitItems")+"' , dataPath: (dataPath || '') + "+Q.errorPath+" , schemaPath: "+Q.util.toQuotedString(I)+" , params: { limit: "+U+" } ",Q.opts.messages!==!1){if(J+=" , message: 'should NOT have ",G=="maxItems")J+="more";else J+="fewer";if(J+=" than ",R)J+="' + "+U+" + '";else J+=""+q;J+=" items' "}if(Q.opts.verbose){if(J+=" , schema:  ",R)J+="validate.schema"+j;else J+=""+q;J+="         , parentSchema: validate.schema"+Q.schemaPath+" , data: "+V+" "}J+=" } "}else J+=" {} ";var _=J;if(J=N.pop(),!Q.compositeRule&&C)if(Q.async)J+=" throw new ValidationError(["+_+"]); ";else J+=" validate.errors = ["+_+"]; return false; ";else J+=" var err = "+_+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ";if(J+="} ",C)J+=" else { ";return J}}),k9=M0((W,X)=>{X.exports=function(Q,G,z){var J=" ",B=Q.level,M=Q.dataLevel,q=Q.schema[G],j=Q.schemaPath+Q.util.getProperty(G),I=Q.errSchemaPath+"/"+G,C=!Q.opts.allErrors,A,V="data"+(M||""),R=Q.opts.$data&&q&&q.$data,U;if(R)J+=" var schema"+B+" = "+Q.util.getData(q.$data,M,Q.dataPathArr)+"; ",U="schema"+B;else U=q;if(!(R||typeof q=="number"))throw Error(G+" must be number");var L=G=="maxLength"?">":"<";if(J+="if ( ",R)J+=" ("+U+" !== undefined && typeof "+U+" != 'number') || ";if(Q.opts.unicode===!1)J+=" "+V+".length ";else J+=" ucs2length("+V+") ";J+=" "+L+" "+U+") { ";var A=G,N=N||[];if(N.push(J),J="",Q.createErrors!==!1){if(J+=" { keyword: '"+(A||"_limitLength")+"' , dataPath: (dataPath || '') + "+Q.errorPath+" , schemaPath: "+Q.util.toQuotedString(I)+" , params: { limit: "+U+" } ",Q.opts.messages!==!1){if(J+=" , message: 'should NOT be ",G=="maxLength")J+="longer";else J+="shorter";if(J+=" than ",R)J+="' + "+U+" + '";else J+=""+q;J+=" characters' "}if(Q.opts.verbose){if(J+=" , schema:  ",R)J+="validate.schema"+j;else J+=""+q;J+="         , parentSchema: validate.schema"+Q.schemaPath+" , data: "+V+" "}J+=" } "}else J+=" {} ";var _=J;if(J=N.pop(),!Q.compositeRule&&C)if(Q.async)J+=" throw new ValidationError(["+_+"]); ";else J+=" validate.errors = ["+_+"]; return false; ";else J+=" var err = "+_+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ";if(J+="} ",C)J+=" else { ";return J}}),g9=M0((W,X)=>{X.exports=function(Q,G,z){var J=" ",B=Q.level,M=Q.dataLevel,q=Q.schema[G],j=Q.schemaPath+Q.util.getProperty(G),I=Q.errSchemaPath+"/"+G,C=!Q.opts.allErrors,A,V="data"+(M||""),R=Q.opts.$data&&q&&q.$data,U;if(R)J+=" var schema"+B+" = "+Q.util.getData(q.$data,M,Q.dataPathArr)+"; ",U="schema"+B;else U=q;if(!(R||typeof q=="number"))throw Error(G+" must be number");var L=G=="maxProperties"?">":"<";if(J+="if ( ",R)J+=" ("+U+" !== undefined && typeof "+U+" != 'number') || ";J+=" Object.keys("+V+").length "+L+" "+U+") { ";var A=G,N=N||[];if(N.push(J),J="",Q.createErrors!==!1){if(J+=" { keyword: '"+(A||"_limitProperties")+"' , dataPath: (dataPath || '') + "+Q.errorPath+" , schemaPath: "+Q.util.toQuotedString(I)+" , params: { limit: "+U+" } ",Q.opts.messages!==!1){if(J+=" , message: 'should NOT have ",G=="maxProperties")J+="more";else J+="fewer";if(J+=" than ",R)J+="' + "+U+" + '";else J+=""+q;J+=" properties' "}if(Q.opts.verbose){if(J+=" , schema:  ",R)J+="validate.schema"+j;else J+=""+q;J+="         , parentSchema: validate.schema"+Q.schemaPath+" , data: "+V+" "}J+=" } "}else J+=" {} ";var _=J;if(J=N.pop(),!Q.compositeRule&&C)if(Q.async)J+=" throw new ValidationError(["+_+"]); ";else J+=" validate.errors = ["+_+"]; return false; ";else J+=" var err = "+_+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ";if(J+="} ",C)J+=" else { ";return J}}),lQ=M0((W,X)=>{X.exports=function(Q,G,z){var J=" ",B=Q.level,M=Q.dataLevel,q=Q.schema[G],j=Q.schemaPath+Q.util.getProperty(G),I=Q.errSchemaPath+"/"+G,C=!Q.opts.allErrors,V="data"+(M||""),R=Q.opts.$data&&q&&q.$data,U;if(R)J+=" var schema"+B+" = "+Q.util.getData(q.$data,M,Q.dataPathArr)+"; ",U="schema"+B;else U=q;if(!(R||typeof q=="number"))throw Error(G+" must be number");if(J+="var division"+B+";if (",R)J+=" "+U+" !== undefined && ( typeof "+U+" != 'number' || ";if(J+=" (division"+B+" = "+V+" / "+U+", ",Q.opts.multipleOfPrecision)J+=" Math.abs(Math.round(division"+B+") - division"+B+") > 1e-"+Q.opts.multipleOfPrecision+" ";else J+=" division"+B+" !== parseInt(division"+B+") ";if(J+=" ) ",R)J+="  )  ";J+=" ) {   ";var L=L||[];if(L.push(J),J="",Q.createErrors!==!1){if(J+=" { keyword: 'multipleOf' , dataPath: (dataPath || '') + "+Q.errorPath+" , schemaPath: "+Q.util.toQuotedString(I)+" , params: { multipleOf: "+U+" } ",Q.opts.messages!==!1)if(J+=" , message: 'should be multiple of ",R)J+="' + "+U;else J+=""+U+"'";if(Q.opts.verbose){if(J+=" , schema:  ",R)J+="validate.schema"+j;else J+=""+q;J+="         , parentSchema: validate.schema"+Q.schemaPath+" , data: "+V+" "}J+=" } "}else J+=" {} ";var A=J;if(J=L.pop(),!Q.compositeRule&&C)if(Q.async)J+=" throw new ValidationError(["+A+"]); ";else J+=" validate.errors = ["+A+"]; return false; ";else J+=" var err = "+A+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ";if(J+="} ",C)J+=" else { ";return J}}),pQ=M0((W,X)=>{X.exports=function(Q,G,z){var J=" ",B=Q.level,M=Q.dataLevel,q=Q.schema[G],j=Q.schemaPath+Q.util.getProperty(G),I=Q.errSchemaPath+"/"+G,C=!Q.opts.allErrors,V="data"+(M||""),R="errs__"+B,U=Q.util.copy(Q);U.level++;var L="valid"+U.level;if(Q.opts.strictKeywords?typeof q=="object"&&Object.keys(q).length>0||q===!1:Q.util.schemaHasRules(q,Q.RULES.all)){U.schema=q,U.schemaPath=j,U.errSchemaPath=I,J+=" var "+R+" = errors;  ";var A=Q.compositeRule;Q.compositeRule=U.compositeRule=!0,U.createErrors=!1;var N;if(U.opts.allErrors)N=U.opts.allErrors,U.opts.allErrors=!1;if(J+=" "+Q.validate(U)+" ",U.createErrors=!0,N)U.opts.allErrors=N;Q.compositeRule=U.compositeRule=A,J+=" if ("+L+") {   ";var _=_||[];if(_.push(J),J="",Q.createErrors!==!1){if(J+=" { keyword: 'not' , dataPath: (dataPath || '') + "+Q.errorPath+" , schemaPath: "+Q.util.toQuotedString(I)+" , params: {} ",Q.opts.messages!==!1)J+=" , message: 'should NOT be valid' ";if(Q.opts.verbose)J+=" , schema: validate.schema"+j+" , parentSchema: validate.schema"+Q.schemaPath+" , data: "+V+" ";J+=" } "}else J+=" {} ";var x=J;if(J=_.pop(),!Q.compositeRule&&C)if(Q.async)J+=" throw new ValidationError(["+x+"]); ";else J+=" validate.errors = ["+x+"]; return false; ";else J+=" var err = "+x+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ";if(J+=" } else {  errors = "+R+"; if (vErrors !== null) { if ("+R+") vErrors.length = "+R+"; else vErrors = null; } ",Q.opts.allErrors)J+=" } "}else{if(J+="  var err =   ",Q.createErrors!==!1){if(J+=" { keyword: 'not' , dataPath: (dataPath || '') + "+Q.errorPath+" , schemaPath: "+Q.util.toQuotedString(I)+" , params: {} ",Q.opts.messages!==!1)J+=" , message: 'should NOT be valid' ";if(Q.opts.verbose)J+=" , schema: validate.schema"+j+" , parentSchema: validate.schema"+Q.schemaPath+" , data: "+V+" ";J+=" } "}else J+=" {} ";if(J+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",C)J+=" if (false) { "}return J}}),uQ=M0((W,X)=>{X.exports=function(Q,G,z){var J=" ",B=Q.level,M=Q.dataLevel,q=Q.schema[G],j=Q.schemaPath+Q.util.getProperty(G),I=Q.errSchemaPath+"/"+G,C=!Q.opts.allErrors,V="data"+(M||""),R="valid"+B,U="errs__"+B,L=Q.util.copy(Q),A="";L.level++;var N="valid"+L.level,_=L.baseId,x="prevValid"+B,P="passingSchemas"+B;J+="var "+U+" = errors , "+x+" = false , "+R+" = false , "+P+" = null; ";var O=Q.compositeRule;Q.compositeRule=L.compositeRule=!0;var S=q;if(S){var Z,g=-1,y=S.length-1;while(g<y){if(Z=S[g+=1],Q.opts.strictKeywords?typeof Z=="object"&&Object.keys(Z).length>0||Z===!1:Q.util.schemaHasRules(Z,Q.RULES.all))L.schema=Z,L.schemaPath=j+"["+g+"]",L.errSchemaPath=I+"/"+g,J+="  "+Q.validate(L)+" ",L.baseId=_;else J+=" var "+N+" = true; ";if(g)J+=" if ("+N+" && "+x+") { "+R+" = false; "+P+" = ["+P+", "+g+"]; } else { ",A+="}";J+=" if ("+N+") { "+R+" = "+x+" = true; "+P+" = "+g+"; }"}}if(Q.compositeRule=L.compositeRule=O,J+=""+A+"if (!"+R+") {   var err =   ",Q.createErrors!==!1){if(J+=" { keyword: 'oneOf' , dataPath: (dataPath || '') + "+Q.errorPath+" , schemaPath: "+Q.util.toQuotedString(I)+" , params: { passingSchemas: "+P+" } ",Q.opts.messages!==!1)J+=" , message: 'should match exactly one schema in oneOf' ";if(Q.opts.verbose)J+=" , schema: validate.schema"+j+" , parentSchema: validate.schema"+Q.schemaPath+" , data: "+V+" ";J+=" } "}else J+=" {} ";if(J+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",!Q.compositeRule&&C)if(Q.async)J+=" throw new ValidationError(vErrors); ";else J+=" validate.errors = vErrors; return false; ";if(J+="} else {  errors = "+U+"; if (vErrors !== null) { if ("+U+") vErrors.length = "+U+"; else vErrors = null; }",Q.opts.allErrors)J+=" } ";return J}}),nQ=M0((W,X)=>{X.exports=function(Q,G,z){var J=" ",B=Q.level,M=Q.dataLevel,q=Q.schema[G],j=Q.schemaPath+Q.util.getProperty(G),I=Q.errSchemaPath+"/"+G,C=!Q.opts.allErrors,V="data"+(M||""),R=Q.opts.$data&&q&&q.$data,U;if(R)J+=" var schema"+B+" = "+Q.util.getData(q.$data,M,Q.dataPathArr)+"; ",U="schema"+B;else U=q;var L=R?"(new RegExp("+U+"))":Q.usePattern(q);if(J+="if ( ",R)J+=" ("+U+" !== undefined && typeof "+U+" != 'string') || ";J+=" !"+L+".test("+V+") ) {   ";var A=A||[];if(A.push(J),J="",Q.createErrors!==!1){if(J+=" { keyword: 'pattern' , dataPath: (dataPath || '') + "+Q.errorPath+" , schemaPath: "+Q.util.toQuotedString(I)+" , params: { pattern:  ",R)J+=""+U;else J+=""+Q.util.toQuotedString(q);if(J+="  } ",Q.opts.messages!==!1){if(J+=` , message: 'should match pattern "`,R)J+="' + "+U+" + '";else J+=""+Q.util.escapeQuotes(q);J+=`"' `}if(Q.opts.verbose){if(J+=" , schema:  ",R)J+="validate.schema"+j;else J+=""+Q.util.toQuotedString(q);J+="         , parentSchema: validate.schema"+Q.schemaPath+" , data: "+V+" "}J+=" } "}else J+=" {} ";var N=J;if(J=A.pop(),!Q.compositeRule&&C)if(Q.async)J+=" throw new ValidationError(["+N+"]); ";else J+=" validate.errors = ["+N+"]; return false; ";else J+=" var err = "+N+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ";if(J+="} ",C)J+=" else { ";return J}}),cQ=M0((W,X)=>{X.exports=function(Q,G,z){var J=" ",B=Q.level,M=Q.dataLevel,q=Q.schema[G],j=Q.schemaPath+Q.util.getProperty(G),I=Q.errSchemaPath+"/"+G,C=!Q.opts.allErrors,V="data"+(M||""),R="errs__"+B,U=Q.util.copy(Q),L="";U.level++;var A="valid"+U.level,N="key"+B,_="idx"+B,x=U.dataLevel=Q.dataLevel+1,P="data"+x,O="dataProperties"+B,S=Object.keys(q||{}).filter(U0),Z=Q.schema.patternProperties||{},g=Object.keys(Z).filter(U0),y=Q.schema.additionalProperties,k=S.length||g.length,E=y===!1,D=typeof y=="object"&&Object.keys(y).length,f=Q.opts.removeAdditional,m=E||D||f,n=Q.opts.ownProperties,o=Q.baseId,F0=Q.schema.required;if(F0&&!(Q.opts.$data&&F0.$data)&&F0.length<Q.opts.loopRequired)var W0=Q.util.toHash(F0);function U0(L1){return L1!=="__proto__"}if(J+="var "+R+" = errors;var "+A+" = true;",n)J+=" var "+O+" = undefined;";if(m){if(n)J+=" "+O+" = "+O+" || Object.keys("+V+"); for (var "+_+"=0; "+_+"<"+O+".length; "+_+"++) { var "+N+" = "+O+"["+_+"]; ";else J+=" for (var "+N+" in "+V+") { ";if(k){if(J+=" var isAdditional"+B+" = !(false ",S.length)if(S.length>8)J+=" || validate.schema"+j+".hasOwnProperty("+N+") ";else{var J0=S;if(J0){var Y0,w0=-1,k0=J0.length-1;while(w0<k0)Y0=J0[w0+=1],J+=" || "+N+" == "+Q.util.toQuotedString(Y0)+" "}}if(g.length){var x0=g;if(x0){var C0,v0=-1,b=x0.length-1;while(v0<b)C0=x0[v0+=1],J+=" || "+Q.usePattern(C0)+".test("+N+") "}}J+=" ); if (isAdditional"+B+") { "}if(f=="all")J+=" delete "+V+"["+N+"]; ";else{var h=Q.errorPath,s="' + "+N+" + '";if(Q.opts._errorDataPathProperty)Q.errorPath=Q.util.getPathExpr(Q.errorPath,N,Q.opts.jsonPointers);if(E)if(f)J+=" delete "+V+"["+N+"]; ";else{J+=" "+A+" = false; ";var L0=I;I=Q.errSchemaPath+"/additionalProperties";var $=$||[];if($.push(J),J="",Q.createErrors!==!1){if(J+=" { keyword: 'additionalProperties' , dataPath: (dataPath || '') + "+Q.errorPath+" , schemaPath: "+Q.util.toQuotedString(I)+" , params: { additionalProperty: '"+s+"' } ",Q.opts.messages!==!1){if(J+=" , message: '",Q.opts._errorDataPathProperty)J+="is an invalid additional property";else J+="should NOT have additional properties";J+="' "}if(Q.opts.verbose)J+=" , schema: false , parentSchema: validate.schema"+Q.schemaPath+" , data: "+V+" ";J+=" } "}else J+=" {} ";var u=J;if(J=$.pop(),!Q.compositeRule&&C)if(Q.async)J+=" throw new ValidationError(["+u+"]); ";else J+=" validate.errors = ["+u+"]; return false; ";else J+=" var err = "+u+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ";if(I=L0,C)J+=" break; "}else if(D)if(f=="failing"){J+=" var "+R+" = errors;  ";var q0=Q.compositeRule;Q.compositeRule=U.compositeRule=!0,U.schema=y,U.schemaPath=Q.schemaPath+".additionalProperties",U.errSchemaPath=Q.errSchemaPath+"/additionalProperties",U.errorPath=Q.opts._errorDataPathProperty?Q.errorPath:Q.util.getPathExpr(Q.errorPath,N,Q.opts.jsonPointers);var R0=V+"["+N+"]";U.dataPathArr[x]=N;var H0=Q.validate(U);if(U.baseId=o,Q.util.varOccurences(H0,P)<2)J+=" "+Q.util.varReplace(H0,P,R0)+" ";else J+=" var "+P+" = "+R0+"; "+H0+" ";J+=" if (!"+A+") { errors = "+R+"; if (validate.errors !== null) { if (errors) validate.errors.length = errors; else validate.errors = null; } delete "+V+"["+N+"]; }  ",Q.compositeRule=U.compositeRule=q0}else{U.schema=y,U.schemaPath=Q.schemaPath+".additionalProperties",U.errSchemaPath=Q.errSchemaPath+"/additionalProperties",U.errorPath=Q.opts._errorDataPathProperty?Q.errorPath:Q.util.getPathExpr(Q.errorPath,N,Q.opts.jsonPointers);var R0=V+"["+N+"]";U.dataPathArr[x]=N;var H0=Q.validate(U);if(U.baseId=o,Q.util.varOccurences(H0,P)<2)J+=" "+Q.util.varReplace(H0,P,R0)+" ";else J+=" var "+P+" = "+R0+"; "+H0+" ";if(C)J+=" if (!"+A+") break; "}Q.errorPath=h}if(k)J+=" } ";if(J+=" }  ",C)J+=" if ("+A+") { ",L+="}"}var f0=Q.opts.useDefaults&&!Q.compositeRule;if(S.length){var y0=S;if(y0){var Y0,E0=-1,o0=y0.length-1;while(E0<o0){Y0=y0[E0+=1];var n0=q[Y0];if(Q.opts.strictKeywords?typeof n0=="object"&&Object.keys(n0).length>0||n0===!1:Q.util.schemaHasRules(n0,Q.RULES.all)){var e0=Q.util.getProperty(Y0),R0=V+e0,h0=f0&&n0.default!==void 0;U.schema=n0,U.schemaPath=j+e0,U.errSchemaPath=I+"/"+Q.util.escapeFragment(Y0),U.errorPath=Q.util.getPath(Q.errorPath,Y0,Q.opts.jsonPointers),U.dataPathArr[x]=Q.util.toQuotedString(Y0);var H0=Q.validate(U);if(U.baseId=o,Q.util.varOccurences(H0,P)<2){H0=Q.util.varReplace(H0,P,R0);var i0=R0}else{var i0=P;J+=" var "+P+" = "+R0+"; "}if(h0)J+=" "+H0+" ";else{if(W0&&W0[Y0]){if(J+=" if ( "+i0+" === undefined ",n)J+=" || ! Object.prototype.hasOwnProperty.call("+V+", '"+Q.util.escapeQuotes(Y0)+"') ";J+=") { "+A+" = false; ";var h=Q.errorPath,L0=I,B1=Q.util.escapeQuotes(Y0);if(Q.opts._errorDataPathProperty)Q.errorPath=Q.util.getPath(h,Y0,Q.opts.jsonPointers);I=Q.errSchemaPath+"/required";var $=$||[];if($.push(J),J="",Q.createErrors!==!1){if(J+=" { keyword: 'required' , dataPath: (dataPath || '') + "+Q.errorPath+" , schemaPath: "+Q.util.toQuotedString(I)+" , params: { missingProperty: '"+B1+"' } ",Q.opts.messages!==!1){if(J+=" , message: '",Q.opts._errorDataPathProperty)J+="is a required property";else J+="should have required property \\'"+B1+"\\'";J+="' "}if(Q.opts.verbose)J+=" , schema: validate.schema"+j+" , parentSchema: validate.schema"+Q.schemaPath+" , data: "+V+" ";J+=" } "}else J+=" {} ";var u=J;if(J=$.pop(),!Q.compositeRule&&C)if(Q.async)J+=" throw new ValidationError(["+u+"]); ";else J+=" validate.errors = ["+u+"]; return false; ";else J+=" var err = "+u+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ";I=L0,Q.errorPath=h,J+=" } else { "}else if(C){if(J+=" if ( "+i0+" === undefined ",n)J+=" || ! Object.prototype.hasOwnProperty.call("+V+", '"+Q.util.escapeQuotes(Y0)+"') ";J+=") { "+A+" = true; } else { "}else{if(J+=" if ("+i0+" !== undefined ",n)J+=" &&   Object.prototype.hasOwnProperty.call("+V+", '"+Q.util.escapeQuotes(Y0)+"') ";J+=" ) { "}J+=" "+H0+" } "}}if(C)J+=" if ("+A+") { ",L+="}"}}}if(g.length){var J1=g;if(J1){var C0,C8=-1,i8=J1.length-1;while(C8<i8){C0=J1[C8+=1];var n0=Z[C0];if(Q.opts.strictKeywords?typeof n0=="object"&&Object.keys(n0).length>0||n0===!1:Q.util.schemaHasRules(n0,Q.RULES.all)){if(U.schema=n0,U.schemaPath=Q.schemaPath+".patternProperties"+Q.util.getProperty(C0),U.errSchemaPath=Q.errSchemaPath+"/patternProperties/"+Q.util.escapeFragment(C0),n)J+=" "+O+" = "+O+" || Object.keys("+V+"); for (var "+_+"=0; "+_+"<"+O+".length; "+_+"++) { var "+N+" = "+O+"["+_+"]; ";else J+=" for (var "+N+" in "+V+") { ";J+=" if ("+Q.usePattern(C0)+".test("+N+")) { ",U.errorPath=Q.util.getPathExpr(Q.errorPath,N,Q.opts.jsonPointers);var R0=V+"["+N+"]";U.dataPathArr[x]=N;var H0=Q.validate(U);if(U.baseId=o,Q.util.varOccurences(H0,P)<2)J+=" "+Q.util.varReplace(H0,P,R0)+" ";else J+=" var "+P+" = "+R0+"; "+H0+" ";if(C)J+=" if (!"+A+") break; ";if(J+=" } ",C)J+=" else "+A+" = true; ";if(J+=" }  ",C)J+=" if ("+A+") { ",L+="}"}}}}if(C)J+=" "+L+" if ("+R+" == errors) {";return J}}),dQ=M0((W,X)=>{X.exports=function(Q,G,z){var J=" ",B=Q.level,M=Q.dataLevel,q=Q.schema[G],j=Q.schemaPath+Q.util.getProperty(G),I=Q.errSchemaPath+"/"+G,C=!Q.opts.allErrors,V="data"+(M||""),R="errs__"+B,U=Q.util.copy(Q),L="";U.level++;var A="valid"+U.level;if(J+="var "+R+" = errors;",Q.opts.strictKeywords?typeof q=="object"&&Object.keys(q).length>0||q===!1:Q.util.schemaHasRules(q,Q.RULES.all)){U.schema=q,U.schemaPath=j,U.errSchemaPath=I;var N="key"+B,_="idx"+B,x="i"+B,P="' + "+N+" + '",O=U.dataLevel=Q.dataLevel+1,S="data"+O,Z="dataProperties"+B,g=Q.opts.ownProperties,y=Q.baseId;if(g)J+=" var "+Z+" = undefined; ";if(g)J+=" "+Z+" = "+Z+" || Object.keys("+V+"); for (var "+_+"=0; "+_+"<"+Z+".length; "+_+"++) { var "+N+" = "+Z+"["+_+"]; ";else J+=" for (var "+N+" in "+V+") { ";J+=" var startErrs"+B+" = errors; ";var k=N,E=Q.compositeRule;Q.compositeRule=U.compositeRule=!0;var D=Q.validate(U);if(U.baseId=y,Q.util.varOccurences(D,S)<2)J+=" "+Q.util.varReplace(D,S,k)+" ";else J+=" var "+S+" = "+k+"; "+D+" ";if(Q.compositeRule=U.compositeRule=E,J+=" if (!"+A+") { for (var "+x+"=startErrs"+B+"; "+x+"<errors; "+x+"++) { vErrors["+x+"].propertyName = "+N+"; }   var err =   ",Q.createErrors!==!1){if(J+=" { keyword: 'propertyNames' , dataPath: (dataPath || '') + "+Q.errorPath+" , schemaPath: "+Q.util.toQuotedString(I)+" , params: { propertyName: '"+P+"' } ",Q.opts.messages!==!1)J+=" , message: 'property name \\'"+P+"\\' is invalid' ";if(Q.opts.verbose)J+=" , schema: validate.schema"+j+" , parentSchema: validate.schema"+Q.schemaPath+" , data: "+V+" ";J+=" } "}else J+=" {} ";if(J+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",!Q.compositeRule&&C)if(Q.async)J+=" throw new ValidationError(vErrors); ";else J+=" validate.errors = vErrors; return false; ";if(C)J+=" break; ";J+=" } }"}if(C)J+=" "+L+" if ("+R+" == errors) {";return J}}),iQ=M0((W,X)=>{X.exports=function(Q,G,z){var J=" ",B=Q.level,M=Q.dataLevel,q=Q.schema[G],j=Q.schemaPath+Q.util.getProperty(G),I=Q.errSchemaPath+"/"+G,C=!Q.opts.allErrors,V="data"+(M||""),R="valid"+B,U=Q.opts.$data&&q&&q.$data,L;if(U)J+=" var schema"+B+" = "+Q.util.getData(q.$data,M,Q.dataPathArr)+"; ",L="schema"+B;else L=q;var A="schema"+B;if(!U)if(q.length<Q.opts.loopRequired&&Q.schema.properties&&Object.keys(Q.schema.properties).length){var N=[],_=q;if(_){var x,P=-1,O=_.length-1;while(P<O){x=_[P+=1];var S=Q.schema.properties[x];if(!(S&&(Q.opts.strictKeywords?typeof S=="object"&&Object.keys(S).length>0||S===!1:Q.util.schemaHasRules(S,Q.RULES.all))))N[N.length]=x}}}else var N=q;if(U||N.length){var Z=Q.errorPath,g=U||N.length>=Q.opts.loopRequired,y=Q.opts.ownProperties;if(C)if(J+=" var missing"+B+"; ",g){if(!U)J+=" var "+A+" = validate.schema"+j+"; ";var k="i"+B,E="schema"+B+"["+k+"]",D="' + "+E+" + '";if(Q.opts._errorDataPathProperty)Q.errorPath=Q.util.getPathExpr(Z,E,Q.opts.jsonPointers);if(J+=" var "+R+" = true; ",U)J+=" if (schema"+B+" === undefined) "+R+" = true; else if (!Array.isArray(schema"+B+")) "+R+" = false; else {";if(J+=" for (var "+k+" = 0; "+k+" < "+A+".length; "+k+"++) { "+R+" = "+V+"["+A+"["+k+"]] !== undefined ",y)J+=" &&   Object.prototype.hasOwnProperty.call("+V+", "+A+"["+k+"]) ";if(J+="; if (!"+R+") break; } ",U)J+="  }  ";J+="  if (!"+R+") {   ";var f=f||[];if(f.push(J),J="",Q.createErrors!==!1){if(J+=" { keyword: 'required' , dataPath: (dataPath || '') + "+Q.errorPath+" , schemaPath: "+Q.util.toQuotedString(I)+" , params: { missingProperty: '"+D+"' } ",Q.opts.messages!==!1){if(J+=" , message: '",Q.opts._errorDataPathProperty)J+="is a required property";else J+="should have required property \\'"+D+"\\'";J+="' "}if(Q.opts.verbose)J+=" , schema: validate.schema"+j+" , parentSchema: validate.schema"+Q.schemaPath+" , data: "+V+" ";J+=" } "}else J+=" {} ";var m=J;if(J=f.pop(),!Q.compositeRule&&C)if(Q.async)J+=" throw new ValidationError(["+m+"]); ";else J+=" validate.errors = ["+m+"]; return false; ";else J+=" var err = "+m+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ";J+=" } else { "}else{J+=" if ( ";var n=N;if(n){var o,k=-1,F0=n.length-1;while(k<F0){if(o=n[k+=1],k)J+=" || ";var W0=Q.util.getProperty(o),U0=V+W0;if(J+=" ( ( "+U0+" === undefined ",y)J+=" || ! Object.prototype.hasOwnProperty.call("+V+", '"+Q.util.escapeQuotes(o)+"') ";J+=") && (missing"+B+" = "+Q.util.toQuotedString(Q.opts.jsonPointers?o:W0)+") ) "}}J+=") {  ";var E="missing"+B,D="' + "+E+" + '";if(Q.opts._errorDataPathProperty)Q.errorPath=Q.opts.jsonPointers?Q.util.getPathExpr(Z,E,!0):Z+" + "+E;var f=f||[];if(f.push(J),J="",Q.createErrors!==!1){if(J+=" { keyword: 'required' , dataPath: (dataPath || '') + "+Q.errorPath+" , schemaPath: "+Q.util.toQuotedString(I)+" , params: { missingProperty: '"+D+"' } ",Q.opts.messages!==!1){if(J+=" , message: '",Q.opts._errorDataPathProperty)J+="is a required property";else J+="should have required property \\'"+D+"\\'";J+="' "}if(Q.opts.verbose)J+=" , schema: validate.schema"+j+" , parentSchema: validate.schema"+Q.schemaPath+" , data: "+V+" ";J+=" } "}else J+=" {} ";var m=J;if(J=f.pop(),!Q.compositeRule&&C)if(Q.async)J+=" throw new ValidationError(["+m+"]); ";else J+=" validate.errors = ["+m+"]; return false; ";else J+=" var err = "+m+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ";J+=" } else { "}else if(g){if(!U)J+=" var "+A+" = validate.schema"+j+"; ";var k="i"+B,E="schema"+B+"["+k+"]",D="' + "+E+" + '";if(Q.opts._errorDataPathProperty)Q.errorPath=Q.util.getPathExpr(Z,E,Q.opts.jsonPointers);if(U){if(J+=" if ("+A+" && !Array.isArray("+A+")) {  var err =   ",Q.createErrors!==!1){if(J+=" { keyword: 'required' , dataPath: (dataPath || '') + "+Q.errorPath+" , schemaPath: "+Q.util.toQuotedString(I)+" , params: { missingProperty: '"+D+"' } ",Q.opts.messages!==!1){if(J+=" , message: '",Q.opts._errorDataPathProperty)J+="is a required property";else J+="should have required property \\'"+D+"\\'";J+="' "}if(Q.opts.verbose)J+=" , schema: validate.schema"+j+" , parentSchema: validate.schema"+Q.schemaPath+" , data: "+V+" ";J+=" } "}else J+=" {} ";J+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; } else if ("+A+" !== undefined) { "}if(J+=" for (var "+k+" = 0; "+k+" < "+A+".length; "+k+"++) { if ("+V+"["+A+"["+k+"]] === undefined ",y)J+=" || ! Object.prototype.hasOwnProperty.call("+V+", "+A+"["+k+"]) ";if(J+=") {  var err =   ",Q.createErrors!==!1){if(J+=" { keyword: 'required' , dataPath: (dataPath || '') + "+Q.errorPath+" , schemaPath: "+Q.util.toQuotedString(I)+" , params: { missingProperty: '"+D+"' } ",Q.opts.messages!==!1){if(J+=" , message: '",Q.opts._errorDataPathProperty)J+="is a required property";else J+="should have required property \\'"+D+"\\'";J+="' "}if(Q.opts.verbose)J+=" , schema: validate.schema"+j+" , parentSchema: validate.schema"+Q.schemaPath+" , data: "+V+" ";J+=" } "}else J+=" {} ";if(J+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; } } ",U)J+="  }  "}else{var J0=N;if(J0){var o,Y0=-1,w0=J0.length-1;while(Y0<w0){o=J0[Y0+=1];var W0=Q.util.getProperty(o),D=Q.util.escapeQuotes(o),U0=V+W0;if(Q.opts._errorDataPathProperty)Q.errorPath=Q.util.getPath(Z,o,Q.opts.jsonPointers);if(J+=" if ( "+U0+" === undefined ",y)J+=" || ! Object.prototype.hasOwnProperty.call("+V+", '"+Q.util.escapeQuotes(o)+"') ";if(J+=") {  var err =   ",Q.createErrors!==!1){if(J+=" { keyword: 'required' , dataPath: (dataPath || '') + "+Q.errorPath+" , schemaPath: "+Q.util.toQuotedString(I)+" , params: { missingProperty: '"+D+"' } ",Q.opts.messages!==!1){if(J+=" , message: '",Q.opts._errorDataPathProperty)J+="is a required property";else J+="should have required property \\'"+D+"\\'";J+="' "}if(Q.opts.verbose)J+=" , schema: validate.schema"+j+" , parentSchema: validate.schema"+Q.schemaPath+" , data: "+V+" ";J+=" } "}else J+=" {} ";J+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; } "}}}Q.errorPath=Z}else if(C)J+=" if (true) {";return J}}),oQ=M0((W,X)=>{X.exports=function(Q,G,z){var J=" ",B=Q.level,M=Q.dataLevel,q=Q.schema[G],j=Q.schemaPath+Q.util.getProperty(G),I=Q.errSchemaPath+"/"+G,C=!Q.opts.allErrors,V="data"+(M||""),R="valid"+B,U=Q.opts.$data&&q&&q.$data,L;if(U)J+=" var schema"+B+" = "+Q.util.getData(q.$data,M,Q.dataPathArr)+"; ",L="schema"+B;else L=q;if((q||U)&&Q.opts.uniqueItems!==!1){if(U)J+=" var "+R+"; if ("+L+" === false || "+L+" === undefined) "+R+" = true; else if (typeof "+L+" != 'boolean') "+R+" = false; else { ";J+=" var i = "+V+".length , "+R+" = true , j; if (i > 1) { ";var A=Q.schema.items&&Q.schema.items.type,N=Array.isArray(A);if(!A||A=="object"||A=="array"||N&&(A.indexOf("object")>=0||A.indexOf("array")>=0))J+=" outer: for (;i--;) { for (j = i; j--;) { if (equal("+V+"[i], "+V+"[j])) { "+R+" = false; break outer; } } } ";else{J+=" var itemIndices = {}, item; for (;i--;) { var item = "+V+"[i]; ";var _="checkDataType"+(N?"s":"");if(J+=" if ("+Q.util[_](A,"item",Q.opts.strictNumbers,!0)+") continue; ",N)J+=` if (typeof item == 'string') item = '"' + item; `;J+=" if (typeof itemIndices[item] == 'number') { "+R+" = false; j = itemIndices[item]; break; } itemIndices[item] = i; } "}if(J+=" } ",U)J+="  }  ";J+=" if (!"+R+") {   ";var x=x||[];if(x.push(J),J="",Q.createErrors!==!1){if(J+=" { keyword: 'uniqueItems' , dataPath: (dataPath || '') + "+Q.errorPath+" , schemaPath: "+Q.util.toQuotedString(I)+" , params: { i: i, j: j } ",Q.opts.messages!==!1)J+=" , message: 'should NOT have duplicate items (items ## ' + j + ' and ' + i + ' are identical)' ";if(Q.opts.verbose){if(J+=" , schema:  ",U)J+="validate.schema"+j;else J+=""+q;J+="         , parentSchema: validate.schema"+Q.schemaPath+" , data: "+V+" "}J+=" } "}else J+=" {} ";var P=J;if(J=x.pop(),!Q.compositeRule&&C)if(Q.async)J+=" throw new ValidationError(["+P+"]); ";else J+=" validate.errors = ["+P+"]; return false; ";else J+=" var err = "+P+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ";if(J+=" } ",C)J+=" else { "}else if(C)J+=" if (true) { ";return J}}),rQ=M0((W,X)=>{X.exports={$ref:vQ(),allOf:ZQ(),anyOf:TQ(),$comment:kQ(),const:gQ(),contains:xQ(),dependencies:fQ(),enum:yQ(),format:hQ(),if:$Q(),items:mQ(),maximum:Z9(),minimum:Z9(),maxItems:T9(),minItems:T9(),maxLength:k9(),minLength:k9(),maxProperties:g9(),minProperties:g9(),multipleOf:lQ(),not:pQ(),oneOf:uQ(),pattern:nQ(),properties:cQ(),propertyNames:dQ(),required:iQ(),uniqueItems:oQ(),validate:s9()}}),aQ=M0((W,X)=>{var Y=rQ(),Q=gW().toHash;X.exports=function(){var z=[{type:"number",rules:[{maximum:["exclusiveMaximum"]},{minimum:["exclusiveMinimum"]},"multipleOf","format"]},{type:"string",rules:["maxLength","minLength","pattern","format"]},{type:"array",rules:["maxItems","minItems","items","contains","uniqueItems"]},{type:"object",rules:["maxProperties","minProperties","required","dependencies","propertyNames",{properties:["additionalProperties","patternProperties"]}]},{rules:["$ref","const","enum","not","anyOf","oneOf","allOf","if"]}],J=["type","$comment"],B=["$schema","$id","id","$data","$async","title","description","default","definitions","examples","readOnly","writeOnly","contentMediaType","contentEncoding","additionalItems","then","else"],M=["number","integer","string","array","object","boolean","null"];return z.all=Q(J),z.types=Q(M),z.forEach(function(q){if(q.rules=q.rules.map(function(j){var I;if(typeof j=="object"){var C=Object.keys(j)[0];I=j[C],j=C,I.forEach(function(R){J.push(R),z.all[R]=!0})}J.push(j);var V=z.all[j]={keyword:j,code:Y[j],implements:I};return V}),z.all.$comment={keyword:"$comment",code:Y.$comment},q.type)z.types[q.type]=q}),z.keywords=Q(J.concat(B)),z.custom={},z}}),sQ=M0((W,X)=>{var Y=["multipleOf","maximum","exclusiveMaximum","minimum","exclusiveMinimum","maxLength","minLength","pattern","additionalItems","maxItems","minItems","uniqueItems","maxProperties","minProperties","required","additionalProperties","enum","format","const"];X.exports=function(Q,G){for(var z=0;z<G.length;z++){Q=JSON.parse(JSON.stringify(Q));var J=G[z].split("/"),B=Q,M;for(M=1;M<J.length;M++)B=B[J[M]];for(M=0;M<Y.length;M++){var q=Y[M],j=B[q];if(j)B[q]={anyOf:[j,{$ref:"https://raw.githubusercontent.com/ajv-validator/ajv/master/lib/refs/data.json#"}]}}}return Q}}),tQ=M0((W,X)=>{var Y=q9().MissingRef;X.exports=Q;function Q(G,z,J){var B=this;if(typeof this._opts.loadSchema!="function")throw Error("options.loadSchema should be a function");if(typeof z=="function")J=z,z=void 0;var M=q(G).then(function(){var I=B._addSchema(G,void 0,z);return I.validate||j(I)});if(J)M.then(function(I){J(null,I)},J);return M;function q(I){var C=I.$schema;return C&&!B.getSchema(C)?Q.call(B,{$ref:C},!0):Promise.resolve()}function j(I){try{return B._compile(I)}catch(V){if(V instanceof Y)return C(V);throw V}function C(V){var R=V.missingSchema;if(A(R))throw Error("Schema "+R+" is loaded but "+V.missingRef+" cannot be resolved");var U=B._loadingSchemas[R];if(!U)U=B._loadingSchemas[R]=B._opts.loadSchema(R),U.then(L,L);return U.then(function(N){if(!A(R))return q(N).then(function(){if(!A(R))B.addSchema(N,R,void 0,z)})}).then(function(){return j(I)});function L(){delete B._loadingSchemas[R]}function A(N){return B._refs[N]||B._schemas[N]}}}}}),eQ=M0((W,X)=>{X.exports=function(Q,G,z){var J=" ",B=Q.level,M=Q.dataLevel,q=Q.schema[G],j=Q.schemaPath+Q.util.getProperty(G),I=Q.errSchemaPath+"/"+G,C=!Q.opts.allErrors,V,R="data"+(M||""),U="valid"+B,L="errs__"+B,A=Q.opts.$data&&q&&q.$data,N;if(A)J+=" var schema"+B+" = "+Q.util.getData(q.$data,M,Q.dataPathArr)+"; ",N="schema"+B;else N=q;var _=this,x="definition"+B,P=_.definition,O="",S,Z,g,y,k;if(A&&P.$data){k="keywordValidate"+B;var E=P.validateSchema;J+=" var "+x+" = RULES.custom['"+G+"'].definition; var "+k+" = "+x+".validate;"}else{if(y=Q.useCustomRule(_,q,Q.schema,Q),!y)return;N="validate.schema"+j,k=y.code,S=P.compile,Z=P.inline,g=P.macro}var D=k+".errors",f="i"+B,m="ruleErr"+B,n=P.async;if(n&&!Q.async)throw Error("async keyword in sync schema");if(!(Z||g))J+=""+D+" = null;";if(J+="var "+L+" = errors;var "+U+";",A&&P.$data){if(O+="}",J+=" if ("+N+" === undefined) { "+U+" = true; } else { ",E)O+="}",J+=" "+U+" = "+x+".validateSchema("+N+"); if ("+U+") { "}if(Z)if(P.statements)J+=" "+y.validate+" ";else J+=" "+U+" = "+y.validate+"; ";else if(g){var o=Q.util.copy(Q),O="";o.level++;var F0="valid"+o.level;o.schema=y.validate,o.schemaPath="";var W0=Q.compositeRule;Q.compositeRule=o.compositeRule=!0;var U0=Q.validate(o).replace(/validate\.schema/g,k);Q.compositeRule=o.compositeRule=W0,J+=" "+U0}else{var J0=J0||[];if(J0.push(J),J="",J+="  "+k+".call( ",Q.opts.passContext)J+="this";else J+="self";if(S||P.schema===!1)J+=" , "+R+" ";else J+=" , "+N+" , "+R+" , validate.schema"+Q.schemaPath+" ";if(J+=" , (dataPath || '')",Q.errorPath!='""')J+=" + "+Q.errorPath;var Y0=M?"data"+(M-1||""):"parentData",w0=M?Q.dataPathArr[M]:"parentDataProperty";J+=" , "+Y0+" , "+w0+" , rootData )  ";var k0=J;if(J=J0.pop(),P.errors===!1){if(J+=" "+U+" = ",n)J+="await ";J+=""+k0+"; "}else if(n)D="customErrors"+B,J+=" var "+D+" = null; try { "+U+" = await "+k0+"; } catch (e) { "+U+" = false; if (e instanceof ValidationError) "+D+" = e.errors; else throw e; } ";else J+=" "+D+" = null; "+U+" = "+k0+"; "}if(P.modifying)J+=" if ("+Y0+") "+R+" = "+Y0+"["+w0+"];";if(J+=""+O,P.valid){if(C)J+=" if (true) { "}else{if(J+=" if ( ",P.valid===void 0)if(J+=" !",g)J+=""+F0;else J+=""+U;else J+=" "+!P.valid+" ";J+=") { ",V=_.keyword;var J0=J0||[];J0.push(J),J="";var J0=J0||[];if(J0.push(J),J="",Q.createErrors!==!1){if(J+=" { keyword: '"+(V||"custom")+"' , dataPath: (dataPath || '') + "+Q.errorPath+" , schemaPath: "+Q.util.toQuotedString(I)+" , params: { keyword: '"+_.keyword+"' } ",Q.opts.messages!==!1)J+=` , message: 'should pass "`+_.keyword+`" keyword validation' `;if(Q.opts.verbose)J+=" , schema: validate.schema"+j+" , parentSchema: validate.schema"+Q.schemaPath+" , data: "+R+" ";J+=" } "}else J+=" {} ";var x0=J;if(J=J0.pop(),!Q.compositeRule&&C)if(Q.async)J+=" throw new ValidationError(["+x0+"]); ";else J+=" validate.errors = ["+x0+"]; return false; ";else J+=" var err = "+x0+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ";var C0=J;if(J=J0.pop(),Z)if(P.errors){if(P.errors!="full"){if(J+="  for (var "+f+"="+L+"; "+f+"<errors; "+f+"++) { var "+m+" = vErrors["+f+"]; if ("+m+".dataPath === undefined) "+m+".dataPath = (dataPath || '') + "+Q.errorPath+"; if ("+m+".schemaPath === undefined) { "+m+'.schemaPath = "'+I+'"; } ',Q.opts.verbose)J+=" "+m+".schema = "+N+"; "+m+".data = "+R+"; ";J+=" } "}}else if(P.errors===!1)J+=" "+C0+" ";else{if(J+=" if ("+L+" == errors) { "+C0+" } else {  for (var "+f+"="+L+"; "+f+"<errors; "+f+"++) { var "+m+" = vErrors["+f+"]; if ("+m+".dataPath === undefined) "+m+".dataPath = (dataPath || '') + "+Q.errorPath+"; if ("+m+".schemaPath === undefined) { "+m+'.schemaPath = "'+I+'"; } ',Q.opts.verbose)J+=" "+m+".schema = "+N+"; "+m+".data = "+R+"; ";J+=" } } "}else if(g){if(J+="   var err =   ",Q.createErrors!==!1){if(J+=" { keyword: '"+(V||"custom")+"' , dataPath: (dataPath || '') + "+Q.errorPath+" , schemaPath: "+Q.util.toQuotedString(I)+" , params: { keyword: '"+_.keyword+"' } ",Q.opts.messages!==!1)J+=` , message: 'should pass "`+_.keyword+`" keyword validation' `;if(Q.opts.verbose)J+=" , schema: validate.schema"+j+" , parentSchema: validate.schema"+Q.schemaPath+" , data: "+R+" ";J+=" } "}else J+=" {} ";if(J+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",!Q.compositeRule&&C)if(Q.async)J+=" throw new ValidationError(vErrors); ";else J+=" validate.errors = vErrors; return false; "}else if(P.errors===!1)J+=" "+C0+" ";else{if(J+=" if (Array.isArray("+D+")) { if (vErrors === null) vErrors = "+D+"; else vErrors = vErrors.concat("+D+"); errors = vErrors.length;  for (var "+f+"="+L+"; "+f+"<errors; "+f+"++) { var "+m+" = vErrors["+f+"]; if ("+m+".dataPath === undefined) "+m+".dataPath = (dataPath || '') + "+Q.errorPath+";  "+m+'.schemaPath = "'+I+'";  ',Q.opts.verbose)J+=" "+m+".schema = "+N+"; "+m+".data = "+R+"; ";J+=" } } else { "+C0+" } "}if(J+=" } ",C)J+=" else { "}return J}}),t9=M0((W,X)=>{X.exports={$schema:"http://json-schema.org/draft-07/schema#",$id:"http://json-schema.org/draft-07/schema#",title:"Core schema meta-schema",definitions:{schemaArray:{type:"array",minItems:1,items:{$ref:"#"}},nonNegativeInteger:{type:"integer",minimum:0},nonNegativeIntegerDefault0:{allOf:[{$ref:"#/definitions/nonNegativeInteger"},{default:0}]},simpleTypes:{enum:["array","boolean","integer","null","number","object","string"]},stringArray:{type:"array",items:{type:"string"},uniqueItems:!0,default:[]}},type:["object","boolean"],properties:{$id:{type:"string",format:"uri-reference"},$schema:{type:"string",format:"uri"},$ref:{type:"string",format:"uri-reference"},$comment:{type:"string"},title:{type:"string"},description:{type:"string"},default:!0,readOnly:{type:"boolean",default:!1},examples:{type:"array",items:!0},multipleOf:{type:"number",exclusiveMinimum:0},maximum:{type:"number"},exclusiveMaximum:{type:"number"},minimum:{type:"number"},exclusiveMinimum:{type:"number"},maxLength:{$ref:"#/definitions/nonNegativeInteger"},minLength:{$ref:"#/definitions/nonNegativeIntegerDefault0"},pattern:{type:"string",format:"regex"},additionalItems:{$ref:"#"},items:{anyOf:[{$ref:"#"},{$ref:"#/definitions/schemaArray"}],default:!0},maxItems:{$ref:"#/definitions/nonNegativeInteger"},minItems:{$ref:"#/definitions/nonNegativeIntegerDefault0"},uniqueItems:{type:"boolean",default:!1},contains:{$ref:"#"},maxProperties:{$ref:"#/definitions/nonNegativeInteger"},minProperties:{$ref:"#/definitions/nonNegativeIntegerDefault0"},required:{$ref:"#/definitions/stringArray"},additionalProperties:{$ref:"#"},definitions:{type:"object",additionalProperties:{$ref:"#"},default:{}},properties:{type:"object",additionalProperties:{$ref:"#"},default:{}},patternProperties:{type:"object",additionalProperties:{$ref:"#"},propertyNames:{format:"regex"},default:{}},dependencies:{type:"object",additionalProperties:{anyOf:[{$ref:"#"},{$ref:"#/definitions/stringArray"}]}},propertyNames:{$ref:"#"},const:!0,enum:{type:"array",items:!0,minItems:1,uniqueItems:!0},type:{anyOf:[{$ref:"#/definitions/simpleTypes"},{type:"array",items:{$ref:"#/definitions/simpleTypes"},minItems:1,uniqueItems:!0}]},format:{type:"string"},contentMediaType:{type:"string"},contentEncoding:{type:"string"},if:{$ref:"#"},then:{$ref:"#"},else:{$ref:"#"},allOf:{$ref:"#/definitions/schemaArray"},anyOf:{$ref:"#/definitions/schemaArray"},oneOf:{$ref:"#/definitions/schemaArray"},not:{$ref:"#"}},default:!0}}),WX=M0((W,X)=>{var Y=t9();X.exports={$id:"https://github.com/ajv-validator/ajv/blob/master/lib/definition_schema.js",definitions:{simpleTypes:Y.definitions.simpleTypes},type:"object",dependencies:{schema:["validate"],$data:["validate"],statements:["inline"],valid:{not:{required:["macro"]}}},properties:{type:Y.properties.type,schema:{type:"boolean"},statements:{type:"boolean"},dependencies:{type:"array",items:{type:"string"}},metaSchema:{type:"object"},modifying:{type:"boolean"},valid:{type:"boolean"},$data:{type:"boolean"},async:{type:"boolean"},errors:{anyOf:[{type:"boolean"},{const:"full"}]}}}}),QX=M0((W,X)=>{var Y=/^[a-z_$][a-z0-9_$-]*$/i,Q=eQ(),G=WX();X.exports={add:z,get:J,remove:B,validate:M};function z(q,j){var I=this.RULES;if(I.keywords[q])throw Error("Keyword "+q+" is already defined");if(!Y.test(q))throw Error("Keyword "+q+" is not a valid identifier");if(j){this.validateKeyword(j,!0);var C=j.type;if(Array.isArray(C))for(var V=0;V<C.length;V++)U(q,C[V],j);else U(q,C,j);var R=j.metaSchema;if(R){if(j.$data&&this._opts.$data)R={anyOf:[R,{$ref:"https://raw.githubusercontent.com/ajv-validator/ajv/master/lib/refs/data.json#"}]};j.validateSchema=this.compile(R,!0)}}I.keywords[q]=I.all[q]=!0;function U(L,A,N){var _;for(var x=0;x<I.length;x++){var P=I[x];if(P.type==A){_=P;break}}if(!_)_={type:A,rules:[]},I.push(_);var O={keyword:L,definition:N,custom:!0,code:Q,implements:N.implements};_.rules.push(O),I.custom[L]=O}return this}function J(q){var j=this.RULES.custom[q];return j?j.definition:this.RULES.keywords[q]||!1}function B(q){var j=this.RULES;delete j.keywords[q],delete j.all[q],delete j.custom[q];for(var I=0;I<j.length;I++){var C=j[I].rules;for(var V=0;V<C.length;V++)if(C[V].keyword==q){C.splice(V,1);break}}return this}function M(q,j){M.errors=null;var I=this._validateKeyword=this._validateKeyword||this.compile(G,!0);if(I(q))return!0;if(M.errors=I.errors,j)throw Error("custom keyword definition is invalid: "+this.errorsText(I.errors));else return!1}}),XX=M0((W,X)=>{X.exports={$schema:"http://json-schema.org/draft-07/schema#",$id:"https://raw.githubusercontent.com/ajv-validator/ajv/master/lib/refs/data.json#",description:"Meta-schema for $data reference (JSON Schema extension proposal)",type:"object",required:["$data"],properties:{$data:{type:"string",anyOf:[{format:"relative-json-pointer"},{format:"json-pointer"}]}},additionalProperties:!1}}),JX=M0((W,X)=>{var Y=bQ(),Q=H9(),G=SQ(),z=r9(),J=a9(),B=PQ(),M=aQ(),q=sQ(),j=gW();X.exports=L,L.prototype.validate=A,L.prototype.compile=N,L.prototype.addSchema=_,L.prototype.addMetaSchema=x,L.prototype.validateSchema=P,L.prototype.getSchema=S,L.prototype.removeSchema=y,L.prototype.addFormat=W0,L.prototype.errorsText=F0,L.prototype._addSchema=E,L.prototype._compile=D,L.prototype.compileAsync=tQ();var I=QX();L.prototype.addKeyword=I.add,L.prototype.getKeyword=I.get,L.prototype.removeKeyword=I.remove,L.prototype.validateKeyword=I.validate;var C=q9();L.ValidationError=C.Validation,L.MissingRefError=C.MissingRef,L.$dataMetaSchema=q;var V="http://json-schema.org/draft-07/schema",R=["removeAdditional","useDefaults","coerceTypes","strictDefaults"],U=["/properties"];function L(b){if(!(this instanceof L))return new L(b);if(b=this._opts=j.copy(b)||{},C0(this),this._schemas={},this._refs={},this._fragments={},this._formats=B(b.format),this._cache=b.cache||new G,this._loadingSchemas={},this._compilations=[],this.RULES=M(),this._getId=f(b),b.loopRequired=b.loopRequired||1/0,b.errorDataPath=="property")b._errorDataPathProperty=!0;if(b.serialize===void 0)b.serialize=J;if(this._metaOpts=x0(this),b.formats)Y0(this);if(b.keywords)w0(this);if(U0(this),typeof b.meta=="object")this.addMetaSchema(b.meta);if(b.nullable)this.addKeyword("nullable",{metaSchema:{type:"boolean"}});J0(this)}function A(b,h){var s;if(typeof b=="string"){if(s=this.getSchema(b),!s)throw Error('no schema with key or ref "'+b+'"')}else{var L0=this._addSchema(b);s=L0.validate||this._compile(L0)}var $=s(h);if(s.$async!==!0)this.errors=s.errors;return $}function N(b,h){var s=this._addSchema(b,void 0,h);return s.validate||this._compile(s)}function _(b,h,s,L0){if(Array.isArray(b)){for(var $=0;$<b.length;$++)this.addSchema(b[$],void 0,s,L0);return this}var u=this._getId(b);if(u!==void 0&&typeof u!="string")throw Error("schema id must be string");return h=Q.normalizeId(h||u),k0(this,h),this._schemas[h]=this._addSchema(b,s,L0,!0),this}function x(b,h,s){return this.addSchema(b,h,s,!0),this}function P(b,h){var s=b.$schema;if(s!==void 0&&typeof s!="string")throw Error("$schema must be a string");if(s=s||this._opts.defaultMeta||O(this),!s)return this.logger.warn("meta-schema not available"),this.errors=null,!0;var L0=this.validate(s,b);if(!L0&&h){var $="schema is invalid: "+this.errorsText();if(this._opts.validateSchema=="log")this.logger.error($);else throw Error($)}return L0}function O(b){var h=b._opts.meta;return b._opts.defaultMeta=typeof h=="object"?b._getId(h)||h:b.getSchema(V)?V:void 0,b._opts.defaultMeta}function S(b){var h=g(this,b);switch(typeof h){case"object":return h.validate||this._compile(h);case"string":return this.getSchema(h);case"undefined":return Z(this,b)}}function Z(b,h){var s=Q.schema.call(b,{schema:{}},h);if(s){var{schema:L0,root:$,baseId:u}=s,q0=Y.call(b,L0,$,void 0,u);return b._fragments[h]=new z({ref:h,fragment:!0,schema:L0,root:$,baseId:u,validate:q0}),q0}}function g(b,h){return h=Q.normalizeId(h),b._schemas[h]||b._refs[h]||b._fragments[h]}function y(b){if(b instanceof RegExp)return k(this,this._schemas,b),k(this,this._refs,b),this;switch(typeof b){case"undefined":return k(this,this._schemas),k(this,this._refs),this._cache.clear(),this;case"string":var h=g(this,b);if(h)this._cache.del(h.cacheKey);return delete this._schemas[b],delete this._refs[b],this;case"object":var s=this._opts.serialize,L0=s?s(b):b;this._cache.del(L0);var $=this._getId(b);if($)$=Q.normalizeId($),delete this._schemas[$],delete this._refs[$]}return this}function k(b,h,s){for(var L0 in h){var $=h[L0];if(!$.meta&&(!s||s.test(L0)))b._cache.del($.cacheKey),delete h[L0]}}function E(b,h,s,L0){if(typeof b!="object"&&typeof b!="boolean")throw Error("schema should be object or boolean");var $=this._opts.serialize,u=$?$(b):b,q0=this._cache.get(u);if(q0)return q0;L0=L0||this._opts.addUsedSchema!==!1;var R0=Q.normalizeId(this._getId(b));if(R0&&L0)k0(this,R0);var H0=this._opts.validateSchema!==!1&&!h,f0;if(H0&&!(f0=R0&&R0==Q.normalizeId(b.$schema)))this.validateSchema(b,!0);var y0=Q.ids.call(this,b),E0=new z({id:R0,schema:b,localRefs:y0,cacheKey:u,meta:s});if(R0[0]!="#"&&L0)this._refs[R0]=E0;if(this._cache.put(u,E0),H0&&f0)this.validateSchema(b,!0);return E0}function D(b,h){if(b.compiling){if(b.validate=$,$.schema=b.schema,$.errors=null,$.root=h?h:$,b.schema.$async===!0)$.$async=!0;return $}b.compiling=!0;var s;if(b.meta)s=this._opts,this._opts=this._metaOpts;var L0;try{L0=Y.call(this,b.schema,h,b.localRefs)}catch(u){throw delete b.validate,u}finally{if(b.compiling=!1,b.meta)this._opts=s}return b.validate=L0,b.refs=L0.refs,b.refVal=L0.refVal,b.root=L0.root,L0;function $(){var u=b.validate,q0=u.apply(this,arguments);return $.errors=u.errors,q0}}function f(b){switch(b.schemaId){case"auto":return o;case"id":return m;default:return n}}function m(b){if(b.$id)this.logger.warn("schema $id ignored",b.$id);return b.id}function n(b){if(b.id)this.logger.warn("schema id ignored",b.id);return b.$id}function o(b){if(b.$id&&b.id&&b.$id!=b.id)throw Error("schema $id is different from id");return b.$id||b.id}function F0(b,h){if(b=b||this.errors,!b)return"No errors";h=h||{};var s=h.separator===void 0?", ":h.separator,L0=h.dataVar===void 0?"data":h.dataVar,$="";for(var u=0;u<b.length;u++){var q0=b[u];if(q0)$+=L0+q0.dataPath+" "+q0.message+s}return $.slice(0,-s.length)}function W0(b,h){if(typeof h=="string")h=new RegExp(h);return this._formats[b]=h,this}function U0(b){var h;if(b._opts.$data)h=XX(),b.addMetaSchema(h,h.$id,!0);if(b._opts.meta===!1)return;var s=t9();if(b._opts.$data)s=q(s,U);b.addMetaSchema(s,V,!0),b._refs["http://json-schema.org/schema"]=V}function J0(b){var h=b._opts.schemas;if(!h)return;if(Array.isArray(h))b.addSchema(h);else for(var s in h)b.addSchema(h[s],s)}function Y0(b){for(var h in b._opts.formats){var s=b._opts.formats[h];b.addFormat(h,s)}}function w0(b){for(var h in b._opts.keywords){var s=b._opts.keywords[h];b.addKeyword(h,s)}}function k0(b,h){if(b._schemas[h]||b._refs[h])throw Error('schema with key or id "'+h+'" already exists')}function x0(b){var h=j.copy(b._opts);for(var s=0;s<R.length;s++)delete h[R[s]];return h}function C0(b){var h=b._opts.logger;if(h===!1)b.logger={log:v0,warn:v0,error:v0};else{if(h===void 0)h=console;if(!(typeof h=="object"&&h.log&&h.warn&&h.error))throw Error("logger must implement log, warn and error methods");b.logger=h}}function v0(){}}),zX=50;function e9(W=zX){let X=new AbortController;return GX(W,X.signal),X}var MX={cwd(){return process.cwd()},existsSync(W){return Q0.existsSync(W)},async stat(W){return qX(W)},statSync(W){return Q0.statSync(W)},readFileSync(W,X){return Q0.readFileSync(W,{encoding:X.encoding})},readFileBytesSync(W){return Q0.readFileSync(W)},readSync(W,X){let Y=void 0;try{Y=Q0.openSync(W,"r");let Q=Buffer.alloc(X.length),G=Q0.readSync(Y,Q,0,X.length,0);return{buffer:Q,bytesRead:G}}finally{if(Y)Q0.closeSync(Y)}},writeFileSync(W,X,Y){let Q=Q0.existsSync(W);if(!Y.flush){let z={encoding:Y.encoding};if(!Q)z.mode=Y.mode??384;else if(Y.mode!==void 0)z.mode=Y.mode;Q0.writeFileSync(W,X,z);return}let G;try{let z=!Q?Y.mode??384:Y.mode;G=Q0.openSync(W,"w",z),Q0.writeFileSync(G,X,{encoding:Y.encoding}),Q0.fsyncSync(G)}finally{if(G)Q0.closeSync(G)}},appendFileSync(W,X,Y){if(!Q0.existsSync(W)){let Q=Y?.mode??384,G=Q0.openSync(W,"a",Q);try{Q0.appendFileSync(G,X)}finally{Q0.closeSync(G)}}else Q0.appendFileSync(W,X)},copyFileSync(W,X){Q0.copyFileSync(W,X)},unlinkSync(W){Q0.unlinkSync(W)},renameSync(W,X){Q0.renameSync(W,X)},linkSync(W,X){Q0.linkSync(W,X)},symlinkSync(W,X){Q0.symlinkSync(W,X)},readlinkSync(W){return Q0.readlinkSync(W)},realpathSync(W){return Q0.realpathSync(W)},mkdirSync(W){if(!Q0.existsSync(W))Q0.mkdirSync(W,{recursive:!0,mode:448})},readdirSync(W){return Q0.readdirSync(W,{withFileTypes:!0})},readdirStringSync(W){return Q0.readdirSync(W)},isDirEmptySync(W){return this.readdirSync(W).length===0},rmdirSync(W){Q0.rmdirSync(W)},rmSync(W,X){Q0.rmSync(W,X)},createWriteStream(W){return Q0.createWriteStream(W)}},UX=MX;function y1(){return UX}class OW extends Error{}function W6(){return process.versions.bun!==void 0}function Q6(){return process.env.CLAUDE_CONFIG_DIR??KX(AX(),".claude")}function y9(W){if(!W)return!1;if(typeof W==="boolean")return W;let X=W.toLowerCase().trim();return["1","true","yes","on"].includes(X)}var P8=null,h9=!1;function VX(){if(h9)return P8;if(h9=!0,!process.env.DEBUG_CLAUDE_AGENT_SDK)return null;let W=f9(Q6(),"debug");if(P8=f9(W,`sdk-${FX()}.txt`),!jX(W))NX(W,{recursive:!0});return process.stderr.write(`SDK debug logs: ${P8}
`),P8}function AW(W){let X=VX();if(!X)return;let Q=`${new Date().toISOString()} ${W}
`;LX(X,Q)}function OX(W,X){let Y={...W};if(X){let Q={sandbox:X};if(Y.settings)try{Q={...JSON.parse(Y.settings),sandbox:X}}catch{}Y.settings=JSON.stringify(Q)}return Y}class X6{options;child;childStdin;childStdout;ready=!1;abortController;exitError;exitListeners=[];processExitHandler;abortHandler;constructor(W){this.options=W,this.abortController=W.abortController||e9(),this.initialize()}initialize(){try{let{additionalDirectories:W=[],betas:X,cwd:Y,executable:Q=W6()?"bun":"node",executableArgs:G=[],extraArgs:z={},pathToClaudeCodeExecutable:J,env:B={...process.env},stderr:M,maxThinkingTokens:q,maxTurns:j,maxBudgetUsd:I,model:C,fallbackModel:V,jsonSchema:R,permissionMode:U,allowDangerouslySkipPermissions:L,permissionPromptToolName:A,continueConversation:N,resume:_,settingSources:x,allowedTools:P=[],disallowedTools:O=[],mcpServers:S,strictMcpConfig:Z,canUseTool:g,includePartialMessages:y,plugins:k,sandbox:E}=this.options,D=["--output-format","stream-json","--verbose","--input-format","stream-json"];if(q!==void 0)D.push("--max-thinking-tokens",q.toString());if(j)D.push("--max-turns",j.toString());if(I!==void 0)D.push("--max-budget-usd",I.toString());if(C)D.push("--model",C);if(X&&X.length>0)D.push("--betas",X.join(","));if(R)D.push("--json-schema",JSON.stringify(R));if(B.DEBUG_CLAUDE_AGENT_SDK)D.push("--debug-to-stderr");if(g){if(A)throw Error("canUseTool callback cannot be used with permissionPromptToolName. Please use one or the other.");D.push("--permission-prompt-tool","stdio")}else if(A)D.push("--permission-prompt-tool",A);if(N)D.push("--continue");if(_)D.push("--resume",_);if(P.length>0)D.push("--allowedTools",P.join(","));if(O.length>0)D.push("--disallowedTools",O.join(","));let{tools:f}=this.options;if(f!==void 0)if(Array.isArray(f))if(f.length===0)D.push("--tools","");else D.push("--tools",f.join(","));else D.push("--tools","default");if(S&&Object.keys(S).length>0)D.push("--mcp-config",JSON.stringify({mcpServers:S}));if(x)D.push("--setting-sources",x.join(","));if(Z)D.push("--strict-mcp-config");if(U)D.push("--permission-mode",U);if(L)D.push("--allow-dangerously-skip-permissions");if(V){if(C&&V===C)throw Error("Fallback model cannot be the same as the main model. Please specify a different model for fallbackModel option.");D.push("--fallback-model",V)}if(y)D.push("--include-partial-messages");for(let w0 of W)D.push("--add-dir",w0);if(k&&k.length>0)for(let w0 of k)if(w0.type==="local")D.push("--plugin-dir",w0.path);else throw Error(`Unsupported plugin type: ${w0.type}`);if(this.options.forkSession)D.push("--fork-session");if(this.options.resumeSessionAt)D.push("--resume-session-at",this.options.resumeSessionAt);let m=OX(z??{},E);for(let[w0,k0]of Object.entries(m))if(k0===null)D.push(`--${w0}`);else D.push(`--${w0}`,k0);if(!B.CLAUDE_CODE_ENTRYPOINT)B.CLAUDE_CODE_ENTRYPOINT="sdk-ts";if(delete B.NODE_OPTIONS,B.DEBUG_CLAUDE_AGENT_SDK)B.DEBUG="1";else delete B.DEBUG;if(!y1().existsSync(J)){let w0=$9(J)?`Claude Code native binary not found at ${J}. Please ensure Claude Code is installed via native installer or specify a valid path with options.pathToClaudeCodeExecutable.`:`Claude Code executable not found at ${J}. Is options.pathToClaudeCodeExecutable set?`;throw ReferenceError(w0)}let o=$9(J),F0=o?J:Q,W0=o?[...G,...D]:[...G,J,...D],U0=o?`Spawning Claude Code native binary: ${F0} ${W0.join(" ")}`:`Spawning Claude Code process: ${F0} ${W0.join(" ")}`;if(AW(U0),M)M(U0);let J0=B.DEBUG_CLAUDE_AGENT_SDK||M?"pipe":"ignore";if(this.child=BX(F0,W0,{cwd:Y,stdio:["pipe","pipe",J0],signal:this.abortController.signal,env:B}),this.childStdin=this.child.stdin,this.childStdout=this.child.stdout,B.DEBUG_CLAUDE_AGENT_SDK||M)this.child.stderr.on("data",(w0)=>{let k0=w0.toString();if(AW(k0),M)M(k0)});let Y0=()=>{if(this.child&&!this.child.killed)this.child.kill("SIGTERM")};this.processExitHandler=Y0,this.abortHandler=Y0,process.on("exit",this.processExitHandler),this.abortController.signal.addEventListener("abort",this.abortHandler),this.child.on("error",(w0)=>{if(this.ready=!1,this.abortController.signal.aborted)this.exitError=new OW("Claude Code process aborted by user");else this.exitError=Error(`Failed to spawn Claude Code process: ${w0.message}`),AW(this.exitError.message)}),this.child.on("close",(w0,k0)=>{if(this.ready=!1,this.abortController.signal.aborted)this.exitError=new OW("Claude Code process aborted by user");else{let x0=this.getProcessExitError(w0,k0);if(x0)this.exitError=x0,AW(x0.message)}}),this.ready=!0}catch(W){throw this.ready=!1,W}}getProcessExitError(W,X){if(W!==0&&W!==null)return Error(`Claude Code process exited with code ${W}`);else if(X)return Error(`Claude Code process terminated by signal ${X}`);return}write(W){if(this.abortController.signal.aborted)throw new OW("Operation aborted");if(!this.ready||!this.childStdin)throw Error("ProcessTransport is not ready for writing");if(this.child?.killed||this.child?.exitCode!==null)throw Error("Cannot write to terminated process");if(this.exitError)throw Error(`Cannot write to process that exited with error: ${this.exitError.message}`);AW(`[ProcessTransport] Writing to stdin: ${W.substring(0,100)}`);try{if(!this.childStdin.write(W))AW("[ProcessTransport] Write buffer full, data queued")}catch(X){throw this.ready=!1,Error(`Failed to write to process stdin: ${X.message}`)}}close(){if(this.childStdin)this.childStdin.end(),this.childStdin=void 0;if(this.processExitHandler)process.off("exit",this.processExitHandler),this.processExitHandler=void 0;if(this.abortHandler)this.abortController.signal.removeEventListener("abort",this.abortHandler),this.abortHandler=void 0;for(let{handler:W}of this.exitListeners)this.child?.off("exit",W);if(this.exitListeners=[],this.child&&!this.child.killed)this.child.kill("SIGTERM"),setTimeout(()=>{if(this.child&&!this.child.killed)this.child.kill("SIGKILL")},5000);this.ready=!1}isReady(){return this.ready}async*readMessages(){if(!this.childStdout)throw Error("ProcessTransport output stream not available");let W=HX({input:this.childStdout});try{for await(let X of W)if(X.trim())yield JSON.parse(X);await this.waitForExit()}catch(X){throw X}finally{W.close()}}endInput(){if(this.childStdin)this.childStdin.end()}getInputStream(){return this.childStdin}onExit(W){if(!this.child)return()=>{};let X=(Y,Q)=>{let G=this.getProcessExitError(Y,Q);W(G)};return this.child.on("exit",X),this.exitListeners.push({callback:W,handler:X}),()=>{if(this.child)this.child.off("exit",X);let Y=this.exitListeners.findIndex((Q)=>Q.handler===X);if(Y!==-1)this.exitListeners.splice(Y,1)}}async waitForExit(){if(!this.child){if(this.exitError)throw this.exitError;return}if(this.child.exitCode!==null||this.child.killed){if(this.exitError)throw this.exitError;return}return new Promise((W,X)=>{let Y=(G,z)=>{if(this.abortController.signal.aborted){X(new OW("Operation aborted"));return}let J=this.getProcessExitError(G,z);if(J)X(J);else W()};this.child.once("exit",Y);let Q=(G)=>{this.child.off("exit",Y),X(G)};this.child.once("error",Q),this.child.once("exit",()=>{this.child.off("error",Q)})})}}function $9(W){return![".js",".mjs",".tsx",".ts",".jsx"].some((Y)=>W.endsWith(Y))}class J6{returned;queue=[];readResolve;readReject;isDone=!1;hasError;started=!1;constructor(W){this.returned=W}[Symbol.asyncIterator](){if(this.started)throw Error("Stream can only be iterated once");return this.started=!0,this}next(){if(this.queue.length>0)return Promise.resolve({done:!1,value:this.queue.shift()});if(this.isDone)return Promise.resolve({done:!0,value:void 0});if(this.hasError)return Promise.reject(this.hasError);return new Promise((W,X)=>{this.readResolve=W,this.readReject=X})}enqueue(W){if(this.readResolve){let X=this.readResolve;this.readResolve=void 0,this.readReject=void 0,X({done:!1,value:W})}else this.queue.push(W)}done(){if(this.isDone=!0,this.readResolve){let W=this.readResolve;this.readResolve=void 0,this.readReject=void 0,W({done:!0,value:void 0})}}error(W){if(this.hasError=W,this.readReject){let X=this.readReject;this.readResolve=void 0,this.readReject=void 0,X(W)}}return(){if(this.isDone=!0,this.returned)this.returned();return Promise.resolve({done:!0,value:void 0})}}class Y6{sendMcpMessage;isClosed=!1;constructor(W){this.sendMcpMessage=W}onclose;onerror;onmessage;async start(){}async send(W){if(this.isClosed)throw Error("Transport is closed");this.sendMcpMessage(W)}async close(){if(this.isClosed)return;this.isClosed=!0,this.onclose?.()}}var wX=typeof global=="object"&&global&&global.Object===Object&&global,RX=wX,DX=typeof self=="object"&&self&&self.Object===Object&&self,_X=RX||DX||Function("return this")(),M9=_X,IX=M9.Symbol,Z8=IX,G6=Object.prototype,CX=G6.hasOwnProperty,EX=G6.toString,z8=Z8?Z8.toStringTag:void 0;function bX(W){var X=CX.call(W,z8),Y=W[z8];try{W[z8]=void 0;var Q=!0}catch(z){}var G=EX.call(W);if(Q)if(X)W[z8]=Y;else delete W[z8];return G}var SX=bX,PX=Object.prototype,vX=PX.toString;function ZX(W){return vX.call(W)}var TX=ZX,kX="[object Null]",gX="[object Undefined]",m9=Z8?Z8.toStringTag:void 0;function xX(W){if(W==null)return W===void 0?gX:kX;return m9&&m9 in Object(W)?SX(W):TX(W)}var fX=xX;function yX(W){var X=typeof W;return W!=null&&(X=="object"||X=="function")}var z6=yX,hX="[object AsyncFunction]",$X="[object Function]",mX="[object GeneratorFunction]",lX="[object Proxy]";function pX(W){if(!z6(W))return!1;var X=fX(W);return X==$X||X==mX||X==hX||X==lX}var uX=pX,nX=M9["__core-js_shared__"],s8=nX,l9=function(){var W=/[^.]+$/.exec(s8&&s8.keys&&s8.keys.IE_PROTO||"");return W?"Symbol(src)_1."+W:""}();function cX(W){return!!l9&&l9 in W}var dX=cX,iX=Function.prototype,oX=iX.toString;function rX(W){if(W!=null){try{return oX.call(W)}catch(X){}try{return W+""}catch(X){}}return""}var aX=rX,sX=/[\\^$.*+?()[\]{}|]/g,tX=/^\[object .+?Constructor\]$/,eX=Function.prototype,WJ=Object.prototype,QJ=eX.toString,XJ=WJ.hasOwnProperty,JJ=RegExp("^"+QJ.call(XJ).replace(sX,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function YJ(W){if(!z6(W)||dX(W))return!1;var X=uX(W)?JJ:tX;return X.test(aX(W))}var GJ=YJ;function zJ(W,X){return W==null?void 0:W[X]}var BJ=zJ;function HJ(W,X){var Y=BJ(W,X);return GJ(Y)?Y:void 0}var B6=HJ,qJ=B6(Object,"create"),B8=qJ;function MJ(){this.__data__=B8?B8(null):{},this.size=0}var UJ=MJ;function FJ(W){var X=this.has(W)&&delete this.__data__[W];return this.size-=X?1:0,X}var LJ=FJ,jJ="__lodash_hash_undefined__",NJ=Object.prototype,KJ=NJ.hasOwnProperty;function AJ(W){var X=this.__data__;if(B8){var Y=X[W];return Y===jJ?void 0:Y}return KJ.call(X,W)?X[W]:void 0}var VJ=AJ,OJ=Object.prototype,wJ=OJ.hasOwnProperty;function RJ(W){var X=this.__data__;return B8?X[W]!==void 0:wJ.call(X,W)}var DJ=RJ,_J="__lodash_hash_undefined__";function IJ(W,X){var Y=this.__data__;return this.size+=this.has(W)?0:1,Y[W]=B8&&X===void 0?_J:X,this}var CJ=IJ;function xW(W){var X=-1,Y=W==null?0:W.length;this.clear();while(++X<Y){var Q=W[X];this.set(Q[0],Q[1])}}xW.prototype.clear=UJ;xW.prototype.delete=LJ;xW.prototype.get=VJ;xW.prototype.has=DJ;xW.prototype.set=CJ;var p9=xW;function EJ(){this.__data__=[],this.size=0}var bJ=EJ;function SJ(W,X){return W===X||W!==W&&X!==X}var PJ=SJ;function vJ(W,X){var Y=W.length;while(Y--)if(PJ(W[Y][0],X))return Y;return-1}var g8=vJ,ZJ=Array.prototype,TJ=ZJ.splice;function kJ(W){var X=this.__data__,Y=g8(X,W);if(Y<0)return!1;var Q=X.length-1;if(Y==Q)X.pop();else TJ.call(X,Y,1);return--this.size,!0}var gJ=kJ;function xJ(W){var X=this.__data__,Y=g8(X,W);return Y<0?void 0:X[Y][1]}var fJ=xJ;function yJ(W){return g8(this.__data__,W)>-1}var hJ=yJ;function $J(W,X){var Y=this.__data__,Q=g8(Y,W);if(Q<0)++this.size,Y.push([W,X]);else Y[Q][1]=X;return this}var mJ=$J;function fW(W){var X=-1,Y=W==null?0:W.length;this.clear();while(++X<Y){var Q=W[X];this.set(Q[0],Q[1])}}fW.prototype.clear=bJ;fW.prototype.delete=gJ;fW.prototype.get=fJ;fW.prototype.has=hJ;fW.prototype.set=mJ;var lJ=fW,pJ=B6(M9,"Map"),uJ=pJ;function nJ(){this.size=0,this.__data__={hash:new p9,map:new(uJ||lJ),string:new p9}}var cJ=nJ;function dJ(W){var X=typeof W;return X=="string"||X=="number"||X=="symbol"||X=="boolean"?W!=="__proto__":W===null}var iJ=dJ;function oJ(W,X){var Y=W.__data__;return iJ(X)?Y[typeof X=="string"?"string":"hash"]:Y.map}var x8=oJ;function rJ(W){var X=x8(this,W).delete(W);return this.size-=X?1:0,X}var aJ=rJ;function sJ(W){return x8(this,W).get(W)}var tJ=sJ;function eJ(W){return x8(this,W).has(W)}var WY=eJ;function QY(W,X){var Y=x8(this,W),Q=Y.size;return Y.set(W,X),this.size+=Y.size==Q?0:1,this}var XY=QY;function yW(W){var X=-1,Y=W==null?0:W.length;this.clear();while(++X<Y){var Q=W[X];this.set(Q[0],Q[1])}}yW.prototype.clear=cJ;yW.prototype.delete=aJ;yW.prototype.get=tJ;yW.prototype.has=WY;yW.prototype.set=XY;var H6=yW,JY="Expected a function";function U9(W,X){if(typeof W!="function"||X!=null&&typeof X!="function")throw TypeError(JY);var Y=function(){var Q=arguments,G=X?X.apply(this,Q):Q[0],z=Y.cache;if(z.has(G))return z.get(G);var J=W.apply(this,Q);return Y.cache=z.set(G,J)||z,J};return Y.cache=new(U9.Cache||H6),Y}U9.Cache=H6;var j8=U9,u9=2000;function YY(W){for(let X=0;X<W.length;X+=u9)process.stderr.write(W.substring(X,X+u9))}var GY=j8((W)=>{if(!W||W.trim()==="")return null;let X=W.split(",").map((z)=>z.trim()).filter(Boolean);if(X.length===0)return null;let Y=X.some((z)=>z.startsWith("!")),Q=X.some((z)=>!z.startsWith("!"));if(Y&&Q)return null;let G=X.map((z)=>z.replace(/^!/,"").toLowerCase());return{include:Y?[]:G,exclude:Y?G:[],isExclusive:Y}});function zY(W){let X=[],Y=W.match(/^MCP server ["']([^"']+)["']/);if(Y&&Y[1])X.push("mcp"),X.push(Y[1].toLowerCase());else{let z=W.match(/^([^:[]+):/);if(z&&z[1])X.push(z[1].trim().toLowerCase())}let Q=W.match(/^\[([^\]]+)]/);if(Q&&Q[1])X.push(Q[1].trim().toLowerCase());if(W.toLowerCase().includes("statsig event:"))X.push("statsig");let G=W.match(/:\s*([^:]+?)(?:\s+(?:type|mode|status|event))?:/);if(G&&G[1]){let z=G[1].trim().toLowerCase();if(z.length<30&&!z.includes(" "))X.push(z)}return Array.from(new Set(X))}function BY(W,X){if(!X)return!0;if(W.length===0)return!1;if(X.isExclusive)return!W.some((Y)=>X.exclude.includes(Y));else return W.some((Y)=>X.include.includes(Y))}function HY(W,X){if(!X)return!0;let Y=zY(W);return BY(Y,X)}var FY={name:"BASH_MAX_OUTPUT_LENGTH",default:30000,validate:(W)=>{if(!W)return{effective:30000,status:"valid"};let Q=parseInt(W,10);if(isNaN(Q)||Q<=0)return{effective:30000,status:"invalid",message:`Invalid value "${W}" (using default: 30000)`};if(Q>150000)return{effective:150000,status:"capped",message:`Capped from ${Q} to 150000`};return{effective:Q,status:"valid"}}},LY={name:"CLAUDE_CODE_MAX_OUTPUT_TOKENS",default:32000,validate:(W)=>{if(!W)return{effective:32000,status:"valid"};let Q=parseInt(W,10);if(isNaN(Q)||Q<=0)return{effective:32000,status:"invalid",message:`Invalid value "${W}" (using default: 32000)`};if(Q>64000)return{effective:64000,status:"capped",message:`Capped from ${Q} to 64000`};return{effective:Q,status:"valid"}}};function jY(){let W="";if(typeof process<"u"&&typeof process.cwd==="function")W=MY(qY());return{originalCwd:W,totalCostUSD:0,totalAPIDuration:0,totalAPIDurationWithoutRetries:0,totalToolDuration:0,startTime:Date.now(),lastInteractionTime:Date.now(),totalLinesAdded:0,totalLinesRemoved:0,hasUnknownModelCost:!1,cwd:W,modelUsage:{},mainLoopModelOverride:void 0,initialMainLoopModel:null,modelStrings:null,isInteractive:!1,clientType:"cli",sessionIngressToken:void 0,oauthTokenFromFd:void 0,apiKeyFromFd:void 0,flagSettingsPath:void 0,allowedSettingSources:["userSettings","projectSettings","localSettings","flagSettings","policySettings"],meter:null,sessionCounter:null,locCounter:null,prCounter:null,commitCounter:null,costCounter:null,tokenCounter:null,codeEditToolDecisionCounter:null,activeTimeCounter:null,sessionId:UY(),loggerProvider:null,eventLogger:null,meterProvider:null,tracerProvider:null,agentColorMap:new Map,agentColorIndex:0,envVarValidators:[FY,LY],lastAPIRequest:null,inMemoryErrorLog:[],inlinePlugins:[],sessionBypassPermissionsMode:!1,hasExitedPlanMode:!1,needsPlanModeExitAttachment:!1,initJsonSchema:null,registeredHooks:null,planSlugCache:new Map}}var NY=jY();function KY(){return NY.sessionId}function AY({writeFn:W,flushIntervalMs:X=1000,maxBufferSize:Y=100,immediateMode:Q=!1}){let G=[],z=null;function J(){if(z)clearTimeout(z),z=null}function B(){if(G.length===0)return;W(G.join("")),G=[],J()}function M(){if(!z)z=setTimeout(B,X)}return{write(q){if(Q){W(q);return}if(G.push(q),M(),G.length>=Y)B()},flush:B,dispose(){B()}}}var n9=new Set;function VY(W){return n9.add(W),()=>n9.delete(W)}var OY=j8(()=>{return y9(process.env.DEBUG)||y9(process.env.DEBUG_SDK)||process.argv.includes("--debug")||process.argv.includes("-d")||M6()||process.argv.some((W)=>W.startsWith("--debug="))}),wY=j8(()=>{let W=process.argv.find((Y)=>Y.startsWith("--debug="));if(!W)return null;let X=W.substring(8);return GY(X)}),M6=j8(()=>{return process.argv.includes("--debug-to-stderr")||process.argv.includes("-d2e")});function RY(W){if(typeof process>"u"||typeof process.versions>"u"||typeof process.versions.node>"u")return!1;let X=wY();return HY(W,X)}var DY=!1,v8=null;function _Y(){if(!v8)v8=AY({writeFn:(W)=>{let X=U6();if(!y1().existsSync(W9(X)))y1().mkdirSync(W9(X));y1().appendFileSync(X,W),IY()},flushIntervalMs:1000,maxBufferSize:100,immediateMode:OY()}),VY(async()=>v8?.dispose());return v8}function g1(W,{level:X}={level:"debug"}){if(!RY(W))return;if(DY&&W.includes(`
`))W=JSON.stringify(W);let Q=`${new Date().toISOString()} [${X.toUpperCase()}] ${W.trim()}
`;if(M6()){YY(Q);return}_Y().write(Q)}function U6(){return process.env.CLAUDE_CODE_DEBUG_LOGS_DIR??q6(Q6(),"debug",`${KY()}.txt`)}var IY=j8(()=>{try{let W=U6(),X=W9(W),Y=q6(X,"latest");if(!y1().existsSync(X))y1().mkdirSync(X);if(y1().existsSync(Y))try{y1().unlinkSync(Y)}catch{}y1().symlinkSync(W,Y)}catch{}});class F6{transport;isSingleUserTurn;canUseTool;hooks;abortController;jsonSchema;initConfig;pendingControlResponses=new Map;cleanupPerformed=!1;sdkMessages;inputStream=new J6;initialization;cancelControllers=new Map;hookCallbacks=new Map;nextCallbackId=0;sdkMcpTransports=new Map;pendingMcpResponses=new Map;firstResultReceivedPromise;firstResultReceivedResolve;streamCloseTimeout;constructor(W,X,Y,Q,G,z=new Map,J,B){if(this.transport=W,this.isSingleUserTurn=X,this.canUseTool=Y,this.hooks=Q,this.abortController=G,this.jsonSchema=J,this.initConfig=B,this.streamCloseTimeout=60000,typeof process<"u"&&process.env?.CLAUDE_CODE_STREAM_CLOSE_TIMEOUT)this.streamCloseTimeout=parseInt(process.env.CLAUDE_CODE_STREAM_CLOSE_TIMEOUT);for(let[M,q]of z){let j=new Y6((I)=>this.sendMcpServerMessageToCli(M,I));this.sdkMcpTransports.set(M,j),q.connect(j)}this.sdkMessages=this.readSdkMessages(),this.firstResultReceivedPromise=new Promise((M)=>{this.firstResultReceivedResolve=M}),this.readMessages(),this.initialization=this.initialize(),this.initialization.catch(()=>{})}setError(W){this.inputStream.error(W)}cleanup(W){if(this.cleanupPerformed)return;this.cleanupPerformed=!0;try{this.transport.close(),this.pendingControlResponses.clear(),this.pendingMcpResponses.clear(),this.cancelControllers.clear(),this.hookCallbacks.clear();for(let X of this.sdkMcpTransports.values())try{X.close()}catch{}if(this.sdkMcpTransports.clear(),W)this.inputStream.error(W);else this.inputStream.done()}catch(X){}}next(...[W]){return this.sdkMessages.next(...[W])}return(W){return this.sdkMessages.return(W)}throw(W){return this.sdkMessages.throw(W)}[Symbol.asyncIterator](){return this.sdkMessages}[Symbol.asyncDispose](){return this.sdkMessages[Symbol.asyncDispose]()}async readMessages(){try{for await(let W of this.transport.readMessages()){if(W.type==="control_response"){let X=this.pendingControlResponses.get(W.response.request_id);if(X)X(W.response);continue}else if(W.type==="control_request"){this.handleControlRequest(W);continue}else if(W.type==="control_cancel_request"){this.handleControlCancelRequest(W);continue}else if(W.type==="keep_alive")continue;if(W.type==="result"){if(this.firstResultReceivedResolve)this.firstResultReceivedResolve();if(this.isSingleUserTurn)this.transport.endInput()}this.inputStream.enqueue(W)}this.inputStream.done(),this.cleanup()}catch(W){this.inputStream.error(W),this.cleanup(W)}}async handleControlRequest(W){let X=new AbortController;this.cancelControllers.set(W.request_id,X);try{let Y=await this.processControlRequest(W,X.signal),Q={type:"control_response",response:{subtype:"success",request_id:W.request_id,response:Y}};await Promise.resolve(this.transport.write(JSON.stringify(Q)+`
`))}catch(Y){let Q={type:"control_response",response:{subtype:"error",request_id:W.request_id,error:Y.message||String(Y)}};await Promise.resolve(this.transport.write(JSON.stringify(Q)+`
`))}finally{this.cancelControllers.delete(W.request_id)}}handleControlCancelRequest(W){let X=this.cancelControllers.get(W.request_id);if(X)X.abort(),this.cancelControllers.delete(W.request_id)}async processControlRequest(W,X){if(W.request.subtype==="can_use_tool"){if(!this.canUseTool)throw Error("canUseTool callback is not provided.");return{...await this.canUseTool(W.request.tool_name,W.request.input,{signal:X,suggestions:W.request.permission_suggestions,blockedPath:W.request.blocked_path,decisionReason:W.request.decision_reason,toolUseID:W.request.tool_use_id,agentID:W.request.agent_id}),toolUseID:W.request.tool_use_id}}else if(W.request.subtype==="hook_callback")return await this.handleHookCallbacks(W.request.callback_id,W.request.input,W.request.tool_use_id,X);else if(W.request.subtype==="mcp_message"){let Y=W.request,Q=this.sdkMcpTransports.get(Y.server_name);if(!Q)throw Error(`SDK MCP server not found: ${Y.server_name}`);if("method"in Y.message&&"id"in Y.message&&Y.message.id!==null)return{mcp_response:await this.handleMcpControlRequest(Y.server_name,Y,Q)};else{if(Q.onmessage)Q.onmessage(Y.message);return{mcp_response:{jsonrpc:"2.0",result:{},id:0}}}}throw Error("Unsupported control request subtype: "+W.request.subtype)}async*readSdkMessages(){for await(let W of this.inputStream)yield W}async initialize(){let W;if(this.hooks){W={};for(let[G,z]of Object.entries(this.hooks))if(z.length>0)W[G]=z.map((J)=>{let B=[];for(let M of J.hooks){let q=`hook_${this.nextCallbackId++}`;this.hookCallbacks.set(q,M),B.push(q)}return{matcher:J.matcher,hookCallbackIds:B,timeout:J.timeout}})}let X=this.sdkMcpTransports.size>0?Array.from(this.sdkMcpTransports.keys()):void 0,Y={subtype:"initialize",hooks:W,sdkMcpServers:X,jsonSchema:this.jsonSchema,systemPrompt:this.initConfig?.systemPrompt,appendSystemPrompt:this.initConfig?.appendSystemPrompt,agents:this.initConfig?.agents};return(await this.request(Y)).response}async interrupt(){await this.request({subtype:"interrupt"})}async setPermissionMode(W){await this.request({subtype:"set_permission_mode",mode:W})}async setModel(W){await this.request({subtype:"set_model",model:W})}async setMaxThinkingTokens(W){await this.request({subtype:"set_max_thinking_tokens",max_thinking_tokens:W})}async rewindCode(W){await this.request({subtype:"rewind_code",user_message_id:W})}async processPendingPermissionRequests(W){for(let X of W)if(X.request.subtype==="can_use_tool")this.handleControlRequest(X).catch(()=>{})}request(W){let X=Math.random().toString(36).substring(2,15),Y={request_id:X,type:"control_request",request:W};return new Promise((Q,G)=>{this.pendingControlResponses.set(X,(z)=>{if(z.subtype==="success")Q(z);else if(G(Error(z.error)),z.pending_permission_requests)this.processPendingPermissionRequests(z.pending_permission_requests)}),Promise.resolve(this.transport.write(JSON.stringify(Y)+`
`))})}async supportedCommands(){return(await this.initialization).commands}async supportedModels(){return(await this.initialization).models}async mcpServerStatus(){return(await this.request({subtype:"mcp_status"})).response.mcpServers}async accountInfo(){return(await this.initialization).account}async streamInput(W){g1("[Query.streamInput] Starting to process input stream"),g1(`[Query.streamInput] this.sdkMcpTransports.size = ${this.sdkMcpTransports.size}`);try{let X=0;for await(let Q of W){if(X++,g1(`[Query.streamInput] Processing message ${X}: ${Q.type}`),this.abortController?.signal.aborted)break;await Promise.resolve(this.transport.write(JSON.stringify(Q)+`
`))}g1(`[Query.streamInput] Finished processing ${X} messages from input stream`),g1(`[Query.streamInput] About to check MCP servers. this.sdkMcpTransports.size = ${this.sdkMcpTransports.size}`);let Y=this.hooks&&Object.keys(this.hooks).length>0;if((this.sdkMcpTransports.size>0||Y)&&this.firstResultReceivedPromise){g1("[Query.streamInput] Entering Promise.race to wait for result");let Q;if(await Promise.race([this.firstResultReceivedPromise.then(()=>{if(g1("[Query.streamInput] Received first result, closing input stream"),Q)clearTimeout(Q)}),new Promise((G)=>{Q=setTimeout(()=>{g1("[Query.streamInput] Timed out waiting for first result, closing input stream"),G()},this.streamCloseTimeout)})]),Q)clearTimeout(Q)}g1("[Query] Calling transport.endInput() to close stdin to CLI process"),this.transport.endInput()}catch(X){if(!(X instanceof OW))throw X}}handleHookCallbacks(W,X,Y,Q){let G=this.hookCallbacks.get(W);if(!G)throw Error(`No hook callback found for ID: ${W}`);return G(X,Y,{signal:Q})}sendMcpServerMessageToCli(W,X){if("id"in X&&X.id!==null&&X.id!==void 0){let Q=`${W}:${X.id}`,G=this.pendingMcpResponses.get(Q);if(G){G.resolve(X),this.pendingMcpResponses.delete(Q);return}}let Y={type:"control_request",request_id:CY(),request:{subtype:"mcp_message",server_name:W,message:X}};this.transport.write(JSON.stringify(Y)+`
`)}handleMcpControlRequest(W,X,Y){let Q="id"in X.message?X.message.id:null,G=`${W}:${Q}`;return new Promise((z,J)=>{let B=()=>{this.pendingMcpResponses.delete(G)},M=(j)=>{B(),z(j)},q=(j)=>{B(),J(j)};if(this.pendingMcpResponses.set(G,{resolve:M,reject:q}),Y.onmessage)Y.onmessage(X.message);else{B(),J(Error("No message handler registered"));return}})}}var H={};_Q(H,{void:()=>q5,util:()=>_0,unknown:()=>B5,union:()=>L5,undefined:()=>Y5,tuple:()=>K5,transformer:()=>i9,symbol:()=>J5,string:()=>O6,strictObject:()=>F5,setErrorMap:()=>SY,set:()=>O5,record:()=>A5,quotelessJson:()=>EY,promise:()=>C5,preprocess:()=>S5,pipeline:()=>P5,ostring:()=>v5,optional:()=>E5,onumber:()=>Z5,oboolean:()=>T5,objectUtil:()=>Q9,object:()=>U5,number:()=>w6,nullable:()=>b5,null:()=>G5,never:()=>H5,nativeEnum:()=>I5,nan:()=>W5,map:()=>V5,makeIssue:()=>k8,literal:()=>D5,lazy:()=>R5,late:()=>tY,isValid:()=>WW,isDirty:()=>J9,isAsync:()=>H8,isAborted:()=>X9,intersection:()=>N5,instanceof:()=>eY,getParsedType:()=>f1,getErrorMap:()=>T8,function:()=>w5,enum:()=>_5,effect:()=>i9,discriminatedUnion:()=>j5,defaultErrorMap:()=>DW,datetimeRegex:()=>K6,date:()=>X5,custom:()=>V6,coerce:()=>k5,boolean:()=>R6,bigint:()=>Q5,array:()=>M5,any:()=>z5,addIssueToContext:()=>i,ZodVoid:()=>M8,ZodUnknown:()=>p1,ZodUnion:()=>EW,ZodUndefined:()=>IW,ZodType:()=>N0,ZodTuple:()=>E1,ZodTransformer:()=>M1,ZodSymbol:()=>q8,ZodString:()=>j1,ZodSet:()=>JW,ZodSchema:()=>N0,ZodRecord:()=>U8,ZodReadonly:()=>kW,ZodPromise:()=>YW,ZodPipeline:()=>N8,ZodParsedType:()=>a,ZodOptional:()=>K1,ZodObject:()=>p0,ZodNumber:()=>u1,ZodNullable:()=>h1,ZodNull:()=>CW,ZodNever:()=>C1,ZodNativeEnum:()=>vW,ZodNaN:()=>L8,ZodMap:()=>F8,ZodLiteral:()=>PW,ZodLazy:()=>SW,ZodIssueCode:()=>p,ZodIntersection:()=>bW,ZodFunction:()=>RW,ZodFirstPartyTypeKind:()=>z0,ZodError:()=>z1,ZodEnum:()=>c1,ZodEffects:()=>M1,ZodDiscriminatedUnion:()=>f8,ZodDefault:()=>ZW,ZodDate:()=>QW,ZodCatch:()=>TW,ZodBranded:()=>y8,ZodBoolean:()=>_W,ZodBigInt:()=>n1,ZodArray:()=>N1,ZodAny:()=>XW,Schema:()=>N0,ParseStatus:()=>s0,OK:()=>W1,NEVER:()=>g5,INVALID:()=>G0,EMPTY_PATH:()=>PY,DIRTY:()=>wW,BRAND:()=>sY});var _0;(function(W){W.assertEqual=(G)=>{};function X(G){}W.assertIs=X;function Y(G){throw Error()}W.assertNever=Y,W.arrayToEnum=(G)=>{let z={};for(let J of G)z[J]=J;return z},W.getValidEnumValues=(G)=>{let z=W.objectKeys(G).filter((B)=>typeof G[G[B]]!=="number"),J={};for(let B of z)J[B]=G[B];return W.objectValues(J)},W.objectValues=(G)=>{return W.objectKeys(G).map(function(z){return G[z]})},W.objectKeys=typeof Object.keys==="function"?(G)=>Object.keys(G):(G)=>{let z=[];for(let J in G)if(Object.prototype.hasOwnProperty.call(G,J))z.push(J);return z},W.find=(G,z)=>{for(let J of G)if(z(J))return J;return},W.isInteger=typeof Number.isInteger==="function"?(G)=>Number.isInteger(G):(G)=>typeof G==="number"&&Number.isFinite(G)&&Math.floor(G)===G;function Q(G,z=" | "){return G.map((J)=>typeof J==="string"?`'${J}'`:J).join(z)}W.joinValues=Q,W.jsonStringifyReplacer=(G,z)=>{if(typeof z==="bigint")return z.toString();return z}})(_0||(_0={}));var Q9;(function(W){W.mergeShapes=(X,Y)=>{return{...X,...Y}}})(Q9||(Q9={}));var a=_0.arrayToEnum(["string","nan","number","integer","float","boolean","date","bigint","symbol","function","undefined","null","array","object","unknown","promise","void","never","map","set"]),f1=(W)=>{switch(typeof W){case"undefined":return a.undefined;case"string":return a.string;case"number":return Number.isNaN(W)?a.nan:a.number;case"boolean":return a.boolean;case"function":return a.function;case"bigint":return a.bigint;case"symbol":return a.symbol;case"object":if(Array.isArray(W))return a.array;if(W===null)return a.null;if(W.then&&typeof W.then==="function"&&W.catch&&typeof W.catch==="function")return a.promise;if(typeof Map<"u"&&W instanceof Map)return a.map;if(typeof Set<"u"&&W instanceof Set)return a.set;if(typeof Date<"u"&&W instanceof Date)return a.date;return a.object;default:return a.unknown}},p=_0.arrayToEnum(["invalid_type","invalid_literal","custom","invalid_union","invalid_union_discriminator","invalid_enum_value","unrecognized_keys","invalid_arguments","invalid_return_type","invalid_date","invalid_string","too_small","too_big","invalid_intersection_types","not_multiple_of","not_finite"]),EY=(W)=>{return JSON.stringify(W,null,2).replace(/"([^"]+)":/g,"$1:")};class z1 extends Error{get errors(){return this.issues}constructor(W){super();this.issues=[],this.addIssue=(Y)=>{this.issues=[...this.issues,Y]},this.addIssues=(Y=[])=>{this.issues=[...this.issues,...Y]};let X=new.target.prototype;if(Object.setPrototypeOf)Object.setPrototypeOf(this,X);else this.__proto__=X;this.name="ZodError",this.issues=W}format(W){let X=W||function(G){return G.message},Y={_errors:[]},Q=(G)=>{for(let z of G.issues)if(z.code==="invalid_union")z.unionErrors.map(Q);else if(z.code==="invalid_return_type")Q(z.returnTypeError);else if(z.code==="invalid_arguments")Q(z.argumentsError);else if(z.path.length===0)Y._errors.push(X(z));else{let J=Y,B=0;while(B<z.path.length){let M=z.path[B];if(B!==z.path.length-1)J[M]=J[M]||{_errors:[]};else J[M]=J[M]||{_errors:[]},J[M]._errors.push(X(z));J=J[M],B++}}};return Q(this),Y}static assert(W){if(!(W instanceof z1))throw Error(`Not a ZodError: ${W}`)}toString(){return this.message}get message(){return JSON.stringify(this.issues,_0.jsonStringifyReplacer,2)}get isEmpty(){return this.issues.length===0}flatten(W=(X)=>X.message){let X={},Y=[];for(let Q of this.issues)if(Q.path.length>0){let G=Q.path[0];X[G]=X[G]||[],X[G].push(W(Q))}else Y.push(W(Q));return{formErrors:Y,fieldErrors:X}}get formErrors(){return this.flatten()}}z1.create=(W)=>{return new z1(W)};var bY=(W,X)=>{let Y;switch(W.code){case p.invalid_type:if(W.received===a.undefined)Y="Required";else Y=`Expected ${W.expected}, received ${W.received}`;break;case p.invalid_literal:Y=`Invalid literal value, expected ${JSON.stringify(W.expected,_0.jsonStringifyReplacer)}`;break;case p.unrecognized_keys:Y=`Unrecognized key(s) in object: ${_0.joinValues(W.keys,", ")}`;break;case p.invalid_union:Y="Invalid input";break;case p.invalid_union_discriminator:Y=`Invalid discriminator value. Expected ${_0.joinValues(W.options)}`;break;case p.invalid_enum_value:Y=`Invalid enum value. Expected ${_0.joinValues(W.options)}, received '${W.received}'`;break;case p.invalid_arguments:Y="Invalid function arguments";break;case p.invalid_return_type:Y="Invalid function return type";break;case p.invalid_date:Y="Invalid date";break;case p.invalid_string:if(typeof W.validation==="object")if("includes"in W.validation){if(Y=`Invalid input: must include "${W.validation.includes}"`,typeof W.validation.position==="number")Y=`${Y} at one or more positions greater than or equal to ${W.validation.position}`}else if("startsWith"in W.validation)Y=`Invalid input: must start with "${W.validation.startsWith}"`;else if("endsWith"in W.validation)Y=`Invalid input: must end with "${W.validation.endsWith}"`;else _0.assertNever(W.validation);else if(W.validation!=="regex")Y=`Invalid ${W.validation}`;else Y="Invalid";break;case p.too_small:if(W.type==="array")Y=`Array must contain ${W.exact?"exactly":W.inclusive?"at least":"more than"} ${W.minimum} element(s)`;else if(W.type==="string")Y=`String must contain ${W.exact?"exactly":W.inclusive?"at least":"over"} ${W.minimum} character(s)`;else if(W.type==="number")Y=`Number must be ${W.exact?"exactly equal to ":W.inclusive?"greater than or equal to ":"greater than "}${W.minimum}`;else if(W.type==="bigint")Y=`Number must be ${W.exact?"exactly equal to ":W.inclusive?"greater than or equal to ":"greater than "}${W.minimum}`;else if(W.type==="date")Y=`Date must be ${W.exact?"exactly equal to ":W.inclusive?"greater than or equal to ":"greater than "}${new Date(Number(W.minimum))}`;else Y="Invalid input";break;case p.too_big:if(W.type==="array")Y=`Array must contain ${W.exact?"exactly":W.inclusive?"at most":"less than"} ${W.maximum} element(s)`;else if(W.type==="string")Y=`String must contain ${W.exact?"exactly":W.inclusive?"at most":"under"} ${W.maximum} character(s)`;else if(W.type==="number")Y=`Number must be ${W.exact?"exactly":W.inclusive?"less than or equal to":"less than"} ${W.maximum}`;else if(W.type==="bigint")Y=`BigInt must be ${W.exact?"exactly":W.inclusive?"less than or equal to":"less than"} ${W.maximum}`;else if(W.type==="date")Y=`Date must be ${W.exact?"exactly":W.inclusive?"smaller than or equal to":"smaller than"} ${new Date(Number(W.maximum))}`;else Y="Invalid input";break;case p.custom:Y="Invalid input";break;case p.invalid_intersection_types:Y="Intersection results could not be merged";break;case p.not_multiple_of:Y=`Number must be a multiple of ${W.multipleOf}`;break;case p.not_finite:Y="Number must be finite";break;default:Y=X.defaultError,_0.assertNever(W)}return{message:Y}},DW=bY,L6=DW;function SY(W){L6=W}function T8(){return L6}var k8=(W)=>{let{data:X,path:Y,errorMaps:Q,issueData:G}=W,z=[...Y,...G.path||[]],J={...G,path:z};if(G.message!==void 0)return{...G,path:z,message:G.message};let B="",M=Q.filter((q)=>!!q).slice().reverse();for(let q of M)B=q(J,{data:X,defaultError:B}).message;return{...G,path:z,message:B}},PY=[];function i(W,X){let Y=T8(),Q=k8({issueData:X,data:W.data,path:W.path,errorMaps:[W.common.contextualErrorMap,W.schemaErrorMap,Y,Y===DW?void 0:DW].filter((G)=>!!G)});W.common.issues.push(Q)}class s0{constructor(){this.value="valid"}dirty(){if(this.value==="valid")this.value="dirty"}abort(){if(this.value!=="aborted")this.value="aborted"}static mergeArray(W,X){let Y=[];for(let Q of X){if(Q.status==="aborted")return G0;if(Q.status==="dirty")W.dirty();Y.push(Q.value)}return{status:W.value,value:Y}}static async mergeObjectAsync(W,X){let Y=[];for(let Q of X){let G=await Q.key,z=await Q.value;Y.push({key:G,value:z})}return s0.mergeObjectSync(W,Y)}static mergeObjectSync(W,X){let Y={};for(let Q of X){let{key:G,value:z}=Q;if(G.status==="aborted")return G0;if(z.status==="aborted")return G0;if(G.status==="dirty")W.dirty();if(z.status==="dirty")W.dirty();if(G.value!=="__proto__"&&(typeof z.value<"u"||Q.alwaysSet))Y[G.value]=z.value}return{status:W.value,value:Y}}}var G0=Object.freeze({status:"aborted"}),wW=(W)=>({status:"dirty",value:W}),W1=(W)=>({status:"valid",value:W}),X9=(W)=>W.status==="aborted",J9=(W)=>W.status==="dirty",WW=(W)=>W.status==="valid",H8=(W)=>typeof Promise<"u"&&W instanceof Promise,e;(function(W){W.errToObj=(X)=>typeof X==="string"?{message:X}:X||{},W.toString=(X)=>typeof X==="string"?X:X?.message})(e||(e={}));class A1{constructor(W,X,Y,Q){this._cachedPath=[],this.parent=W,this.data=X,this._path=Y,this._key=Q}get path(){if(!this._cachedPath.length)if(Array.isArray(this._key))this._cachedPath.push(...this._path,...this._key);else this._cachedPath.push(...this._path,this._key);return this._cachedPath}}var c9=(W,X)=>{if(WW(X))return{success:!0,data:X.value};else{if(!W.common.issues.length)throw Error("Validation failed but no issues detected.");return{success:!1,get error(){if(this._error)return this._error;let Y=new z1(W.common.issues);return this._error=Y,this._error}}}};function j0(W){if(!W)return{};let{errorMap:X,invalid_type_error:Y,required_error:Q,description:G}=W;if(X&&(Y||Q))throw Error(`Can't use "invalid_type_error" or "required_error" in conjunction with custom error map.`);if(X)return{errorMap:X,description:G};return{errorMap:(J,B)=>{let{message:M}=W;if(J.code==="invalid_enum_value")return{message:M??B.defaultError};if(typeof B.data>"u")return{message:M??Q??B.defaultError};if(J.code!=="invalid_type")return{message:B.defaultError};return{message:M??Y??B.defaultError}},description:G}}class N0{get description(){return this._def.description}_getType(W){return f1(W.data)}_getOrReturnCtx(W,X){return X||{common:W.parent.common,data:W.data,parsedType:f1(W.data),schemaErrorMap:this._def.errorMap,path:W.path,parent:W.parent}}_processInputParams(W){return{status:new s0,ctx:{common:W.parent.common,data:W.data,parsedType:f1(W.data),schemaErrorMap:this._def.errorMap,path:W.path,parent:W.parent}}}_parseSync(W){let X=this._parse(W);if(H8(X))throw Error("Synchronous parse encountered promise.");return X}_parseAsync(W){let X=this._parse(W);return Promise.resolve(X)}parse(W,X){let Y=this.safeParse(W,X);if(Y.success)return Y.data;throw Y.error}safeParse(W,X){let Y={common:{issues:[],async:X?.async??!1,contextualErrorMap:X?.errorMap},path:X?.path||[],schemaErrorMap:this._def.errorMap,parent:null,data:W,parsedType:f1(W)},Q=this._parseSync({data:W,path:Y.path,parent:Y});return c9(Y,Q)}"~validate"(W){let X={common:{issues:[],async:!!this["~standard"].async},path:[],schemaErrorMap:this._def.errorMap,parent:null,data:W,parsedType:f1(W)};if(!this["~standard"].async)try{let Y=this._parseSync({data:W,path:[],parent:X});return WW(Y)?{value:Y.value}:{issues:X.common.issues}}catch(Y){if(Y?.message?.toLowerCase()?.includes("encountered"))this["~standard"].async=!0;X.common={issues:[],async:!0}}return this._parseAsync({data:W,path:[],parent:X}).then((Y)=>WW(Y)?{value:Y.value}:{issues:X.common.issues})}async parseAsync(W,X){let Y=await this.safeParseAsync(W,X);if(Y.success)return Y.data;throw Y.error}async safeParseAsync(W,X){let Y={common:{issues:[],contextualErrorMap:X?.errorMap,async:!0},path:X?.path||[],schemaErrorMap:this._def.errorMap,parent:null,data:W,parsedType:f1(W)},Q=this._parse({data:W,path:Y.path,parent:Y}),G=await(H8(Q)?Q:Promise.resolve(Q));return c9(Y,G)}refine(W,X){let Y=(Q)=>{if(typeof X==="string"||typeof X>"u")return{message:X};else if(typeof X==="function")return X(Q);else return X};return this._refinement((Q,G)=>{let z=W(Q),J=()=>G.addIssue({code:p.custom,...Y(Q)});if(typeof Promise<"u"&&z instanceof Promise)return z.then((B)=>{if(!B)return J(),!1;else return!0});if(!z)return J(),!1;else return!0})}refinement(W,X){return this._refinement((Y,Q)=>{if(!W(Y))return Q.addIssue(typeof X==="function"?X(Y,Q):X),!1;else return!0})}_refinement(W){return new M1({schema:this,typeName:z0.ZodEffects,effect:{type:"refinement",refinement:W}})}superRefine(W){return this._refinement(W)}constructor(W){this.spa=this.safeParseAsync,this._def=W,this.parse=this.parse.bind(this),this.safeParse=this.safeParse.bind(this),this.parseAsync=this.parseAsync.bind(this),this.safeParseAsync=this.safeParseAsync.bind(this),this.spa=this.spa.bind(this),this.refine=this.refine.bind(this),this.refinement=this.refinement.bind(this),this.superRefine=this.superRefine.bind(this),this.optional=this.optional.bind(this),this.nullable=this.nullable.bind(this),this.nullish=this.nullish.bind(this),this.array=this.array.bind(this),this.promise=this.promise.bind(this),this.or=this.or.bind(this),this.and=this.and.bind(this),this.transform=this.transform.bind(this),this.brand=this.brand.bind(this),this.default=this.default.bind(this),this.catch=this.catch.bind(this),this.describe=this.describe.bind(this),this.pipe=this.pipe.bind(this),this.readonly=this.readonly.bind(this),this.isNullable=this.isNullable.bind(this),this.isOptional=this.isOptional.bind(this),this["~standard"]={version:1,vendor:"zod",validate:(X)=>this["~validate"](X)}}optional(){return K1.create(this,this._def)}nullable(){return h1.create(this,this._def)}nullish(){return this.nullable().optional()}array(){return N1.create(this)}promise(){return YW.create(this,this._def)}or(W){return EW.create([this,W],this._def)}and(W){return bW.create(this,W,this._def)}transform(W){return new M1({...j0(this._def),schema:this,typeName:z0.ZodEffects,effect:{type:"transform",transform:W}})}default(W){let X=typeof W==="function"?W:()=>W;return new ZW({...j0(this._def),innerType:this,defaultValue:X,typeName:z0.ZodDefault})}brand(){return new y8({typeName:z0.ZodBranded,type:this,...j0(this._def)})}catch(W){let X=typeof W==="function"?W:()=>W;return new TW({...j0(this._def),innerType:this,catchValue:X,typeName:z0.ZodCatch})}describe(W){return new this.constructor({...this._def,description:W})}pipe(W){return N8.create(this,W)}readonly(){return kW.create(this)}isOptional(){return this.safeParse(void 0).success}isNullable(){return this.safeParse(null).success}}var vY=/^c[^\s-]{8,}$/i,ZY=/^[0-9a-z]+$/,TY=/^[0-9A-HJKMNP-TV-Z]{26}$/i,kY=/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/i,gY=/^[a-z0-9_-]{21}$/i,xY=/^[A-Za-z0-9-_]+\.[A-Za-z0-9-_]+\.[A-Za-z0-9-_]*$/,fY=/^[-+]?P(?!$)(?:(?:[-+]?\d+Y)|(?:[-+]?\d+[.,]\d+Y$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:(?:[-+]?\d+W)|(?:[-+]?\d+[.,]\d+W$))?(?:(?:[-+]?\d+D)|(?:[-+]?\d+[.,]\d+D$))?(?:T(?=[\d+-])(?:(?:[-+]?\d+H)|(?:[-+]?\d+[.,]\d+H$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:[-+]?\d+(?:[.,]\d+)?S)?)??$/,yY=/^(?!\.)(?!.*\.\.)([A-Z0-9_'+\-\.]*)[A-Z0-9_+-]@([A-Z0-9][A-Z0-9\-]*\.)+[A-Z]{2,}$/i,hY="^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$",t8,$Y=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,mY=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/(3[0-2]|[12]?[0-9])$/,lY=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))$/,pY=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,uY=/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/,nY=/^([0-9a-zA-Z-_]{4})*(([0-9a-zA-Z-_]{2}(==)?)|([0-9a-zA-Z-_]{3}(=)?))?$/,j6="((\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-((0[13578]|1[02])-(0[1-9]|[12]\\d|3[01])|(0[469]|11)-(0[1-9]|[12]\\d|30)|(02)-(0[1-9]|1\\d|2[0-8])))",cY=new RegExp(`^${j6}$`);function N6(W){let X="[0-5]\\d";if(W.precision)X=`${X}\\.\\d{${W.precision}}`;else if(W.precision==null)X=`${X}(\\.\\d+)?`;let Y=W.precision?"+":"?";return`([01]\\d|2[0-3]):[0-5]\\d(:${X})${Y}`}function dY(W){return new RegExp(`^${N6(W)}$`)}function K6(W){let X=`${j6}T${N6(W)}`,Y=[];if(Y.push(W.local?"Z?":"Z"),W.offset)Y.push("([+-]\\d{2}:?\\d{2})");return X=`${X}(${Y.join("|")})`,new RegExp(`^${X}$`)}function iY(W,X){if((X==="v4"||!X)&&$Y.test(W))return!0;if((X==="v6"||!X)&&lY.test(W))return!0;return!1}function oY(W,X){if(!xY.test(W))return!1;try{let[Y]=W.split(".");if(!Y)return!1;let Q=Y.replace(/-/g,"+").replace(/_/g,"/").padEnd(Y.length+(4-Y.length%4)%4,"="),G=JSON.parse(atob(Q));if(typeof G!=="object"||G===null)return!1;if("typ"in G&&G?.typ!=="JWT")return!1;if(!G.alg)return!1;if(X&&G.alg!==X)return!1;return!0}catch{return!1}}function rY(W,X){if((X==="v4"||!X)&&mY.test(W))return!0;if((X==="v6"||!X)&&pY.test(W))return!0;return!1}class j1 extends N0{_parse(W){if(this._def.coerce)W.data=String(W.data);if(this._getType(W)!==a.string){let G=this._getOrReturnCtx(W);return i(G,{code:p.invalid_type,expected:a.string,received:G.parsedType}),G0}let Y=new s0,Q=void 0;for(let G of this._def.checks)if(G.kind==="min"){if(W.data.length<G.value)Q=this._getOrReturnCtx(W,Q),i(Q,{code:p.too_small,minimum:G.value,type:"string",inclusive:!0,exact:!1,message:G.message}),Y.dirty()}else if(G.kind==="max"){if(W.data.length>G.value)Q=this._getOrReturnCtx(W,Q),i(Q,{code:p.too_big,maximum:G.value,type:"string",inclusive:!0,exact:!1,message:G.message}),Y.dirty()}else if(G.kind==="length"){let z=W.data.length>G.value,J=W.data.length<G.value;if(z||J){if(Q=this._getOrReturnCtx(W,Q),z)i(Q,{code:p.too_big,maximum:G.value,type:"string",inclusive:!0,exact:!0,message:G.message});else if(J)i(Q,{code:p.too_small,minimum:G.value,type:"string",inclusive:!0,exact:!0,message:G.message});Y.dirty()}}else if(G.kind==="email"){if(!yY.test(W.data))Q=this._getOrReturnCtx(W,Q),i(Q,{validation:"email",code:p.invalid_string,message:G.message}),Y.dirty()}else if(G.kind==="emoji"){if(!t8)t8=new RegExp(hY,"u");if(!t8.test(W.data))Q=this._getOrReturnCtx(W,Q),i(Q,{validation:"emoji",code:p.invalid_string,message:G.message}),Y.dirty()}else if(G.kind==="uuid"){if(!kY.test(W.data))Q=this._getOrReturnCtx(W,Q),i(Q,{validation:"uuid",code:p.invalid_string,message:G.message}),Y.dirty()}else if(G.kind==="nanoid"){if(!gY.test(W.data))Q=this._getOrReturnCtx(W,Q),i(Q,{validation:"nanoid",code:p.invalid_string,message:G.message}),Y.dirty()}else if(G.kind==="cuid"){if(!vY.test(W.data))Q=this._getOrReturnCtx(W,Q),i(Q,{validation:"cuid",code:p.invalid_string,message:G.message}),Y.dirty()}else if(G.kind==="cuid2"){if(!ZY.test(W.data))Q=this._getOrReturnCtx(W,Q),i(Q,{validation:"cuid2",code:p.invalid_string,message:G.message}),Y.dirty()}else if(G.kind==="ulid"){if(!TY.test(W.data))Q=this._getOrReturnCtx(W,Q),i(Q,{validation:"ulid",code:p.invalid_string,message:G.message}),Y.dirty()}else if(G.kind==="url")try{new URL(W.data)}catch{Q=this._getOrReturnCtx(W,Q),i(Q,{validation:"url",code:p.invalid_string,message:G.message}),Y.dirty()}else if(G.kind==="regex"){if(G.regex.lastIndex=0,!G.regex.test(W.data))Q=this._getOrReturnCtx(W,Q),i(Q,{validation:"regex",code:p.invalid_string,message:G.message}),Y.dirty()}else if(G.kind==="trim")W.data=W.data.trim();else if(G.kind==="includes"){if(!W.data.includes(G.value,G.position))Q=this._getOrReturnCtx(W,Q),i(Q,{code:p.invalid_string,validation:{includes:G.value,position:G.position},message:G.message}),Y.dirty()}else if(G.kind==="toLowerCase")W.data=W.data.toLowerCase();else if(G.kind==="toUpperCase")W.data=W.data.toUpperCase();else if(G.kind==="startsWith"){if(!W.data.startsWith(G.value))Q=this._getOrReturnCtx(W,Q),i(Q,{code:p.invalid_string,validation:{startsWith:G.value},message:G.message}),Y.dirty()}else if(G.kind==="endsWith"){if(!W.data.endsWith(G.value))Q=this._getOrReturnCtx(W,Q),i(Q,{code:p.invalid_string,validation:{endsWith:G.value},message:G.message}),Y.dirty()}else if(G.kind==="datetime"){if(!K6(G).test(W.data))Q=this._getOrReturnCtx(W,Q),i(Q,{code:p.invalid_string,validation:"datetime",message:G.message}),Y.dirty()}else if(G.kind==="date"){if(!cY.test(W.data))Q=this._getOrReturnCtx(W,Q),i(Q,{code:p.invalid_string,validation:"date",message:G.message}),Y.dirty()}else if(G.kind==="time"){if(!dY(G).test(W.data))Q=this._getOrReturnCtx(W,Q),i(Q,{code:p.invalid_string,validation:"time",message:G.message}),Y.dirty()}else if(G.kind==="duration"){if(!fY.test(W.data))Q=this._getOrReturnCtx(W,Q),i(Q,{validation:"duration",code:p.invalid_string,message:G.message}),Y.dirty()}else if(G.kind==="ip"){if(!iY(W.data,G.version))Q=this._getOrReturnCtx(W,Q),i(Q,{validation:"ip",code:p.invalid_string,message:G.message}),Y.dirty()}else if(G.kind==="jwt"){if(!oY(W.data,G.alg))Q=this._getOrReturnCtx(W,Q),i(Q,{validation:"jwt",code:p.invalid_string,message:G.message}),Y.dirty()}else if(G.kind==="cidr"){if(!rY(W.data,G.version))Q=this._getOrReturnCtx(W,Q),i(Q,{validation:"cidr",code:p.invalid_string,message:G.message}),Y.dirty()}else if(G.kind==="base64"){if(!uY.test(W.data))Q=this._getOrReturnCtx(W,Q),i(Q,{validation:"base64",code:p.invalid_string,message:G.message}),Y.dirty()}else if(G.kind==="base64url"){if(!nY.test(W.data))Q=this._getOrReturnCtx(W,Q),i(Q,{validation:"base64url",code:p.invalid_string,message:G.message}),Y.dirty()}else _0.assertNever(G);return{status:Y.value,value:W.data}}_regex(W,X,Y){return this.refinement((Q)=>W.test(Q),{validation:X,code:p.invalid_string,...e.errToObj(Y)})}_addCheck(W){return new j1({...this._def,checks:[...this._def.checks,W]})}email(W){return this._addCheck({kind:"email",...e.errToObj(W)})}url(W){return this._addCheck({kind:"url",...e.errToObj(W)})}emoji(W){return this._addCheck({kind:"emoji",...e.errToObj(W)})}uuid(W){return this._addCheck({kind:"uuid",...e.errToObj(W)})}nanoid(W){return this._addCheck({kind:"nanoid",...e.errToObj(W)})}cuid(W){return this._addCheck({kind:"cuid",...e.errToObj(W)})}cuid2(W){return this._addCheck({kind:"cuid2",...e.errToObj(W)})}ulid(W){return this._addCheck({kind:"ulid",...e.errToObj(W)})}base64(W){return this._addCheck({kind:"base64",...e.errToObj(W)})}base64url(W){return this._addCheck({kind:"base64url",...e.errToObj(W)})}jwt(W){return this._addCheck({kind:"jwt",...e.errToObj(W)})}ip(W){return this._addCheck({kind:"ip",...e.errToObj(W)})}cidr(W){return this._addCheck({kind:"cidr",...e.errToObj(W)})}datetime(W){if(typeof W==="string")return this._addCheck({kind:"datetime",precision:null,offset:!1,local:!1,message:W});return this._addCheck({kind:"datetime",precision:typeof W?.precision>"u"?null:W?.precision,offset:W?.offset??!1,local:W?.local??!1,...e.errToObj(W?.message)})}date(W){return this._addCheck({kind:"date",message:W})}time(W){if(typeof W==="string")return this._addCheck({kind:"time",precision:null,message:W});return this._addCheck({kind:"time",precision:typeof W?.precision>"u"?null:W?.precision,...e.errToObj(W?.message)})}duration(W){return this._addCheck({kind:"duration",...e.errToObj(W)})}regex(W,X){return this._addCheck({kind:"regex",regex:W,...e.errToObj(X)})}includes(W,X){return this._addCheck({kind:"includes",value:W,position:X?.position,...e.errToObj(X?.message)})}startsWith(W,X){return this._addCheck({kind:"startsWith",value:W,...e.errToObj(X)})}endsWith(W,X){return this._addCheck({kind:"endsWith",value:W,...e.errToObj(X)})}min(W,X){return this._addCheck({kind:"min",value:W,...e.errToObj(X)})}max(W,X){return this._addCheck({kind:"max",value:W,...e.errToObj(X)})}length(W,X){return this._addCheck({kind:"length",value:W,...e.errToObj(X)})}nonempty(W){return this.min(1,e.errToObj(W))}trim(){return new j1({...this._def,checks:[...this._def.checks,{kind:"trim"}]})}toLowerCase(){return new j1({...this._def,checks:[...this._def.checks,{kind:"toLowerCase"}]})}toUpperCase(){return new j1({...this._def,checks:[...this._def.checks,{kind:"toUpperCase"}]})}get isDatetime(){return!!this._def.checks.find((W)=>W.kind==="datetime")}get isDate(){return!!this._def.checks.find((W)=>W.kind==="date")}get isTime(){return!!this._def.checks.find((W)=>W.kind==="time")}get isDuration(){return!!this._def.checks.find((W)=>W.kind==="duration")}get isEmail(){return!!this._def.checks.find((W)=>W.kind==="email")}get isURL(){return!!this._def.checks.find((W)=>W.kind==="url")}get isEmoji(){return!!this._def.checks.find((W)=>W.kind==="emoji")}get isUUID(){return!!this._def.checks.find((W)=>W.kind==="uuid")}get isNANOID(){return!!this._def.checks.find((W)=>W.kind==="nanoid")}get isCUID(){return!!this._def.checks.find((W)=>W.kind==="cuid")}get isCUID2(){return!!this._def.checks.find((W)=>W.kind==="cuid2")}get isULID(){return!!this._def.checks.find((W)=>W.kind==="ulid")}get isIP(){return!!this._def.checks.find((W)=>W.kind==="ip")}get isCIDR(){return!!this._def.checks.find((W)=>W.kind==="cidr")}get isBase64(){return!!this._def.checks.find((W)=>W.kind==="base64")}get isBase64url(){return!!this._def.checks.find((W)=>W.kind==="base64url")}get minLength(){let W=null;for(let X of this._def.checks)if(X.kind==="min"){if(W===null||X.value>W)W=X.value}return W}get maxLength(){let W=null;for(let X of this._def.checks)if(X.kind==="max"){if(W===null||X.value<W)W=X.value}return W}}j1.create=(W)=>{return new j1({checks:[],typeName:z0.ZodString,coerce:W?.coerce??!1,...j0(W)})};function aY(W,X){let Y=(W.toString().split(".")[1]||"").length,Q=(X.toString().split(".")[1]||"").length,G=Y>Q?Y:Q,z=Number.parseInt(W.toFixed(G).replace(".","")),J=Number.parseInt(X.toFixed(G).replace(".",""));return z%J/10**G}class u1 extends N0{constructor(){super(...arguments);this.min=this.gte,this.max=this.lte,this.step=this.multipleOf}_parse(W){if(this._def.coerce)W.data=Number(W.data);if(this._getType(W)!==a.number){let G=this._getOrReturnCtx(W);return i(G,{code:p.invalid_type,expected:a.number,received:G.parsedType}),G0}let Y=void 0,Q=new s0;for(let G of this._def.checks)if(G.kind==="int"){if(!_0.isInteger(W.data))Y=this._getOrReturnCtx(W,Y),i(Y,{code:p.invalid_type,expected:"integer",received:"float",message:G.message}),Q.dirty()}else if(G.kind==="min"){if(G.inclusive?W.data<G.value:W.data<=G.value)Y=this._getOrReturnCtx(W,Y),i(Y,{code:p.too_small,minimum:G.value,type:"number",inclusive:G.inclusive,exact:!1,message:G.message}),Q.dirty()}else if(G.kind==="max"){if(G.inclusive?W.data>G.value:W.data>=G.value)Y=this._getOrReturnCtx(W,Y),i(Y,{code:p.too_big,maximum:G.value,type:"number",inclusive:G.inclusive,exact:!1,message:G.message}),Q.dirty()}else if(G.kind==="multipleOf"){if(aY(W.data,G.value)!==0)Y=this._getOrReturnCtx(W,Y),i(Y,{code:p.not_multiple_of,multipleOf:G.value,message:G.message}),Q.dirty()}else if(G.kind==="finite"){if(!Number.isFinite(W.data))Y=this._getOrReturnCtx(W,Y),i(Y,{code:p.not_finite,message:G.message}),Q.dirty()}else _0.assertNever(G);return{status:Q.value,value:W.data}}gte(W,X){return this.setLimit("min",W,!0,e.toString(X))}gt(W,X){return this.setLimit("min",W,!1,e.toString(X))}lte(W,X){return this.setLimit("max",W,!0,e.toString(X))}lt(W,X){return this.setLimit("max",W,!1,e.toString(X))}setLimit(W,X,Y,Q){return new u1({...this._def,checks:[...this._def.checks,{kind:W,value:X,inclusive:Y,message:e.toString(Q)}]})}_addCheck(W){return new u1({...this._def,checks:[...this._def.checks,W]})}int(W){return this._addCheck({kind:"int",message:e.toString(W)})}positive(W){return this._addCheck({kind:"min",value:0,inclusive:!1,message:e.toString(W)})}negative(W){return this._addCheck({kind:"max",value:0,inclusive:!1,message:e.toString(W)})}nonpositive(W){return this._addCheck({kind:"max",value:0,inclusive:!0,message:e.toString(W)})}nonnegative(W){return this._addCheck({kind:"min",value:0,inclusive:!0,message:e.toString(W)})}multipleOf(W,X){return this._addCheck({kind:"multipleOf",value:W,message:e.toString(X)})}finite(W){return this._addCheck({kind:"finite",message:e.toString(W)})}safe(W){return this._addCheck({kind:"min",inclusive:!0,value:Number.MIN_SAFE_INTEGER,message:e.toString(W)})._addCheck({kind:"max",inclusive:!0,value:Number.MAX_SAFE_INTEGER,message:e.toString(W)})}get minValue(){let W=null;for(let X of this._def.checks)if(X.kind==="min"){if(W===null||X.value>W)W=X.value}return W}get maxValue(){let W=null;for(let X of this._def.checks)if(X.kind==="max"){if(W===null||X.value<W)W=X.value}return W}get isInt(){return!!this._def.checks.find((W)=>W.kind==="int"||W.kind==="multipleOf"&&_0.isInteger(W.value))}get isFinite(){let W=null,X=null;for(let Y of this._def.checks)if(Y.kind==="finite"||Y.kind==="int"||Y.kind==="multipleOf")return!0;else if(Y.kind==="min"){if(X===null||Y.value>X)X=Y.value}else if(Y.kind==="max"){if(W===null||Y.value<W)W=Y.value}return Number.isFinite(X)&&Number.isFinite(W)}}u1.create=(W)=>{return new u1({checks:[],typeName:z0.ZodNumber,coerce:W?.coerce||!1,...j0(W)})};class n1 extends N0{constructor(){super(...arguments);this.min=this.gte,this.max=this.lte}_parse(W){if(this._def.coerce)try{W.data=BigInt(W.data)}catch{return this._getInvalidInput(W)}if(this._getType(W)!==a.bigint)return this._getInvalidInput(W);let Y=void 0,Q=new s0;for(let G of this._def.checks)if(G.kind==="min"){if(G.inclusive?W.data<G.value:W.data<=G.value)Y=this._getOrReturnCtx(W,Y),i(Y,{code:p.too_small,type:"bigint",minimum:G.value,inclusive:G.inclusive,message:G.message}),Q.dirty()}else if(G.kind==="max"){if(G.inclusive?W.data>G.value:W.data>=G.value)Y=this._getOrReturnCtx(W,Y),i(Y,{code:p.too_big,type:"bigint",maximum:G.value,inclusive:G.inclusive,message:G.message}),Q.dirty()}else if(G.kind==="multipleOf"){if(W.data%G.value!==BigInt(0))Y=this._getOrReturnCtx(W,Y),i(Y,{code:p.not_multiple_of,multipleOf:G.value,message:G.message}),Q.dirty()}else _0.assertNever(G);return{status:Q.value,value:W.data}}_getInvalidInput(W){let X=this._getOrReturnCtx(W);return i(X,{code:p.invalid_type,expected:a.bigint,received:X.parsedType}),G0}gte(W,X){return this.setLimit("min",W,!0,e.toString(X))}gt(W,X){return this.setLimit("min",W,!1,e.toString(X))}lte(W,X){return this.setLimit("max",W,!0,e.toString(X))}lt(W,X){return this.setLimit("max",W,!1,e.toString(X))}setLimit(W,X,Y,Q){return new n1({...this._def,checks:[...this._def.checks,{kind:W,value:X,inclusive:Y,message:e.toString(Q)}]})}_addCheck(W){return new n1({...this._def,checks:[...this._def.checks,W]})}positive(W){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!1,message:e.toString(W)})}negative(W){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!1,message:e.toString(W)})}nonpositive(W){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!0,message:e.toString(W)})}nonnegative(W){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!0,message:e.toString(W)})}multipleOf(W,X){return this._addCheck({kind:"multipleOf",value:W,message:e.toString(X)})}get minValue(){let W=null;for(let X of this._def.checks)if(X.kind==="min"){if(W===null||X.value>W)W=X.value}return W}get maxValue(){let W=null;for(let X of this._def.checks)if(X.kind==="max"){if(W===null||X.value<W)W=X.value}return W}}n1.create=(W)=>{return new n1({checks:[],typeName:z0.ZodBigInt,coerce:W?.coerce??!1,...j0(W)})};class _W extends N0{_parse(W){if(this._def.coerce)W.data=Boolean(W.data);if(this._getType(W)!==a.boolean){let Y=this._getOrReturnCtx(W);return i(Y,{code:p.invalid_type,expected:a.boolean,received:Y.parsedType}),G0}return W1(W.data)}}_W.create=(W)=>{return new _W({typeName:z0.ZodBoolean,coerce:W?.coerce||!1,...j0(W)})};class QW extends N0{_parse(W){if(this._def.coerce)W.data=new Date(W.data);if(this._getType(W)!==a.date){let G=this._getOrReturnCtx(W);return i(G,{code:p.invalid_type,expected:a.date,received:G.parsedType}),G0}if(Number.isNaN(W.data.getTime())){let G=this._getOrReturnCtx(W);return i(G,{code:p.invalid_date}),G0}let Y=new s0,Q=void 0;for(let G of this._def.checks)if(G.kind==="min"){if(W.data.getTime()<G.value)Q=this._getOrReturnCtx(W,Q),i(Q,{code:p.too_small,message:G.message,inclusive:!0,exact:!1,minimum:G.value,type:"date"}),Y.dirty()}else if(G.kind==="max"){if(W.data.getTime()>G.value)Q=this._getOrReturnCtx(W,Q),i(Q,{code:p.too_big,message:G.message,inclusive:!0,exact:!1,maximum:G.value,type:"date"}),Y.dirty()}else _0.assertNever(G);return{status:Y.value,value:new Date(W.data.getTime())}}_addCheck(W){return new QW({...this._def,checks:[...this._def.checks,W]})}min(W,X){return this._addCheck({kind:"min",value:W.getTime(),message:e.toString(X)})}max(W,X){return this._addCheck({kind:"max",value:W.getTime(),message:e.toString(X)})}get minDate(){let W=null;for(let X of this._def.checks)if(X.kind==="min"){if(W===null||X.value>W)W=X.value}return W!=null?new Date(W):null}get maxDate(){let W=null;for(let X of this._def.checks)if(X.kind==="max"){if(W===null||X.value<W)W=X.value}return W!=null?new Date(W):null}}QW.create=(W)=>{return new QW({checks:[],coerce:W?.coerce||!1,typeName:z0.ZodDate,...j0(W)})};class q8 extends N0{_parse(W){if(this._getType(W)!==a.symbol){let Y=this._getOrReturnCtx(W);return i(Y,{code:p.invalid_type,expected:a.symbol,received:Y.parsedType}),G0}return W1(W.data)}}q8.create=(W)=>{return new q8({typeName:z0.ZodSymbol,...j0(W)})};class IW extends N0{_parse(W){if(this._getType(W)!==a.undefined){let Y=this._getOrReturnCtx(W);return i(Y,{code:p.invalid_type,expected:a.undefined,received:Y.parsedType}),G0}return W1(W.data)}}IW.create=(W)=>{return new IW({typeName:z0.ZodUndefined,...j0(W)})};class CW extends N0{_parse(W){if(this._getType(W)!==a.null){let Y=this._getOrReturnCtx(W);return i(Y,{code:p.invalid_type,expected:a.null,received:Y.parsedType}),G0}return W1(W.data)}}CW.create=(W)=>{return new CW({typeName:z0.ZodNull,...j0(W)})};class XW extends N0{constructor(){super(...arguments);this._any=!0}_parse(W){return W1(W.data)}}XW.create=(W)=>{return new XW({typeName:z0.ZodAny,...j0(W)})};class p1 extends N0{constructor(){super(...arguments);this._unknown=!0}_parse(W){return W1(W.data)}}p1.create=(W)=>{return new p1({typeName:z0.ZodUnknown,...j0(W)})};class C1 extends N0{_parse(W){let X=this._getOrReturnCtx(W);return i(X,{code:p.invalid_type,expected:a.never,received:X.parsedType}),G0}}C1.create=(W)=>{return new C1({typeName:z0.ZodNever,...j0(W)})};class M8 extends N0{_parse(W){if(this._getType(W)!==a.undefined){let Y=this._getOrReturnCtx(W);return i(Y,{code:p.invalid_type,expected:a.void,received:Y.parsedType}),G0}return W1(W.data)}}M8.create=(W)=>{return new M8({typeName:z0.ZodVoid,...j0(W)})};class N1 extends N0{_parse(W){let{ctx:X,status:Y}=this._processInputParams(W),Q=this._def;if(X.parsedType!==a.array)return i(X,{code:p.invalid_type,expected:a.array,received:X.parsedType}),G0;if(Q.exactLength!==null){let z=X.data.length>Q.exactLength.value,J=X.data.length<Q.exactLength.value;if(z||J)i(X,{code:z?p.too_big:p.too_small,minimum:J?Q.exactLength.value:void 0,maximum:z?Q.exactLength.value:void 0,type:"array",inclusive:!0,exact:!0,message:Q.exactLength.message}),Y.dirty()}if(Q.minLength!==null){if(X.data.length<Q.minLength.value)i(X,{code:p.too_small,minimum:Q.minLength.value,type:"array",inclusive:!0,exact:!1,message:Q.minLength.message}),Y.dirty()}if(Q.maxLength!==null){if(X.data.length>Q.maxLength.value)i(X,{code:p.too_big,maximum:Q.maxLength.value,type:"array",inclusive:!0,exact:!1,message:Q.maxLength.message}),Y.dirty()}if(X.common.async)return Promise.all([...X.data].map((z,J)=>{return Q.type._parseAsync(new A1(X,z,X.path,J))})).then((z)=>{return s0.mergeArray(Y,z)});let G=[...X.data].map((z,J)=>{return Q.type._parseSync(new A1(X,z,X.path,J))});return s0.mergeArray(Y,G)}get element(){return this._def.type}min(W,X){return new N1({...this._def,minLength:{value:W,message:e.toString(X)}})}max(W,X){return new N1({...this._def,maxLength:{value:W,message:e.toString(X)}})}length(W,X){return new N1({...this._def,exactLength:{value:W,message:e.toString(X)}})}nonempty(W){return this.min(1,W)}}N1.create=(W,X)=>{return new N1({type:W,minLength:null,maxLength:null,exactLength:null,typeName:z0.ZodArray,...j0(X)})};function VW(W){if(W instanceof p0){let X={};for(let Y in W.shape){let Q=W.shape[Y];X[Y]=K1.create(VW(Q))}return new p0({...W._def,shape:()=>X})}else if(W instanceof N1)return new N1({...W._def,type:VW(W.element)});else if(W instanceof K1)return K1.create(VW(W.unwrap()));else if(W instanceof h1)return h1.create(VW(W.unwrap()));else if(W instanceof E1)return E1.create(W.items.map((X)=>VW(X)));else return W}class p0 extends N0{constructor(){super(...arguments);this._cached=null,this.nonstrict=this.passthrough,this.augment=this.extend}_getCached(){if(this._cached!==null)return this._cached;let W=this._def.shape(),X=_0.objectKeys(W);return this._cached={shape:W,keys:X},this._cached}_parse(W){if(this._getType(W)!==a.object){let M=this._getOrReturnCtx(W);return i(M,{code:p.invalid_type,expected:a.object,received:M.parsedType}),G0}let{status:Y,ctx:Q}=this._processInputParams(W),{shape:G,keys:z}=this._getCached(),J=[];if(!(this._def.catchall instanceof C1&&this._def.unknownKeys==="strip")){for(let M in Q.data)if(!z.includes(M))J.push(M)}let B=[];for(let M of z){let q=G[M],j=Q.data[M];B.push({key:{status:"valid",value:M},value:q._parse(new A1(Q,j,Q.path,M)),alwaysSet:M in Q.data})}if(this._def.catchall instanceof C1){let M=this._def.unknownKeys;if(M==="passthrough")for(let q of J)B.push({key:{status:"valid",value:q},value:{status:"valid",value:Q.data[q]}});else if(M==="strict"){if(J.length>0)i(Q,{code:p.unrecognized_keys,keys:J}),Y.dirty()}else if(M==="strip");else throw Error("Internal ZodObject error: invalid unknownKeys value.")}else{let M=this._def.catchall;for(let q of J){let j=Q.data[q];B.push({key:{status:"valid",value:q},value:M._parse(new A1(Q,j,Q.path,q)),alwaysSet:q in Q.data})}}if(Q.common.async)return Promise.resolve().then(async()=>{let M=[];for(let q of B){let j=await q.key,I=await q.value;M.push({key:j,value:I,alwaysSet:q.alwaysSet})}return M}).then((M)=>{return s0.mergeObjectSync(Y,M)});else return s0.mergeObjectSync(Y,B)}get shape(){return this._def.shape()}strict(W){return e.errToObj,new p0({...this._def,unknownKeys:"strict",...W!==void 0?{errorMap:(X,Y)=>{let Q=this._def.errorMap?.(X,Y).message??Y.defaultError;if(X.code==="unrecognized_keys")return{message:e.errToObj(W).message??Q};return{message:Q}}}:{}})}strip(){return new p0({...this._def,unknownKeys:"strip"})}passthrough(){return new p0({...this._def,unknownKeys:"passthrough"})}extend(W){return new p0({...this._def,shape:()=>({...this._def.shape(),...W})})}merge(W){return new p0({unknownKeys:W._def.unknownKeys,catchall:W._def.catchall,shape:()=>({...this._def.shape(),...W._def.shape()}),typeName:z0.ZodObject})}setKey(W,X){return this.augment({[W]:X})}catchall(W){return new p0({...this._def,catchall:W})}pick(W){let X={};for(let Y of _0.objectKeys(W))if(W[Y]&&this.shape[Y])X[Y]=this.shape[Y];return new p0({...this._def,shape:()=>X})}omit(W){let X={};for(let Y of _0.objectKeys(this.shape))if(!W[Y])X[Y]=this.shape[Y];return new p0({...this._def,shape:()=>X})}deepPartial(){return VW(this)}partial(W){let X={};for(let Y of _0.objectKeys(this.shape)){let Q=this.shape[Y];if(W&&!W[Y])X[Y]=Q;else X[Y]=Q.optional()}return new p0({...this._def,shape:()=>X})}required(W){let X={};for(let Y of _0.objectKeys(this.shape))if(W&&!W[Y])X[Y]=this.shape[Y];else{let G=this.shape[Y];while(G instanceof K1)G=G._def.innerType;X[Y]=G}return new p0({...this._def,shape:()=>X})}keyof(){return A6(_0.objectKeys(this.shape))}}p0.create=(W,X)=>{return new p0({shape:()=>W,unknownKeys:"strip",catchall:C1.create(),typeName:z0.ZodObject,...j0(X)})};p0.strictCreate=(W,X)=>{return new p0({shape:()=>W,unknownKeys:"strict",catchall:C1.create(),typeName:z0.ZodObject,...j0(X)})};p0.lazycreate=(W,X)=>{return new p0({shape:W,unknownKeys:"strip",catchall:C1.create(),typeName:z0.ZodObject,...j0(X)})};class EW extends N0{_parse(W){let{ctx:X}=this._processInputParams(W),Y=this._def.options;function Q(G){for(let J of G)if(J.result.status==="valid")return J.result;for(let J of G)if(J.result.status==="dirty")return X.common.issues.push(...J.ctx.common.issues),J.result;let z=G.map((J)=>new z1(J.ctx.common.issues));return i(X,{code:p.invalid_union,unionErrors:z}),G0}if(X.common.async)return Promise.all(Y.map(async(G)=>{let z={...X,common:{...X.common,issues:[]},parent:null};return{result:await G._parseAsync({data:X.data,path:X.path,parent:z}),ctx:z}})).then(Q);else{let G=void 0,z=[];for(let B of Y){let M={...X,common:{...X.common,issues:[]},parent:null},q=B._parseSync({data:X.data,path:X.path,parent:M});if(q.status==="valid")return q;else if(q.status==="dirty"&&!G)G={result:q,ctx:M};if(M.common.issues.length)z.push(M.common.issues)}if(G)return X.common.issues.push(...G.ctx.common.issues),G.result;let J=z.map((B)=>new z1(B));return i(X,{code:p.invalid_union,unionErrors:J}),G0}}get options(){return this._def.options}}EW.create=(W,X)=>{return new EW({options:W,typeName:z0.ZodUnion,...j0(X)})};var x1=(W)=>{if(W instanceof SW)return x1(W.schema);else if(W instanceof M1)return x1(W.innerType());else if(W instanceof PW)return[W.value];else if(W instanceof c1)return W.options;else if(W instanceof vW)return _0.objectValues(W.enum);else if(W instanceof ZW)return x1(W._def.innerType);else if(W instanceof IW)return[void 0];else if(W instanceof CW)return[null];else if(W instanceof K1)return[void 0,...x1(W.unwrap())];else if(W instanceof h1)return[null,...x1(W.unwrap())];else if(W instanceof y8)return x1(W.unwrap());else if(W instanceof kW)return x1(W.unwrap());else if(W instanceof TW)return x1(W._def.innerType);else return[]};class f8 extends N0{_parse(W){let{ctx:X}=this._processInputParams(W);if(X.parsedType!==a.object)return i(X,{code:p.invalid_type,expected:a.object,received:X.parsedType}),G0;let Y=this.discriminator,Q=X.data[Y],G=this.optionsMap.get(Q);if(!G)return i(X,{code:p.invalid_union_discriminator,options:Array.from(this.optionsMap.keys()),path:[Y]}),G0;if(X.common.async)return G._parseAsync({data:X.data,path:X.path,parent:X});else return G._parseSync({data:X.data,path:X.path,parent:X})}get discriminator(){return this._def.discriminator}get options(){return this._def.options}get optionsMap(){return this._def.optionsMap}static create(W,X,Y){let Q=new Map;for(let G of X){let z=x1(G.shape[W]);if(!z.length)throw Error(`A discriminator value for key \`${W}\` could not be extracted from all schema options`);for(let J of z){if(Q.has(J))throw Error(`Discriminator property ${String(W)} has duplicate value ${String(J)}`);Q.set(J,G)}}return new f8({typeName:z0.ZodDiscriminatedUnion,discriminator:W,options:X,optionsMap:Q,...j0(Y)})}}function Y9(W,X){let Y=f1(W),Q=f1(X);if(W===X)return{valid:!0,data:W};else if(Y===a.object&&Q===a.object){let G=_0.objectKeys(X),z=_0.objectKeys(W).filter((B)=>G.indexOf(B)!==-1),J={...W,...X};for(let B of z){let M=Y9(W[B],X[B]);if(!M.valid)return{valid:!1};J[B]=M.data}return{valid:!0,data:J}}else if(Y===a.array&&Q===a.array){if(W.length!==X.length)return{valid:!1};let G=[];for(let z=0;z<W.length;z++){let J=W[z],B=X[z],M=Y9(J,B);if(!M.valid)return{valid:!1};G.push(M.data)}return{valid:!0,data:G}}else if(Y===a.date&&Q===a.date&&+W===+X)return{valid:!0,data:W};else return{valid:!1}}class bW extends N0{_parse(W){let{status:X,ctx:Y}=this._processInputParams(W),Q=(G,z)=>{if(X9(G)||X9(z))return G0;let J=Y9(G.value,z.value);if(!J.valid)return i(Y,{code:p.invalid_intersection_types}),G0;if(J9(G)||J9(z))X.dirty();return{status:X.value,value:J.data}};if(Y.common.async)return Promise.all([this._def.left._parseAsync({data:Y.data,path:Y.path,parent:Y}),this._def.right._parseAsync({data:Y.data,path:Y.path,parent:Y})]).then(([G,z])=>Q(G,z));else return Q(this._def.left._parseSync({data:Y.data,path:Y.path,parent:Y}),this._def.right._parseSync({data:Y.data,path:Y.path,parent:Y}))}}bW.create=(W,X,Y)=>{return new bW({left:W,right:X,typeName:z0.ZodIntersection,...j0(Y)})};class E1 extends N0{_parse(W){let{status:X,ctx:Y}=this._processInputParams(W);if(Y.parsedType!==a.array)return i(Y,{code:p.invalid_type,expected:a.array,received:Y.parsedType}),G0;if(Y.data.length<this._def.items.length)return i(Y,{code:p.too_small,minimum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),G0;if(!this._def.rest&&Y.data.length>this._def.items.length)i(Y,{code:p.too_big,maximum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),X.dirty();let G=[...Y.data].map((z,J)=>{let B=this._def.items[J]||this._def.rest;if(!B)return null;return B._parse(new A1(Y,z,Y.path,J))}).filter((z)=>!!z);if(Y.common.async)return Promise.all(G).then((z)=>{return s0.mergeArray(X,z)});else return s0.mergeArray(X,G)}get items(){return this._def.items}rest(W){return new E1({...this._def,rest:W})}}E1.create=(W,X)=>{if(!Array.isArray(W))throw Error("You must pass an array of schemas to z.tuple([ ... ])");return new E1({items:W,typeName:z0.ZodTuple,rest:null,...j0(X)})};class U8 extends N0{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(W){let{status:X,ctx:Y}=this._processInputParams(W);if(Y.parsedType!==a.object)return i(Y,{code:p.invalid_type,expected:a.object,received:Y.parsedType}),G0;let Q=[],G=this._def.keyType,z=this._def.valueType;for(let J in Y.data)Q.push({key:G._parse(new A1(Y,J,Y.path,J)),value:z._parse(new A1(Y,Y.data[J],Y.path,J)),alwaysSet:J in Y.data});if(Y.common.async)return s0.mergeObjectAsync(X,Q);else return s0.mergeObjectSync(X,Q)}get element(){return this._def.valueType}static create(W,X,Y){if(X instanceof N0)return new U8({keyType:W,valueType:X,typeName:z0.ZodRecord,...j0(Y)});return new U8({keyType:j1.create(),valueType:W,typeName:z0.ZodRecord,...j0(X)})}}class F8 extends N0{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(W){let{status:X,ctx:Y}=this._processInputParams(W);if(Y.parsedType!==a.map)return i(Y,{code:p.invalid_type,expected:a.map,received:Y.parsedType}),G0;let Q=this._def.keyType,G=this._def.valueType,z=[...Y.data.entries()].map(([J,B],M)=>{return{key:Q._parse(new A1(Y,J,Y.path,[M,"key"])),value:G._parse(new A1(Y,B,Y.path,[M,"value"]))}});if(Y.common.async){let J=new Map;return Promise.resolve().then(async()=>{for(let B of z){let M=await B.key,q=await B.value;if(M.status==="aborted"||q.status==="aborted")return G0;if(M.status==="dirty"||q.status==="dirty")X.dirty();J.set(M.value,q.value)}return{status:X.value,value:J}})}else{let J=new Map;for(let B of z){let{key:M,value:q}=B;if(M.status==="aborted"||q.status==="aborted")return G0;if(M.status==="dirty"||q.status==="dirty")X.dirty();J.set(M.value,q.value)}return{status:X.value,value:J}}}}F8.create=(W,X,Y)=>{return new F8({valueType:X,keyType:W,typeName:z0.ZodMap,...j0(Y)})};class JW extends N0{_parse(W){let{status:X,ctx:Y}=this._processInputParams(W);if(Y.parsedType!==a.set)return i(Y,{code:p.invalid_type,expected:a.set,received:Y.parsedType}),G0;let Q=this._def;if(Q.minSize!==null){if(Y.data.size<Q.minSize.value)i(Y,{code:p.too_small,minimum:Q.minSize.value,type:"set",inclusive:!0,exact:!1,message:Q.minSize.message}),X.dirty()}if(Q.maxSize!==null){if(Y.data.size>Q.maxSize.value)i(Y,{code:p.too_big,maximum:Q.maxSize.value,type:"set",inclusive:!0,exact:!1,message:Q.maxSize.message}),X.dirty()}let G=this._def.valueType;function z(B){let M=new Set;for(let q of B){if(q.status==="aborted")return G0;if(q.status==="dirty")X.dirty();M.add(q.value)}return{status:X.value,value:M}}let J=[...Y.data.values()].map((B,M)=>G._parse(new A1(Y,B,Y.path,M)));if(Y.common.async)return Promise.all(J).then((B)=>z(B));else return z(J)}min(W,X){return new JW({...this._def,minSize:{value:W,message:e.toString(X)}})}max(W,X){return new JW({...this._def,maxSize:{value:W,message:e.toString(X)}})}size(W,X){return this.min(W,X).max(W,X)}nonempty(W){return this.min(1,W)}}JW.create=(W,X)=>{return new JW({valueType:W,minSize:null,maxSize:null,typeName:z0.ZodSet,...j0(X)})};class RW extends N0{constructor(){super(...arguments);this.validate=this.implement}_parse(W){let{ctx:X}=this._processInputParams(W);if(X.parsedType!==a.function)return i(X,{code:p.invalid_type,expected:a.function,received:X.parsedType}),G0;function Y(J,B){return k8({data:J,path:X.path,errorMaps:[X.common.contextualErrorMap,X.schemaErrorMap,T8(),DW].filter((M)=>!!M),issueData:{code:p.invalid_arguments,argumentsError:B}})}function Q(J,B){return k8({data:J,path:X.path,errorMaps:[X.common.contextualErrorMap,X.schemaErrorMap,T8(),DW].filter((M)=>!!M),issueData:{code:p.invalid_return_type,returnTypeError:B}})}let G={errorMap:X.common.contextualErrorMap},z=X.data;if(this._def.returns instanceof YW){let J=this;return W1(async function(...B){let M=new z1([]),q=await J._def.args.parseAsync(B,G).catch((C)=>{throw M.addIssue(Y(B,C)),M}),j=await Reflect.apply(z,this,q);return await J._def.returns._def.type.parseAsync(j,G).catch((C)=>{throw M.addIssue(Q(j,C)),M})})}else{let J=this;return W1(function(...B){let M=J._def.args.safeParse(B,G);if(!M.success)throw new z1([Y(B,M.error)]);let q=Reflect.apply(z,this,M.data),j=J._def.returns.safeParse(q,G);if(!j.success)throw new z1([Q(q,j.error)]);return j.data})}}parameters(){return this._def.args}returnType(){return this._def.returns}args(...W){return new RW({...this._def,args:E1.create(W).rest(p1.create())})}returns(W){return new RW({...this._def,returns:W})}implement(W){return this.parse(W)}strictImplement(W){return this.parse(W)}static create(W,X,Y){return new RW({args:W?W:E1.create([]).rest(p1.create()),returns:X||p1.create(),typeName:z0.ZodFunction,...j0(Y)})}}class SW extends N0{get schema(){return this._def.getter()}_parse(W){let{ctx:X}=this._processInputParams(W);return this._def.getter()._parse({data:X.data,path:X.path,parent:X})}}SW.create=(W,X)=>{return new SW({getter:W,typeName:z0.ZodLazy,...j0(X)})};class PW extends N0{_parse(W){if(W.data!==this._def.value){let X=this._getOrReturnCtx(W);return i(X,{received:X.data,code:p.invalid_literal,expected:this._def.value}),G0}return{status:"valid",value:W.data}}get value(){return this._def.value}}PW.create=(W,X)=>{return new PW({value:W,typeName:z0.ZodLiteral,...j0(X)})};function A6(W,X){return new c1({values:W,typeName:z0.ZodEnum,...j0(X)})}class c1 extends N0{_parse(W){if(typeof W.data!=="string"){let X=this._getOrReturnCtx(W),Y=this._def.values;return i(X,{expected:_0.joinValues(Y),received:X.parsedType,code:p.invalid_type}),G0}if(!this._cache)this._cache=new Set(this._def.values);if(!this._cache.has(W.data)){let X=this._getOrReturnCtx(W),Y=this._def.values;return i(X,{received:X.data,code:p.invalid_enum_value,options:Y}),G0}return W1(W.data)}get options(){return this._def.values}get enum(){let W={};for(let X of this._def.values)W[X]=X;return W}get Values(){let W={};for(let X of this._def.values)W[X]=X;return W}get Enum(){let W={};for(let X of this._def.values)W[X]=X;return W}extract(W,X=this._def){return c1.create(W,{...this._def,...X})}exclude(W,X=this._def){return c1.create(this.options.filter((Y)=>!W.includes(Y)),{...this._def,...X})}}c1.create=A6;class vW extends N0{_parse(W){let X=_0.getValidEnumValues(this._def.values),Y=this._getOrReturnCtx(W);if(Y.parsedType!==a.string&&Y.parsedType!==a.number){let Q=_0.objectValues(X);return i(Y,{expected:_0.joinValues(Q),received:Y.parsedType,code:p.invalid_type}),G0}if(!this._cache)this._cache=new Set(_0.getValidEnumValues(this._def.values));if(!this._cache.has(W.data)){let Q=_0.objectValues(X);return i(Y,{received:Y.data,code:p.invalid_enum_value,options:Q}),G0}return W1(W.data)}get enum(){return this._def.values}}vW.create=(W,X)=>{return new vW({values:W,typeName:z0.ZodNativeEnum,...j0(X)})};class YW extends N0{unwrap(){return this._def.type}_parse(W){let{ctx:X}=this._processInputParams(W);if(X.parsedType!==a.promise&&X.common.async===!1)return i(X,{code:p.invalid_type,expected:a.promise,received:X.parsedType}),G0;let Y=X.parsedType===a.promise?X.data:Promise.resolve(X.data);return W1(Y.then((Q)=>{return this._def.type.parseAsync(Q,{path:X.path,errorMap:X.common.contextualErrorMap})}))}}YW.create=(W,X)=>{return new YW({type:W,typeName:z0.ZodPromise,...j0(X)})};class M1 extends N0{innerType(){return this._def.schema}sourceType(){return this._def.schema._def.typeName===z0.ZodEffects?this._def.schema.sourceType():this._def.schema}_parse(W){let{status:X,ctx:Y}=this._processInputParams(W),Q=this._def.effect||null,G={addIssue:(z)=>{if(i(Y,z),z.fatal)X.abort();else X.dirty()},get path(){return Y.path}};if(G.addIssue=G.addIssue.bind(G),Q.type==="preprocess"){let z=Q.transform(Y.data,G);if(Y.common.async)return Promise.resolve(z).then(async(J)=>{if(X.value==="aborted")return G0;let B=await this._def.schema._parseAsync({data:J,path:Y.path,parent:Y});if(B.status==="aborted")return G0;if(B.status==="dirty")return wW(B.value);if(X.value==="dirty")return wW(B.value);return B});else{if(X.value==="aborted")return G0;let J=this._def.schema._parseSync({data:z,path:Y.path,parent:Y});if(J.status==="aborted")return G0;if(J.status==="dirty")return wW(J.value);if(X.value==="dirty")return wW(J.value);return J}}if(Q.type==="refinement"){let z=(J)=>{let B=Q.refinement(J,G);if(Y.common.async)return Promise.resolve(B);if(B instanceof Promise)throw Error("Async refinement encountered during synchronous parse operation. Use .parseAsync instead.");return J};if(Y.common.async===!1){let J=this._def.schema._parseSync({data:Y.data,path:Y.path,parent:Y});if(J.status==="aborted")return G0;if(J.status==="dirty")X.dirty();return z(J.value),{status:X.value,value:J.value}}else return this._def.schema._parseAsync({data:Y.data,path:Y.path,parent:Y}).then((J)=>{if(J.status==="aborted")return G0;if(J.status==="dirty")X.dirty();return z(J.value).then(()=>{return{status:X.value,value:J.value}})})}if(Q.type==="transform")if(Y.common.async===!1){let z=this._def.schema._parseSync({data:Y.data,path:Y.path,parent:Y});if(!WW(z))return G0;let J=Q.transform(z.value,G);if(J instanceof Promise)throw Error("Asynchronous transform encountered during synchronous parse operation. Use .parseAsync instead.");return{status:X.value,value:J}}else return this._def.schema._parseAsync({data:Y.data,path:Y.path,parent:Y}).then((z)=>{if(!WW(z))return G0;return Promise.resolve(Q.transform(z.value,G)).then((J)=>({status:X.value,value:J}))});_0.assertNever(Q)}}M1.create=(W,X,Y)=>{return new M1({schema:W,typeName:z0.ZodEffects,effect:X,...j0(Y)})};M1.createWithPreprocess=(W,X,Y)=>{return new M1({schema:X,effect:{type:"preprocess",transform:W},typeName:z0.ZodEffects,...j0(Y)})};class K1 extends N0{_parse(W){if(this._getType(W)===a.undefined)return W1(void 0);return this._def.innerType._parse(W)}unwrap(){return this._def.innerType}}K1.create=(W,X)=>{return new K1({innerType:W,typeName:z0.ZodOptional,...j0(X)})};class h1 extends N0{_parse(W){if(this._getType(W)===a.null)return W1(null);return this._def.innerType._parse(W)}unwrap(){return this._def.innerType}}h1.create=(W,X)=>{return new h1({innerType:W,typeName:z0.ZodNullable,...j0(X)})};class ZW extends N0{_parse(W){let{ctx:X}=this._processInputParams(W),Y=X.data;if(X.parsedType===a.undefined)Y=this._def.defaultValue();return this._def.innerType._parse({data:Y,path:X.path,parent:X})}removeDefault(){return this._def.innerType}}ZW.create=(W,X)=>{return new ZW({innerType:W,typeName:z0.ZodDefault,defaultValue:typeof X.default==="function"?X.default:()=>X.default,...j0(X)})};class TW extends N0{_parse(W){let{ctx:X}=this._processInputParams(W),Y={...X,common:{...X.common,issues:[]}},Q=this._def.innerType._parse({data:Y.data,path:Y.path,parent:{...Y}});if(H8(Q))return Q.then((G)=>{return{status:"valid",value:G.status==="valid"?G.value:this._def.catchValue({get error(){return new z1(Y.common.issues)},input:Y.data})}});else return{status:"valid",value:Q.status==="valid"?Q.value:this._def.catchValue({get error(){return new z1(Y.common.issues)},input:Y.data})}}removeCatch(){return this._def.innerType}}TW.create=(W,X)=>{return new TW({innerType:W,typeName:z0.ZodCatch,catchValue:typeof X.catch==="function"?X.catch:()=>X.catch,...j0(X)})};class L8 extends N0{_parse(W){if(this._getType(W)!==a.nan){let Y=this._getOrReturnCtx(W);return i(Y,{code:p.invalid_type,expected:a.nan,received:Y.parsedType}),G0}return{status:"valid",value:W.data}}}L8.create=(W)=>{return new L8({typeName:z0.ZodNaN,...j0(W)})};var sY=Symbol("zod_brand");class y8 extends N0{_parse(W){let{ctx:X}=this._processInputParams(W),Y=X.data;return this._def.type._parse({data:Y,path:X.path,parent:X})}unwrap(){return this._def.type}}class N8 extends N0{_parse(W){let{status:X,ctx:Y}=this._processInputParams(W);if(Y.common.async)return(async()=>{let G=await this._def.in._parseAsync({data:Y.data,path:Y.path,parent:Y});if(G.status==="aborted")return G0;if(G.status==="dirty")return X.dirty(),wW(G.value);else return this._def.out._parseAsync({data:G.value,path:Y.path,parent:Y})})();else{let Q=this._def.in._parseSync({data:Y.data,path:Y.path,parent:Y});if(Q.status==="aborted")return G0;if(Q.status==="dirty")return X.dirty(),{status:"dirty",value:Q.value};else return this._def.out._parseSync({data:Q.value,path:Y.path,parent:Y})}}static create(W,X){return new N8({in:W,out:X,typeName:z0.ZodPipeline})}}class kW extends N0{_parse(W){let X=this._def.innerType._parse(W),Y=(Q)=>{if(WW(Q))Q.value=Object.freeze(Q.value);return Q};return H8(X)?X.then((Q)=>Y(Q)):Y(X)}unwrap(){return this._def.innerType}}kW.create=(W,X)=>{return new kW({innerType:W,typeName:z0.ZodReadonly,...j0(X)})};function d9(W,X){let Y=typeof W==="function"?W(X):typeof W==="string"?{message:W}:W;return typeof Y==="string"?{message:Y}:Y}function V6(W,X={},Y){if(W)return XW.create().superRefine((Q,G)=>{let z=W(Q);if(z instanceof Promise)return z.then((J)=>{if(!J){let B=d9(X,Q),M=B.fatal??Y??!0;G.addIssue({code:"custom",...B,fatal:M})}});if(!z){let J=d9(X,Q),B=J.fatal??Y??!0;G.addIssue({code:"custom",...J,fatal:B})}return});return XW.create()}var tY={object:p0.lazycreate},z0;(function(W){W.ZodString="ZodString",W.ZodNumber="ZodNumber",W.ZodNaN="ZodNaN",W.ZodBigInt="ZodBigInt",W.ZodBoolean="ZodBoolean",W.ZodDate="ZodDate",W.ZodSymbol="ZodSymbol",W.ZodUndefined="ZodUndefined",W.ZodNull="ZodNull",W.ZodAny="ZodAny",W.ZodUnknown="ZodUnknown",W.ZodNever="ZodNever",W.ZodVoid="ZodVoid",W.ZodArray="ZodArray",W.ZodObject="ZodObject",W.ZodUnion="ZodUnion",W.ZodDiscriminatedUnion="ZodDiscriminatedUnion",W.ZodIntersection="ZodIntersection",W.ZodTuple="ZodTuple",W.ZodRecord="ZodRecord",W.ZodMap="ZodMap",W.ZodSet="ZodSet",W.ZodFunction="ZodFunction",W.ZodLazy="ZodLazy",W.ZodLiteral="ZodLiteral",W.ZodEnum="ZodEnum",W.ZodEffects="ZodEffects",W.ZodNativeEnum="ZodNativeEnum",W.ZodOptional="ZodOptional",W.ZodNullable="ZodNullable",W.ZodDefault="ZodDefault",W.ZodCatch="ZodCatch",W.ZodPromise="ZodPromise",W.ZodBranded="ZodBranded",W.ZodPipeline="ZodPipeline",W.ZodReadonly="ZodReadonly"})(z0||(z0={}));var eY=(W,X={message:`Input not instance of ${W.name}`})=>V6((Y)=>Y instanceof W,X),O6=j1.create,w6=u1.create,W5=L8.create,Q5=n1.create,R6=_W.create,X5=QW.create,J5=q8.create,Y5=IW.create,G5=CW.create,z5=XW.create,B5=p1.create,H5=C1.create,q5=M8.create,M5=N1.create,U5=p0.create,F5=p0.strictCreate,L5=EW.create,j5=f8.create,N5=bW.create,K5=E1.create,A5=U8.create,V5=F8.create,O5=JW.create,w5=RW.create,R5=SW.create,D5=PW.create,_5=c1.create,I5=vW.create,C5=YW.create,i9=M1.create,E5=K1.create,b5=h1.create,S5=M1.createWithPreprocess,P5=N8.create,v5=()=>O6().optional(),Z5=()=>w6().optional(),T5=()=>R6().optional(),k5={string:(W)=>j1.create({...W,coerce:!0}),number:(W)=>u1.create({...W,coerce:!0}),boolean:(W)=>_W.create({...W,coerce:!0}),bigint:(W)=>n1.create({...W,coerce:!0}),date:(W)=>QW.create({...W,coerce:!0})},g5=G0;var h8="2.0",D6=H.union([H.string(),H.number().int()]),_6=H.string(),x5=H.object({progressToken:H.optional(D6)}).passthrough(),U1=H.object({_meta:H.optional(x5)}).passthrough(),Q1=H.object({method:H.string(),params:H.optional(U1)}),K8=H.object({_meta:H.optional(H.object({}).passthrough())}).passthrough(),b1=H.object({method:H.string(),params:H.optional(K8)}),F1=H.object({_meta:H.optional(H.object({}).passthrough())}).passthrough(),$8=H.union([H.string(),H.number().int()]),f5=H.object({jsonrpc:H.literal(h8),id:$8}).merge(Q1).strict();var y5=H.object({jsonrpc:H.literal(h8)}).merge(b1).strict();var h5=H.object({jsonrpc:H.literal(h8),id:$8,result:F1}).strict();var o9;(function(W){W[W.ConnectionClosed=-32000]="ConnectionClosed",W[W.RequestTimeout=-32001]="RequestTimeout",W[W.ParseError=-32700]="ParseError",W[W.InvalidRequest=-32600]="InvalidRequest",W[W.MethodNotFound=-32601]="MethodNotFound",W[W.InvalidParams=-32602]="InvalidParams",W[W.InternalError=-32603]="InternalError"})(o9||(o9={}));var $5=H.object({jsonrpc:H.literal(h8),id:$8,error:H.object({code:H.number().int(),message:H.string(),data:H.optional(H.unknown())})}).strict();var nG=H.union([f5,y5,h5,$5]),I6=F1.strict(),C6=b1.extend({method:H.literal("notifications/cancelled"),params:K8.extend({requestId:$8,reason:H.string().optional()})}),A8=H.object({name:H.string(),title:H.optional(H.string())}).passthrough(),E6=A8.extend({version:H.string()}),m5=H.object({experimental:H.optional(H.object({}).passthrough()),sampling:H.optional(H.object({}).passthrough()),elicitation:H.optional(H.object({}).passthrough()),roots:H.optional(H.object({listChanged:H.optional(H.boolean())}).passthrough())}).passthrough(),l5=Q1.extend({method:H.literal("initialize"),params:U1.extend({protocolVersion:H.string(),capabilities:m5,clientInfo:E6})}),p5=H.object({experimental:H.optional(H.object({}).passthrough()),logging:H.optional(H.object({}).passthrough()),completions:H.optional(H.object({}).passthrough()),prompts:H.optional(H.object({listChanged:H.optional(H.boolean())}).passthrough()),resources:H.optional(H.object({subscribe:H.optional(H.boolean()),listChanged:H.optional(H.boolean())}).passthrough()),tools:H.optional(H.object({listChanged:H.optional(H.boolean())}).passthrough())}).passthrough(),u5=F1.extend({protocolVersion:H.string(),capabilities:p5,serverInfo:E6,instructions:H.optional(H.string())}),n5=b1.extend({method:H.literal("notifications/initialized")}),b6=Q1.extend({method:H.literal("ping")}),c5=H.object({progress:H.number(),total:H.optional(H.number()),message:H.optional(H.string())}).passthrough(),S6=b1.extend({method:H.literal("notifications/progress"),params:K8.merge(c5).extend({progressToken:D6})}),m8=Q1.extend({params:U1.extend({cursor:H.optional(_6)}).optional()}),l8=F1.extend({nextCursor:H.optional(_6)}),P6=H.object({uri:H.string(),mimeType:H.optional(H.string()),_meta:H.optional(H.object({}).passthrough())}).passthrough(),v6=P6.extend({text:H.string()}),F9=H.string().refine((W)=>{try{return atob(W),!0}catch(X){return!1}},{message:"Invalid Base64 string"}),Z6=P6.extend({blob:F9}),T6=A8.extend({uri:H.string(),description:H.optional(H.string()),mimeType:H.optional(H.string()),_meta:H.optional(H.object({}).passthrough())}),d5=A8.extend({uriTemplate:H.string(),description:H.optional(H.string()),mimeType:H.optional(H.string()),_meta:H.optional(H.object({}).passthrough())}),i5=m8.extend({method:H.literal("resources/list")}),o5=l8.extend({resources:H.array(T6)}),r5=m8.extend({method:H.literal("resources/templates/list")}),a5=l8.extend({resourceTemplates:H.array(d5)}),s5=Q1.extend({method:H.literal("resources/read"),params:U1.extend({uri:H.string()})}),t5=F1.extend({contents:H.array(H.union([v6,Z6]))}),e5=b1.extend({method:H.literal("notifications/resources/list_changed")}),W7=Q1.extend({method:H.literal("resources/subscribe"),params:U1.extend({uri:H.string()})}),Q7=Q1.extend({method:H.literal("resources/unsubscribe"),params:U1.extend({uri:H.string()})}),X7=b1.extend({method:H.literal("notifications/resources/updated"),params:K8.extend({uri:H.string()})}),J7=H.object({name:H.string(),description:H.optional(H.string()),required:H.optional(H.boolean())}).passthrough(),Y7=A8.extend({description:H.optional(H.string()),arguments:H.optional(H.array(J7)),_meta:H.optional(H.object({}).passthrough())}),G7=m8.extend({method:H.literal("prompts/list")}),z7=l8.extend({prompts:H.array(Y7)}),B7=Q1.extend({method:H.literal("prompts/get"),params:U1.extend({name:H.string(),arguments:H.optional(H.record(H.string()))})}),L9=H.object({type:H.literal("text"),text:H.string(),_meta:H.optional(H.object({}).passthrough())}).passthrough(),j9=H.object({type:H.literal("image"),data:F9,mimeType:H.string(),_meta:H.optional(H.object({}).passthrough())}).passthrough(),N9=H.object({type:H.literal("audio"),data:F9,mimeType:H.string(),_meta:H.optional(H.object({}).passthrough())}).passthrough(),H7=H.object({type:H.literal("resource"),resource:H.union([v6,Z6]),_meta:H.optional(H.object({}).passthrough())}).passthrough(),q7=T6.extend({type:H.literal("resource_link")}),k6=H.union([L9,j9,N9,q7,H7]),M7=H.object({role:H.enum(["user","assistant"]),content:k6}).passthrough(),U7=F1.extend({description:H.optional(H.string()),messages:H.array(M7)}),F7=b1.extend({method:H.literal("notifications/prompts/list_changed")}),L7=H.object({title:H.optional(H.string()),readOnlyHint:H.optional(H.boolean()),destructiveHint:H.optional(H.boolean()),idempotentHint:H.optional(H.boolean()),openWorldHint:H.optional(H.boolean())}).passthrough(),j7=A8.extend({description:H.optional(H.string()),inputSchema:H.object({type:H.literal("object"),properties:H.optional(H.object({}).passthrough()),required:H.optional(H.array(H.string()))}).passthrough(),outputSchema:H.optional(H.object({type:H.literal("object"),properties:H.optional(H.object({}).passthrough()),required:H.optional(H.array(H.string()))}).passthrough()),annotations:H.optional(L7),_meta:H.optional(H.object({}).passthrough())}),N7=m8.extend({method:H.literal("tools/list")}),K7=l8.extend({tools:H.array(j7)}),g6=F1.extend({content:H.array(k6).default([]),structuredContent:H.object({}).passthrough().optional(),isError:H.optional(H.boolean())}),cG=g6.or(F1.extend({toolResult:H.unknown()})),A7=Q1.extend({method:H.literal("tools/call"),params:U1.extend({name:H.string(),arguments:H.optional(H.record(H.unknown()))})}),V7=b1.extend({method:H.literal("notifications/tools/list_changed")}),x6=H.enum(["debug","info","notice","warning","error","critical","alert","emergency"]),O7=Q1.extend({method:H.literal("logging/setLevel"),params:U1.extend({level:x6})}),w7=b1.extend({method:H.literal("notifications/message"),params:K8.extend({level:x6,logger:H.optional(H.string()),data:H.unknown()})}),R7=H.object({name:H.string().optional()}).passthrough(),D7=H.object({hints:H.optional(H.array(R7)),costPriority:H.optional(H.number().min(0).max(1)),speedPriority:H.optional(H.number().min(0).max(1)),intelligencePriority:H.optional(H.number().min(0).max(1))}).passthrough(),_7=H.object({role:H.enum(["user","assistant"]),content:H.union([L9,j9,N9])}).passthrough(),I7=Q1.extend({method:H.literal("sampling/createMessage"),params:U1.extend({messages:H.array(_7),systemPrompt:H.optional(H.string()),includeContext:H.optional(H.enum(["none","thisServer","allServers"])),temperature:H.optional(H.number()),maxTokens:H.number().int(),stopSequences:H.optional(H.array(H.string())),metadata:H.optional(H.object({}).passthrough()),modelPreferences:H.optional(D7)})}),C7=F1.extend({model:H.string(),stopReason:H.optional(H.enum(["endTurn","stopSequence","maxTokens"]).or(H.string())),role:H.enum(["user","assistant"]),content:H.discriminatedUnion("type",[L9,j9,N9])}),E7=H.object({type:H.literal("boolean"),title:H.optional(H.string()),description:H.optional(H.string()),default:H.optional(H.boolean())}).passthrough(),b7=H.object({type:H.literal("string"),title:H.optional(H.string()),description:H.optional(H.string()),minLength:H.optional(H.number()),maxLength:H.optional(H.number()),format:H.optional(H.enum(["email","uri","date","date-time"]))}).passthrough(),S7=H.object({type:H.enum(["number","integer"]),title:H.optional(H.string()),description:H.optional(H.string()),minimum:H.optional(H.number()),maximum:H.optional(H.number())}).passthrough(),P7=H.object({type:H.literal("string"),title:H.optional(H.string()),description:H.optional(H.string()),enum:H.array(H.string()),enumNames:H.optional(H.array(H.string()))}).passthrough(),v7=H.union([E7,b7,S7,P7]),Z7=Q1.extend({method:H.literal("elicitation/create"),params:U1.extend({message:H.string(),requestedSchema:H.object({type:H.literal("object"),properties:H.record(H.string(),v7),required:H.optional(H.array(H.string()))}).passthrough()})}),T7=F1.extend({action:H.enum(["accept","decline","cancel"]),content:H.optional(H.record(H.string(),H.unknown()))}),k7=H.object({type:H.literal("ref/resource"),uri:H.string()}).passthrough(),g7=H.object({type:H.literal("ref/prompt"),name:H.string()}).passthrough(),x7=Q1.extend({method:H.literal("completion/complete"),params:U1.extend({ref:H.union([g7,k7]),argument:H.object({name:H.string(),value:H.string()}).passthrough(),context:H.optional(H.object({arguments:H.optional(H.record(H.string(),H.string()))}))})}),f7=F1.extend({completion:H.object({values:H.array(H.string()).max(100),total:H.optional(H.number().int()),hasMore:H.optional(H.boolean())}).passthrough()}),y7=H.object({uri:H.string().startsWith("file://"),name:H.optional(H.string()),_meta:H.optional(H.object({}).passthrough())}).passthrough(),h7=Q1.extend({method:H.literal("roots/list")}),$7=F1.extend({roots:H.array(y7)}),m7=b1.extend({method:H.literal("notifications/roots/list_changed")}),dG=H.union([b6,l5,x7,O7,B7,G7,i5,r5,s5,W7,Q7,A7,N7]),iG=H.union([C6,S6,n5,m7]),oG=H.union([I6,C7,T7,$7]),rG=H.union([b6,I7,Z7,h7]),aG=H.union([C6,S6,w7,X7,e5,V7,F7]),sG=H.union([I6,u5,f7,U7,z7,o5,a5,t5,g6,K7]);var tG=DQ(JX(),1);var eG=Symbol("Let zodToJsonSchema decide on which parser to use");var W2=new Set("ABCDEFGHIJKLMNOPQRSTUVXYZabcdefghijklmnopqrstuvxyz0123456789");var G9;(function(W){W.Completable="McpCompletable"})(G9||(G9={}));class z9 extends N0{_parse(W){let{ctx:X}=this._processInputParams(W),Y=X.data;return this._def.type._parse({data:Y,path:X.path,parent:X})}unwrap(){return this._def.type}}z9.create=(W,X)=>{return new z9({type:W,typeName:G9.Completable,complete:X.complete,...l7(X)})};function l7(W){if(!W)return{};let{errorMap:X,invalid_type_error:Y,required_error:Q,description:G}=W;if(X&&(Y||Q))throw Error(`Can't use "invalid_type_error" or "required_error" in conjunction with custom error map.`);if(X)return{errorMap:X,description:G};return{errorMap:(J,B)=>{var M,q;let{message:j}=W;if(J.code==="invalid_enum_value")return{message:j!==null&&j!==void 0?j:B.defaultError};if(typeof B.data>"u")return{message:(M=j!==null&&j!==void 0?j:Q)!==null&&M!==void 0?M:B.defaultError};if(J.code!=="invalid_type")return{message:B.defaultError};return{message:(q=j!==null&&j!==void 0?j:Y)!==null&&q!==void 0?q:B.defaultError}},description:G}}function f6({prompt:W,options:X}){let{systemPrompt:Y,settingSources:Q,sandbox:G,...z}=X??{},J,B;if(Y===void 0)J="";else if(typeof Y==="string")J=Y;else if(Y.type==="preset")B=Y.append;let M=z.pathToClaudeCodeExecutable;if(!M){let u=YX(import.meta.url),q0=x9(u,"..");M=x9(q0,"cli.js")}process.env.CLAUDE_AGENT_SDK_VERSION="0.1.62";let{abortController:q=e9(),additionalDirectories:j=[],agents:I,allowedTools:C=[],betas:V,canUseTool:R,continue:U,cwd:L,disallowedTools:A=[],tools:N,env:_,executable:x=W6()?"bun":"node",executableArgs:P=[],extraArgs:O={},fallbackModel:S,forkSession:Z,hooks:g,includePartialMessages:y,maxThinkingTokens:k,maxTurns:E,maxBudgetUsd:D,mcpServers:f,model:m,outputFormat:n,permissionMode:o="default",allowDangerouslySkipPermissions:F0=!1,permissionPromptToolName:W0,plugins:U0,resume:J0,resumeSessionAt:Y0,stderr:w0,strictMcpConfig:k0}=z,x0=n?.type==="json_schema"?n.schema:void 0,C0=_;if(!C0)C0={...process.env};if(!C0.CLAUDE_CODE_ENTRYPOINT)C0.CLAUDE_CODE_ENTRYPOINT="sdk-ts";if(!M)throw Error("pathToClaudeCodeExecutable is required");let v0={},b=new Map;if(f)for(let[u,q0]of Object.entries(f))if(q0.type==="sdk"&&"instance"in q0)b.set(u,q0.instance),v0[u]={type:"sdk",name:u};else v0[u]=q0;let h=typeof W==="string",s=new X6({abortController:q,additionalDirectories:j,betas:V,cwd:L,executable:x,executableArgs:P,extraArgs:O,pathToClaudeCodeExecutable:M,env:C0,forkSession:Z,stderr:w0,maxThinkingTokens:k,maxTurns:E,maxBudgetUsd:D,model:m,fallbackModel:S,jsonSchema:x0,permissionMode:o,allowDangerouslySkipPermissions:F0,permissionPromptToolName:W0,continueConversation:U,resume:J0,resumeSessionAt:Y0,settingSources:Q??[],allowedTools:C,disallowedTools:A,tools:N,mcpServers:v0,strictMcpConfig:k0,canUseTool:!!R,hooks:!!g,includePartialMessages:y,plugins:U0,sandbox:G}),$=new F6(s,h,R,g,q,b,x0,{systemPrompt:J,appendSystemPrompt:B,agents:I});if(typeof W==="string")s.write(JSON.stringify({type:"user",session_id:"",message:{role:"user",content:[{type:"text",text:W}]},parent_tool_use_id:null})+`
`);else $.streamInput(W);return $}import{promises as d8,mkdirSync as t4}from"fs";import*as a0 from"path";import{parseArgs as e4}from"util";var T0={};AQ(T0,{void:()=>C4,util:()=>O0,unknown:()=>_4,union:()=>P4,undefined:()=>w4,tuple:()=>T4,transformer:()=>p4,symbol:()=>O4,string:()=>c6,strictObject:()=>S4,setErrorMap:()=>n7,set:()=>x4,record:()=>k4,quotelessJson:()=>p7,promise:()=>l4,preprocess:()=>c4,pipeline:()=>d4,ostring:()=>i4,optional:()=>u4,onumber:()=>o4,oboolean:()=>r4,objectUtil:()=>K9,object:()=>b4,number:()=>d6,nullable:()=>n4,null:()=>R4,never:()=>I4,nativeEnum:()=>m4,nan:()=>K4,map:()=>g4,makeIssue:()=>V8,literal:()=>h4,lazy:()=>y4,late:()=>j4,isValid:()=>d1,isDirty:()=>u8,isAsync:()=>$W,isAborted:()=>p8,intersection:()=>Z4,instanceof:()=>N4,getParsedType:()=>S1,getErrorMap:()=>hW,function:()=>f4,enum:()=>$4,effect:()=>p4,discriminatedUnion:()=>v4,defaultErrorMap:()=>$1,datetimeRegex:()=>p6,date:()=>V4,custom:()=>n6,coerce:()=>a4,boolean:()=>i6,bigint:()=>A4,array:()=>E4,any:()=>D4,addIssueToContext:()=>d,ZodVoid:()=>w8,ZodUnknown:()=>i1,ZodUnion:()=>cW,ZodUndefined:()=>uW,ZodType:()=>V0,ZodTuple:()=>v1,ZodTransformer:()=>D1,ZodSymbol:()=>O8,ZodString:()=>V1,ZodSet:()=>HW,ZodSchema:()=>V0,ZodRecord:()=>R8,ZodReadonly:()=>tW,ZodPromise:()=>qW,ZodPipeline:()=>I8,ZodParsedType:()=>c,ZodOptional:()=>w1,ZodObject:()=>u0,ZodNumber:()=>o1,ZodNullable:()=>l1,ZodNull:()=>nW,ZodNever:()=>P1,ZodNativeEnum:()=>rW,ZodNaN:()=>_8,ZodMap:()=>D8,ZodLiteral:()=>oW,ZodLazy:()=>iW,ZodIssueCode:()=>l,ZodIntersection:()=>dW,ZodFunction:()=>lW,ZodFirstPartyTypeKind:()=>B0,ZodError:()=>X1,ZodEnum:()=>a1,ZodEffects:()=>D1,ZodDiscriminatedUnion:()=>n8,ZodDefault:()=>aW,ZodDate:()=>zW,ZodCatch:()=>sW,ZodBranded:()=>c8,ZodBoolean:()=>pW,ZodBigInt:()=>r1,ZodArray:()=>O1,ZodAny:()=>BW,Schema:()=>V0,ParseStatus:()=>r0,OK:()=>t0,NEVER:()=>s4,INVALID:()=>X0,EMPTY_PATH:()=>c7,DIRTY:()=>GW,BRAND:()=>L4});var O0;(function(W){W.assertEqual=(G)=>{};function X(G){}W.assertIs=X;function Y(G){throw Error()}W.assertNever=Y,W.arrayToEnum=(G)=>{let z={};for(let J of G)z[J]=J;return z},W.getValidEnumValues=(G)=>{let z=W.objectKeys(G).filter((B)=>typeof G[G[B]]!=="number"),J={};for(let B of z)J[B]=G[B];return W.objectValues(J)},W.objectValues=(G)=>{return W.objectKeys(G).map(function(z){return G[z]})},W.objectKeys=typeof Object.keys==="function"?(G)=>Object.keys(G):(G)=>{let z=[];for(let J in G)if(Object.prototype.hasOwnProperty.call(G,J))z.push(J);return z},W.find=(G,z)=>{for(let J of G)if(z(J))return J;return},W.isInteger=typeof Number.isInteger==="function"?(G)=>Number.isInteger(G):(G)=>typeof G==="number"&&Number.isFinite(G)&&Math.floor(G)===G;function Q(G,z=" | "){return G.map((J)=>typeof J==="string"?`'${J}'`:J).join(z)}W.joinValues=Q,W.jsonStringifyReplacer=(G,z)=>{if(typeof z==="bigint")return z.toString();return z}})(O0||(O0={}));var K9;(function(W){W.mergeShapes=(X,Y)=>{return{...X,...Y}}})(K9||(K9={}));var c=O0.arrayToEnum(["string","nan","number","integer","float","boolean","date","bigint","symbol","function","undefined","null","array","object","unknown","promise","void","never","map","set"]),S1=(W)=>{switch(typeof W){case"undefined":return c.undefined;case"string":return c.string;case"number":return Number.isNaN(W)?c.nan:c.number;case"boolean":return c.boolean;case"function":return c.function;case"bigint":return c.bigint;case"symbol":return c.symbol;case"object":if(Array.isArray(W))return c.array;if(W===null)return c.null;if(W.then&&typeof W.then==="function"&&W.catch&&typeof W.catch==="function")return c.promise;if(typeof Map<"u"&&W instanceof Map)return c.map;if(typeof Set<"u"&&W instanceof Set)return c.set;if(typeof Date<"u"&&W instanceof Date)return c.date;return c.object;default:return c.unknown}};var l=O0.arrayToEnum(["invalid_type","invalid_literal","custom","invalid_union","invalid_union_discriminator","invalid_enum_value","unrecognized_keys","invalid_arguments","invalid_return_type","invalid_date","invalid_string","too_small","too_big","invalid_intersection_types","not_multiple_of","not_finite"]),p7=(W)=>{return JSON.stringify(W,null,2).replace(/"([^"]+)":/g,"$1:")};class X1 extends Error{get errors(){return this.issues}constructor(W){super();this.issues=[],this.addIssue=(Y)=>{this.issues=[...this.issues,Y]},this.addIssues=(Y=[])=>{this.issues=[...this.issues,...Y]};let X=new.target.prototype;if(Object.setPrototypeOf)Object.setPrototypeOf(this,X);else this.__proto__=X;this.name="ZodError",this.issues=W}format(W){let X=W||function(G){return G.message},Y={_errors:[]},Q=(G)=>{for(let z of G.issues)if(z.code==="invalid_union")z.unionErrors.map(Q);else if(z.code==="invalid_return_type")Q(z.returnTypeError);else if(z.code==="invalid_arguments")Q(z.argumentsError);else if(z.path.length===0)Y._errors.push(X(z));else{let J=Y,B=0;while(B<z.path.length){let M=z.path[B];if(B!==z.path.length-1)J[M]=J[M]||{_errors:[]};else J[M]=J[M]||{_errors:[]},J[M]._errors.push(X(z));J=J[M],B++}}};return Q(this),Y}static assert(W){if(!(W instanceof X1))throw Error(`Not a ZodError: ${W}`)}toString(){return this.message}get message(){return JSON.stringify(this.issues,O0.jsonStringifyReplacer,2)}get isEmpty(){return this.issues.length===0}flatten(W=(X)=>X.message){let X={},Y=[];for(let Q of this.issues)if(Q.path.length>0){let G=Q.path[0];X[G]=X[G]||[],X[G].push(W(Q))}else Y.push(W(Q));return{formErrors:Y,fieldErrors:X}}get formErrors(){return this.flatten()}}X1.create=(W)=>{return new X1(W)};var u7=(W,X)=>{let Y;switch(W.code){case l.invalid_type:if(W.received===c.undefined)Y="Required";else Y=`Expected ${W.expected}, received ${W.received}`;break;case l.invalid_literal:Y=`Invalid literal value, expected ${JSON.stringify(W.expected,O0.jsonStringifyReplacer)}`;break;case l.unrecognized_keys:Y=`Unrecognized key(s) in object: ${O0.joinValues(W.keys,", ")}`;break;case l.invalid_union:Y="Invalid input";break;case l.invalid_union_discriminator:Y=`Invalid discriminator value. Expected ${O0.joinValues(W.options)}`;break;case l.invalid_enum_value:Y=`Invalid enum value. Expected ${O0.joinValues(W.options)}, received '${W.received}'`;break;case l.invalid_arguments:Y="Invalid function arguments";break;case l.invalid_return_type:Y="Invalid function return type";break;case l.invalid_date:Y="Invalid date";break;case l.invalid_string:if(typeof W.validation==="object")if("includes"in W.validation){if(Y=`Invalid input: must include "${W.validation.includes}"`,typeof W.validation.position==="number")Y=`${Y} at one or more positions greater than or equal to ${W.validation.position}`}else if("startsWith"in W.validation)Y=`Invalid input: must start with "${W.validation.startsWith}"`;else if("endsWith"in W.validation)Y=`Invalid input: must end with "${W.validation.endsWith}"`;else O0.assertNever(W.validation);else if(W.validation!=="regex")Y=`Invalid ${W.validation}`;else Y="Invalid";break;case l.too_small:if(W.type==="array")Y=`Array must contain ${W.exact?"exactly":W.inclusive?"at least":"more than"} ${W.minimum} element(s)`;else if(W.type==="string")Y=`String must contain ${W.exact?"exactly":W.inclusive?"at least":"over"} ${W.minimum} character(s)`;else if(W.type==="number")Y=`Number must be ${W.exact?"exactly equal to ":W.inclusive?"greater than or equal to ":"greater than "}${W.minimum}`;else if(W.type==="bigint")Y=`Number must be ${W.exact?"exactly equal to ":W.inclusive?"greater than or equal to ":"greater than "}${W.minimum}`;else if(W.type==="date")Y=`Date must be ${W.exact?"exactly equal to ":W.inclusive?"greater than or equal to ":"greater than "}${new Date(Number(W.minimum))}`;else Y="Invalid input";break;case l.too_big:if(W.type==="array")Y=`Array must contain ${W.exact?"exactly":W.inclusive?"at most":"less than"} ${W.maximum} element(s)`;else if(W.type==="string")Y=`String must contain ${W.exact?"exactly":W.inclusive?"at most":"under"} ${W.maximum} character(s)`;else if(W.type==="number")Y=`Number must be ${W.exact?"exactly":W.inclusive?"less than or equal to":"less than"} ${W.maximum}`;else if(W.type==="bigint")Y=`BigInt must be ${W.exact?"exactly":W.inclusive?"less than or equal to":"less than"} ${W.maximum}`;else if(W.type==="date")Y=`Date must be ${W.exact?"exactly":W.inclusive?"smaller than or equal to":"smaller than"} ${new Date(Number(W.maximum))}`;else Y="Invalid input";break;case l.custom:Y="Invalid input";break;case l.invalid_intersection_types:Y="Intersection results could not be merged";break;case l.not_multiple_of:Y=`Number must be a multiple of ${W.multipleOf}`;break;case l.not_finite:Y="Number must be finite";break;default:Y=X.defaultError,O0.assertNever(W)}return{message:Y}},$1=u7;var y6=$1;function n7(W){y6=W}function hW(){return y6}var V8=(W)=>{let{data:X,path:Y,errorMaps:Q,issueData:G}=W,z=[...Y,...G.path||[]],J={...G,path:z};if(G.message!==void 0)return{...G,path:z,message:G.message};let B="",M=Q.filter((q)=>!!q).slice().reverse();for(let q of M)B=q(J,{data:X,defaultError:B}).message;return{...G,path:z,message:B}},c7=[];function d(W,X){let Y=hW(),Q=V8({issueData:X,data:W.data,path:W.path,errorMaps:[W.common.contextualErrorMap,W.schemaErrorMap,Y,Y===$1?void 0:$1].filter((G)=>!!G)});W.common.issues.push(Q)}class r0{constructor(){this.value="valid"}dirty(){if(this.value==="valid")this.value="dirty"}abort(){if(this.value!=="aborted")this.value="aborted"}static mergeArray(W,X){let Y=[];for(let Q of X){if(Q.status==="aborted")return X0;if(Q.status==="dirty")W.dirty();Y.push(Q.value)}return{status:W.value,value:Y}}static async mergeObjectAsync(W,X){let Y=[];for(let Q of X){let G=await Q.key,z=await Q.value;Y.push({key:G,value:z})}return r0.mergeObjectSync(W,Y)}static mergeObjectSync(W,X){let Y={};for(let Q of X){let{key:G,value:z}=Q;if(G.status==="aborted")return X0;if(z.status==="aborted")return X0;if(G.status==="dirty")W.dirty();if(z.status==="dirty")W.dirty();if(G.value!=="__proto__"&&(typeof z.value<"u"||Q.alwaysSet))Y[G.value]=z.value}return{status:W.value,value:Y}}}var X0=Object.freeze({status:"aborted"}),GW=(W)=>({status:"dirty",value:W}),t0=(W)=>({status:"valid",value:W}),p8=(W)=>W.status==="aborted",u8=(W)=>W.status==="dirty",d1=(W)=>W.status==="valid",$W=(W)=>typeof Promise<"u"&&W instanceof Promise;var t;(function(W){W.errToObj=(X)=>typeof X==="string"?{message:X}:X||{},W.toString=(X)=>typeof X==="string"?X:X?.message})(t||(t={}));class R1{constructor(W,X,Y,Q){this._cachedPath=[],this.parent=W,this.data=X,this._path=Y,this._key=Q}get path(){if(!this._cachedPath.length)if(Array.isArray(this._key))this._cachedPath.push(...this._path,...this._key);else this._cachedPath.push(...this._path,this._key);return this._cachedPath}}var h6=(W,X)=>{if(d1(X))return{success:!0,data:X.value};else{if(!W.common.issues.length)throw Error("Validation failed but no issues detected.");return{success:!1,get error(){if(this._error)return this._error;let Y=new X1(W.common.issues);return this._error=Y,this._error}}}};function K0(W){if(!W)return{};let{errorMap:X,invalid_type_error:Y,required_error:Q,description:G}=W;if(X&&(Y||Q))throw Error(`Can't use "invalid_type_error" or "required_error" in conjunction with custom error map.`);if(X)return{errorMap:X,description:G};return{errorMap:(J,B)=>{let{message:M}=W;if(J.code==="invalid_enum_value")return{message:M??B.defaultError};if(typeof B.data>"u")return{message:M??Q??B.defaultError};if(J.code!=="invalid_type")return{message:B.defaultError};return{message:M??Y??B.defaultError}},description:G}}class V0{get description(){return this._def.description}_getType(W){return S1(W.data)}_getOrReturnCtx(W,X){return X||{common:W.parent.common,data:W.data,parsedType:S1(W.data),schemaErrorMap:this._def.errorMap,path:W.path,parent:W.parent}}_processInputParams(W){return{status:new r0,ctx:{common:W.parent.common,data:W.data,parsedType:S1(W.data),schemaErrorMap:this._def.errorMap,path:W.path,parent:W.parent}}}_parseSync(W){let X=this._parse(W);if($W(X))throw Error("Synchronous parse encountered promise.");return X}_parseAsync(W){let X=this._parse(W);return Promise.resolve(X)}parse(W,X){let Y=this.safeParse(W,X);if(Y.success)return Y.data;throw Y.error}safeParse(W,X){let Y={common:{issues:[],async:X?.async??!1,contextualErrorMap:X?.errorMap},path:X?.path||[],schemaErrorMap:this._def.errorMap,parent:null,data:W,parsedType:S1(W)},Q=this._parseSync({data:W,path:Y.path,parent:Y});return h6(Y,Q)}"~validate"(W){let X={common:{issues:[],async:!!this["~standard"].async},path:[],schemaErrorMap:this._def.errorMap,parent:null,data:W,parsedType:S1(W)};if(!this["~standard"].async)try{let Y=this._parseSync({data:W,path:[],parent:X});return d1(Y)?{value:Y.value}:{issues:X.common.issues}}catch(Y){if(Y?.message?.toLowerCase()?.includes("encountered"))this["~standard"].async=!0;X.common={issues:[],async:!0}}return this._parseAsync({data:W,path:[],parent:X}).then((Y)=>d1(Y)?{value:Y.value}:{issues:X.common.issues})}async parseAsync(W,X){let Y=await this.safeParseAsync(W,X);if(Y.success)return Y.data;throw Y.error}async safeParseAsync(W,X){let Y={common:{issues:[],contextualErrorMap:X?.errorMap,async:!0},path:X?.path||[],schemaErrorMap:this._def.errorMap,parent:null,data:W,parsedType:S1(W)},Q=this._parse({data:W,path:Y.path,parent:Y}),G=await($W(Q)?Q:Promise.resolve(Q));return h6(Y,G)}refine(W,X){let Y=(Q)=>{if(typeof X==="string"||typeof X>"u")return{message:X};else if(typeof X==="function")return X(Q);else return X};return this._refinement((Q,G)=>{let z=W(Q),J=()=>G.addIssue({code:l.custom,...Y(Q)});if(typeof Promise<"u"&&z instanceof Promise)return z.then((B)=>{if(!B)return J(),!1;else return!0});if(!z)return J(),!1;else return!0})}refinement(W,X){return this._refinement((Y,Q)=>{if(!W(Y))return Q.addIssue(typeof X==="function"?X(Y,Q):X),!1;else return!0})}_refinement(W){return new D1({schema:this,typeName:B0.ZodEffects,effect:{type:"refinement",refinement:W}})}superRefine(W){return this._refinement(W)}constructor(W){this.spa=this.safeParseAsync,this._def=W,this.parse=this.parse.bind(this),this.safeParse=this.safeParse.bind(this),this.parseAsync=this.parseAsync.bind(this),this.safeParseAsync=this.safeParseAsync.bind(this),this.spa=this.spa.bind(this),this.refine=this.refine.bind(this),this.refinement=this.refinement.bind(this),this.superRefine=this.superRefine.bind(this),this.optional=this.optional.bind(this),this.nullable=this.nullable.bind(this),this.nullish=this.nullish.bind(this),this.array=this.array.bind(this),this.promise=this.promise.bind(this),this.or=this.or.bind(this),this.and=this.and.bind(this),this.transform=this.transform.bind(this),this.brand=this.brand.bind(this),this.default=this.default.bind(this),this.catch=this.catch.bind(this),this.describe=this.describe.bind(this),this.pipe=this.pipe.bind(this),this.readonly=this.readonly.bind(this),this.isNullable=this.isNullable.bind(this),this.isOptional=this.isOptional.bind(this),this["~standard"]={version:1,vendor:"zod",validate:(X)=>this["~validate"](X)}}optional(){return w1.create(this,this._def)}nullable(){return l1.create(this,this._def)}nullish(){return this.nullable().optional()}array(){return O1.create(this)}promise(){return qW.create(this,this._def)}or(W){return cW.create([this,W],this._def)}and(W){return dW.create(this,W,this._def)}transform(W){return new D1({...K0(this._def),schema:this,typeName:B0.ZodEffects,effect:{type:"transform",transform:W}})}default(W){let X=typeof W==="function"?W:()=>W;return new aW({...K0(this._def),innerType:this,defaultValue:X,typeName:B0.ZodDefault})}brand(){return new c8({typeName:B0.ZodBranded,type:this,...K0(this._def)})}catch(W){let X=typeof W==="function"?W:()=>W;return new sW({...K0(this._def),innerType:this,catchValue:X,typeName:B0.ZodCatch})}describe(W){return new this.constructor({...this._def,description:W})}pipe(W){return I8.create(this,W)}readonly(){return tW.create(this)}isOptional(){return this.safeParse(void 0).success}isNullable(){return this.safeParse(null).success}}var d7=/^c[^\s-]{8,}$/i,i7=/^[0-9a-z]+$/,o7=/^[0-9A-HJKMNP-TV-Z]{26}$/i,r7=/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/i,a7=/^[a-z0-9_-]{21}$/i,s7=/^[A-Za-z0-9-_]+\.[A-Za-z0-9-_]+\.[A-Za-z0-9-_]*$/,t7=/^[-+]?P(?!$)(?:(?:[-+]?\d+Y)|(?:[-+]?\d+[.,]\d+Y$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:(?:[-+]?\d+W)|(?:[-+]?\d+[.,]\d+W$))?(?:(?:[-+]?\d+D)|(?:[-+]?\d+[.,]\d+D$))?(?:T(?=[\d+-])(?:(?:[-+]?\d+H)|(?:[-+]?\d+[.,]\d+H$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:[-+]?\d+(?:[.,]\d+)?S)?)??$/,e7=/^(?!\.)(?!.*\.\.)([A-Z0-9_'+\-\.]*)[A-Z0-9_+-]@([A-Z0-9][A-Z0-9\-]*\.)+[A-Z]{2,}$/i,W4="^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$",A9,Q4=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,X4=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/(3[0-2]|[12]?[0-9])$/,J4=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))$/,Y4=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,G4=/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/,z4=/^([0-9a-zA-Z-_]{4})*(([0-9a-zA-Z-_]{2}(==)?)|([0-9a-zA-Z-_]{3}(=)?))?$/,m6="((\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-((0[13578]|1[02])-(0[1-9]|[12]\\d|3[01])|(0[469]|11)-(0[1-9]|[12]\\d|30)|(02)-(0[1-9]|1\\d|2[0-8])))",B4=new RegExp(`^${m6}$`);function l6(W){let X="[0-5]\\d";if(W.precision)X=`${X}\\.\\d{${W.precision}}`;else if(W.precision==null)X=`${X}(\\.\\d+)?`;let Y=W.precision?"+":"?";return`([01]\\d|2[0-3]):[0-5]\\d(:${X})${Y}`}function H4(W){return new RegExp(`^${l6(W)}$`)}function p6(W){let X=`${m6}T${l6(W)}`,Y=[];if(Y.push(W.local?"Z?":"Z"),W.offset)Y.push("([+-]\\d{2}:?\\d{2})");return X=`${X}(${Y.join("|")})`,new RegExp(`^${X}$`)}function q4(W,X){if((X==="v4"||!X)&&Q4.test(W))return!0;if((X==="v6"||!X)&&J4.test(W))return!0;return!1}function M4(W,X){if(!s7.test(W))return!1;try{let[Y]=W.split(".");if(!Y)return!1;let Q=Y.replace(/-/g,"+").replace(/_/g,"/").padEnd(Y.length+(4-Y.length%4)%4,"="),G=JSON.parse(atob(Q));if(typeof G!=="object"||G===null)return!1;if("typ"in G&&G?.typ!=="JWT")return!1;if(!G.alg)return!1;if(X&&G.alg!==X)return!1;return!0}catch{return!1}}function U4(W,X){if((X==="v4"||!X)&&X4.test(W))return!0;if((X==="v6"||!X)&&Y4.test(W))return!0;return!1}class V1 extends V0{_parse(W){if(this._def.coerce)W.data=String(W.data);if(this._getType(W)!==c.string){let G=this._getOrReturnCtx(W);return d(G,{code:l.invalid_type,expected:c.string,received:G.parsedType}),X0}let Y=new r0,Q=void 0;for(let G of this._def.checks)if(G.kind==="min"){if(W.data.length<G.value)Q=this._getOrReturnCtx(W,Q),d(Q,{code:l.too_small,minimum:G.value,type:"string",inclusive:!0,exact:!1,message:G.message}),Y.dirty()}else if(G.kind==="max"){if(W.data.length>G.value)Q=this._getOrReturnCtx(W,Q),d(Q,{code:l.too_big,maximum:G.value,type:"string",inclusive:!0,exact:!1,message:G.message}),Y.dirty()}else if(G.kind==="length"){let z=W.data.length>G.value,J=W.data.length<G.value;if(z||J){if(Q=this._getOrReturnCtx(W,Q),z)d(Q,{code:l.too_big,maximum:G.value,type:"string",inclusive:!0,exact:!0,message:G.message});else if(J)d(Q,{code:l.too_small,minimum:G.value,type:"string",inclusive:!0,exact:!0,message:G.message});Y.dirty()}}else if(G.kind==="email"){if(!e7.test(W.data))Q=this._getOrReturnCtx(W,Q),d(Q,{validation:"email",code:l.invalid_string,message:G.message}),Y.dirty()}else if(G.kind==="emoji"){if(!A9)A9=new RegExp(W4,"u");if(!A9.test(W.data))Q=this._getOrReturnCtx(W,Q),d(Q,{validation:"emoji",code:l.invalid_string,message:G.message}),Y.dirty()}else if(G.kind==="uuid"){if(!r7.test(W.data))Q=this._getOrReturnCtx(W,Q),d(Q,{validation:"uuid",code:l.invalid_string,message:G.message}),Y.dirty()}else if(G.kind==="nanoid"){if(!a7.test(W.data))Q=this._getOrReturnCtx(W,Q),d(Q,{validation:"nanoid",code:l.invalid_string,message:G.message}),Y.dirty()}else if(G.kind==="cuid"){if(!d7.test(W.data))Q=this._getOrReturnCtx(W,Q),d(Q,{validation:"cuid",code:l.invalid_string,message:G.message}),Y.dirty()}else if(G.kind==="cuid2"){if(!i7.test(W.data))Q=this._getOrReturnCtx(W,Q),d(Q,{validation:"cuid2",code:l.invalid_string,message:G.message}),Y.dirty()}else if(G.kind==="ulid"){if(!o7.test(W.data))Q=this._getOrReturnCtx(W,Q),d(Q,{validation:"ulid",code:l.invalid_string,message:G.message}),Y.dirty()}else if(G.kind==="url")try{new URL(W.data)}catch{Q=this._getOrReturnCtx(W,Q),d(Q,{validation:"url",code:l.invalid_string,message:G.message}),Y.dirty()}else if(G.kind==="regex"){if(G.regex.lastIndex=0,!G.regex.test(W.data))Q=this._getOrReturnCtx(W,Q),d(Q,{validation:"regex",code:l.invalid_string,message:G.message}),Y.dirty()}else if(G.kind==="trim")W.data=W.data.trim();else if(G.kind==="includes"){if(!W.data.includes(G.value,G.position))Q=this._getOrReturnCtx(W,Q),d(Q,{code:l.invalid_string,validation:{includes:G.value,position:G.position},message:G.message}),Y.dirty()}else if(G.kind==="toLowerCase")W.data=W.data.toLowerCase();else if(G.kind==="toUpperCase")W.data=W.data.toUpperCase();else if(G.kind==="startsWith"){if(!W.data.startsWith(G.value))Q=this._getOrReturnCtx(W,Q),d(Q,{code:l.invalid_string,validation:{startsWith:G.value},message:G.message}),Y.dirty()}else if(G.kind==="endsWith"){if(!W.data.endsWith(G.value))Q=this._getOrReturnCtx(W,Q),d(Q,{code:l.invalid_string,validation:{endsWith:G.value},message:G.message}),Y.dirty()}else if(G.kind==="datetime"){if(!p6(G).test(W.data))Q=this._getOrReturnCtx(W,Q),d(Q,{code:l.invalid_string,validation:"datetime",message:G.message}),Y.dirty()}else if(G.kind==="date"){if(!B4.test(W.data))Q=this._getOrReturnCtx(W,Q),d(Q,{code:l.invalid_string,validation:"date",message:G.message}),Y.dirty()}else if(G.kind==="time"){if(!H4(G).test(W.data))Q=this._getOrReturnCtx(W,Q),d(Q,{code:l.invalid_string,validation:"time",message:G.message}),Y.dirty()}else if(G.kind==="duration"){if(!t7.test(W.data))Q=this._getOrReturnCtx(W,Q),d(Q,{validation:"duration",code:l.invalid_string,message:G.message}),Y.dirty()}else if(G.kind==="ip"){if(!q4(W.data,G.version))Q=this._getOrReturnCtx(W,Q),d(Q,{validation:"ip",code:l.invalid_string,message:G.message}),Y.dirty()}else if(G.kind==="jwt"){if(!M4(W.data,G.alg))Q=this._getOrReturnCtx(W,Q),d(Q,{validation:"jwt",code:l.invalid_string,message:G.message}),Y.dirty()}else if(G.kind==="cidr"){if(!U4(W.data,G.version))Q=this._getOrReturnCtx(W,Q),d(Q,{validation:"cidr",code:l.invalid_string,message:G.message}),Y.dirty()}else if(G.kind==="base64"){if(!G4.test(W.data))Q=this._getOrReturnCtx(W,Q),d(Q,{validation:"base64",code:l.invalid_string,message:G.message}),Y.dirty()}else if(G.kind==="base64url"){if(!z4.test(W.data))Q=this._getOrReturnCtx(W,Q),d(Q,{validation:"base64url",code:l.invalid_string,message:G.message}),Y.dirty()}else O0.assertNever(G);return{status:Y.value,value:W.data}}_regex(W,X,Y){return this.refinement((Q)=>W.test(Q),{validation:X,code:l.invalid_string,...t.errToObj(Y)})}_addCheck(W){return new V1({...this._def,checks:[...this._def.checks,W]})}email(W){return this._addCheck({kind:"email",...t.errToObj(W)})}url(W){return this._addCheck({kind:"url",...t.errToObj(W)})}emoji(W){return this._addCheck({kind:"emoji",...t.errToObj(W)})}uuid(W){return this._addCheck({kind:"uuid",...t.errToObj(W)})}nanoid(W){return this._addCheck({kind:"nanoid",...t.errToObj(W)})}cuid(W){return this._addCheck({kind:"cuid",...t.errToObj(W)})}cuid2(W){return this._addCheck({kind:"cuid2",...t.errToObj(W)})}ulid(W){return this._addCheck({kind:"ulid",...t.errToObj(W)})}base64(W){return this._addCheck({kind:"base64",...t.errToObj(W)})}base64url(W){return this._addCheck({kind:"base64url",...t.errToObj(W)})}jwt(W){return this._addCheck({kind:"jwt",...t.errToObj(W)})}ip(W){return this._addCheck({kind:"ip",...t.errToObj(W)})}cidr(W){return this._addCheck({kind:"cidr",...t.errToObj(W)})}datetime(W){if(typeof W==="string")return this._addCheck({kind:"datetime",precision:null,offset:!1,local:!1,message:W});return this._addCheck({kind:"datetime",precision:typeof W?.precision>"u"?null:W?.precision,offset:W?.offset??!1,local:W?.local??!1,...t.errToObj(W?.message)})}date(W){return this._addCheck({kind:"date",message:W})}time(W){if(typeof W==="string")return this._addCheck({kind:"time",precision:null,message:W});return this._addCheck({kind:"time",precision:typeof W?.precision>"u"?null:W?.precision,...t.errToObj(W?.message)})}duration(W){return this._addCheck({kind:"duration",...t.errToObj(W)})}regex(W,X){return this._addCheck({kind:"regex",regex:W,...t.errToObj(X)})}includes(W,X){return this._addCheck({kind:"includes",value:W,position:X?.position,...t.errToObj(X?.message)})}startsWith(W,X){return this._addCheck({kind:"startsWith",value:W,...t.errToObj(X)})}endsWith(W,X){return this._addCheck({kind:"endsWith",value:W,...t.errToObj(X)})}min(W,X){return this._addCheck({kind:"min",value:W,...t.errToObj(X)})}max(W,X){return this._addCheck({kind:"max",value:W,...t.errToObj(X)})}length(W,X){return this._addCheck({kind:"length",value:W,...t.errToObj(X)})}nonempty(W){return this.min(1,t.errToObj(W))}trim(){return new V1({...this._def,checks:[...this._def.checks,{kind:"trim"}]})}toLowerCase(){return new V1({...this._def,checks:[...this._def.checks,{kind:"toLowerCase"}]})}toUpperCase(){return new V1({...this._def,checks:[...this._def.checks,{kind:"toUpperCase"}]})}get isDatetime(){return!!this._def.checks.find((W)=>W.kind==="datetime")}get isDate(){return!!this._def.checks.find((W)=>W.kind==="date")}get isTime(){return!!this._def.checks.find((W)=>W.kind==="time")}get isDuration(){return!!this._def.checks.find((W)=>W.kind==="duration")}get isEmail(){return!!this._def.checks.find((W)=>W.kind==="email")}get isURL(){return!!this._def.checks.find((W)=>W.kind==="url")}get isEmoji(){return!!this._def.checks.find((W)=>W.kind==="emoji")}get isUUID(){return!!this._def.checks.find((W)=>W.kind==="uuid")}get isNANOID(){return!!this._def.checks.find((W)=>W.kind==="nanoid")}get isCUID(){return!!this._def.checks.find((W)=>W.kind==="cuid")}get isCUID2(){return!!this._def.checks.find((W)=>W.kind==="cuid2")}get isULID(){return!!this._def.checks.find((W)=>W.kind==="ulid")}get isIP(){return!!this._def.checks.find((W)=>W.kind==="ip")}get isCIDR(){return!!this._def.checks.find((W)=>W.kind==="cidr")}get isBase64(){return!!this._def.checks.find((W)=>W.kind==="base64")}get isBase64url(){return!!this._def.checks.find((W)=>W.kind==="base64url")}get minLength(){let W=null;for(let X of this._def.checks)if(X.kind==="min"){if(W===null||X.value>W)W=X.value}return W}get maxLength(){let W=null;for(let X of this._def.checks)if(X.kind==="max"){if(W===null||X.value<W)W=X.value}return W}}V1.create=(W)=>{return new V1({checks:[],typeName:B0.ZodString,coerce:W?.coerce??!1,...K0(W)})};function F4(W,X){let Y=(W.toString().split(".")[1]||"").length,Q=(X.toString().split(".")[1]||"").length,G=Y>Q?Y:Q,z=Number.parseInt(W.toFixed(G).replace(".","")),J=Number.parseInt(X.toFixed(G).replace(".",""));return z%J/10**G}class o1 extends V0{constructor(){super(...arguments);this.min=this.gte,this.max=this.lte,this.step=this.multipleOf}_parse(W){if(this._def.coerce)W.data=Number(W.data);if(this._getType(W)!==c.number){let G=this._getOrReturnCtx(W);return d(G,{code:l.invalid_type,expected:c.number,received:G.parsedType}),X0}let Y=void 0,Q=new r0;for(let G of this._def.checks)if(G.kind==="int"){if(!O0.isInteger(W.data))Y=this._getOrReturnCtx(W,Y),d(Y,{code:l.invalid_type,expected:"integer",received:"float",message:G.message}),Q.dirty()}else if(G.kind==="min"){if(G.inclusive?W.data<G.value:W.data<=G.value)Y=this._getOrReturnCtx(W,Y),d(Y,{code:l.too_small,minimum:G.value,type:"number",inclusive:G.inclusive,exact:!1,message:G.message}),Q.dirty()}else if(G.kind==="max"){if(G.inclusive?W.data>G.value:W.data>=G.value)Y=this._getOrReturnCtx(W,Y),d(Y,{code:l.too_big,maximum:G.value,type:"number",inclusive:G.inclusive,exact:!1,message:G.message}),Q.dirty()}else if(G.kind==="multipleOf"){if(F4(W.data,G.value)!==0)Y=this._getOrReturnCtx(W,Y),d(Y,{code:l.not_multiple_of,multipleOf:G.value,message:G.message}),Q.dirty()}else if(G.kind==="finite"){if(!Number.isFinite(W.data))Y=this._getOrReturnCtx(W,Y),d(Y,{code:l.not_finite,message:G.message}),Q.dirty()}else O0.assertNever(G);return{status:Q.value,value:W.data}}gte(W,X){return this.setLimit("min",W,!0,t.toString(X))}gt(W,X){return this.setLimit("min",W,!1,t.toString(X))}lte(W,X){return this.setLimit("max",W,!0,t.toString(X))}lt(W,X){return this.setLimit("max",W,!1,t.toString(X))}setLimit(W,X,Y,Q){return new o1({...this._def,checks:[...this._def.checks,{kind:W,value:X,inclusive:Y,message:t.toString(Q)}]})}_addCheck(W){return new o1({...this._def,checks:[...this._def.checks,W]})}int(W){return this._addCheck({kind:"int",message:t.toString(W)})}positive(W){return this._addCheck({kind:"min",value:0,inclusive:!1,message:t.toString(W)})}negative(W){return this._addCheck({kind:"max",value:0,inclusive:!1,message:t.toString(W)})}nonpositive(W){return this._addCheck({kind:"max",value:0,inclusive:!0,message:t.toString(W)})}nonnegative(W){return this._addCheck({kind:"min",value:0,inclusive:!0,message:t.toString(W)})}multipleOf(W,X){return this._addCheck({kind:"multipleOf",value:W,message:t.toString(X)})}finite(W){return this._addCheck({kind:"finite",message:t.toString(W)})}safe(W){return this._addCheck({kind:"min",inclusive:!0,value:Number.MIN_SAFE_INTEGER,message:t.toString(W)})._addCheck({kind:"max",inclusive:!0,value:Number.MAX_SAFE_INTEGER,message:t.toString(W)})}get minValue(){let W=null;for(let X of this._def.checks)if(X.kind==="min"){if(W===null||X.value>W)W=X.value}return W}get maxValue(){let W=null;for(let X of this._def.checks)if(X.kind==="max"){if(W===null||X.value<W)W=X.value}return W}get isInt(){return!!this._def.checks.find((W)=>W.kind==="int"||W.kind==="multipleOf"&&O0.isInteger(W.value))}get isFinite(){let W=null,X=null;for(let Y of this._def.checks)if(Y.kind==="finite"||Y.kind==="int"||Y.kind==="multipleOf")return!0;else if(Y.kind==="min"){if(X===null||Y.value>X)X=Y.value}else if(Y.kind==="max"){if(W===null||Y.value<W)W=Y.value}return Number.isFinite(X)&&Number.isFinite(W)}}o1.create=(W)=>{return new o1({checks:[],typeName:B0.ZodNumber,coerce:W?.coerce||!1,...K0(W)})};class r1 extends V0{constructor(){super(...arguments);this.min=this.gte,this.max=this.lte}_parse(W){if(this._def.coerce)try{W.data=BigInt(W.data)}catch{return this._getInvalidInput(W)}if(this._getType(W)!==c.bigint)return this._getInvalidInput(W);let Y=void 0,Q=new r0;for(let G of this._def.checks)if(G.kind==="min"){if(G.inclusive?W.data<G.value:W.data<=G.value)Y=this._getOrReturnCtx(W,Y),d(Y,{code:l.too_small,type:"bigint",minimum:G.value,inclusive:G.inclusive,message:G.message}),Q.dirty()}else if(G.kind==="max"){if(G.inclusive?W.data>G.value:W.data>=G.value)Y=this._getOrReturnCtx(W,Y),d(Y,{code:l.too_big,type:"bigint",maximum:G.value,inclusive:G.inclusive,message:G.message}),Q.dirty()}else if(G.kind==="multipleOf"){if(W.data%G.value!==BigInt(0))Y=this._getOrReturnCtx(W,Y),d(Y,{code:l.not_multiple_of,multipleOf:G.value,message:G.message}),Q.dirty()}else O0.assertNever(G);return{status:Q.value,value:W.data}}_getInvalidInput(W){let X=this._getOrReturnCtx(W);return d(X,{code:l.invalid_type,expected:c.bigint,received:X.parsedType}),X0}gte(W,X){return this.setLimit("min",W,!0,t.toString(X))}gt(W,X){return this.setLimit("min",W,!1,t.toString(X))}lte(W,X){return this.setLimit("max",W,!0,t.toString(X))}lt(W,X){return this.setLimit("max",W,!1,t.toString(X))}setLimit(W,X,Y,Q){return new r1({...this._def,checks:[...this._def.checks,{kind:W,value:X,inclusive:Y,message:t.toString(Q)}]})}_addCheck(W){return new r1({...this._def,checks:[...this._def.checks,W]})}positive(W){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!1,message:t.toString(W)})}negative(W){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!1,message:t.toString(W)})}nonpositive(W){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!0,message:t.toString(W)})}nonnegative(W){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!0,message:t.toString(W)})}multipleOf(W,X){return this._addCheck({kind:"multipleOf",value:W,message:t.toString(X)})}get minValue(){let W=null;for(let X of this._def.checks)if(X.kind==="min"){if(W===null||X.value>W)W=X.value}return W}get maxValue(){let W=null;for(let X of this._def.checks)if(X.kind==="max"){if(W===null||X.value<W)W=X.value}return W}}r1.create=(W)=>{return new r1({checks:[],typeName:B0.ZodBigInt,coerce:W?.coerce??!1,...K0(W)})};class pW extends V0{_parse(W){if(this._def.coerce)W.data=Boolean(W.data);if(this._getType(W)!==c.boolean){let Y=this._getOrReturnCtx(W);return d(Y,{code:l.invalid_type,expected:c.boolean,received:Y.parsedType}),X0}return t0(W.data)}}pW.create=(W)=>{return new pW({typeName:B0.ZodBoolean,coerce:W?.coerce||!1,...K0(W)})};class zW extends V0{_parse(W){if(this._def.coerce)W.data=new Date(W.data);if(this._getType(W)!==c.date){let G=this._getOrReturnCtx(W);return d(G,{code:l.invalid_type,expected:c.date,received:G.parsedType}),X0}if(Number.isNaN(W.data.getTime())){let G=this._getOrReturnCtx(W);return d(G,{code:l.invalid_date}),X0}let Y=new r0,Q=void 0;for(let G of this._def.checks)if(G.kind==="min"){if(W.data.getTime()<G.value)Q=this._getOrReturnCtx(W,Q),d(Q,{code:l.too_small,message:G.message,inclusive:!0,exact:!1,minimum:G.value,type:"date"}),Y.dirty()}else if(G.kind==="max"){if(W.data.getTime()>G.value)Q=this._getOrReturnCtx(W,Q),d(Q,{code:l.too_big,message:G.message,inclusive:!0,exact:!1,maximum:G.value,type:"date"}),Y.dirty()}else O0.assertNever(G);return{status:Y.value,value:new Date(W.data.getTime())}}_addCheck(W){return new zW({...this._def,checks:[...this._def.checks,W]})}min(W,X){return this._addCheck({kind:"min",value:W.getTime(),message:t.toString(X)})}max(W,X){return this._addCheck({kind:"max",value:W.getTime(),message:t.toString(X)})}get minDate(){let W=null;for(let X of this._def.checks)if(X.kind==="min"){if(W===null||X.value>W)W=X.value}return W!=null?new Date(W):null}get maxDate(){let W=null;for(let X of this._def.checks)if(X.kind==="max"){if(W===null||X.value<W)W=X.value}return W!=null?new Date(W):null}}zW.create=(W)=>{return new zW({checks:[],coerce:W?.coerce||!1,typeName:B0.ZodDate,...K0(W)})};class O8 extends V0{_parse(W){if(this._getType(W)!==c.symbol){let Y=this._getOrReturnCtx(W);return d(Y,{code:l.invalid_type,expected:c.symbol,received:Y.parsedType}),X0}return t0(W.data)}}O8.create=(W)=>{return new O8({typeName:B0.ZodSymbol,...K0(W)})};class uW extends V0{_parse(W){if(this._getType(W)!==c.undefined){let Y=this._getOrReturnCtx(W);return d(Y,{code:l.invalid_type,expected:c.undefined,received:Y.parsedType}),X0}return t0(W.data)}}uW.create=(W)=>{return new uW({typeName:B0.ZodUndefined,...K0(W)})};class nW extends V0{_parse(W){if(this._getType(W)!==c.null){let Y=this._getOrReturnCtx(W);return d(Y,{code:l.invalid_type,expected:c.null,received:Y.parsedType}),X0}return t0(W.data)}}nW.create=(W)=>{return new nW({typeName:B0.ZodNull,...K0(W)})};class BW extends V0{constructor(){super(...arguments);this._any=!0}_parse(W){return t0(W.data)}}BW.create=(W)=>{return new BW({typeName:B0.ZodAny,...K0(W)})};class i1 extends V0{constructor(){super(...arguments);this._unknown=!0}_parse(W){return t0(W.data)}}i1.create=(W)=>{return new i1({typeName:B0.ZodUnknown,...K0(W)})};class P1 extends V0{_parse(W){let X=this._getOrReturnCtx(W);return d(X,{code:l.invalid_type,expected:c.never,received:X.parsedType}),X0}}P1.create=(W)=>{return new P1({typeName:B0.ZodNever,...K0(W)})};class w8 extends V0{_parse(W){if(this._getType(W)!==c.undefined){let Y=this._getOrReturnCtx(W);return d(Y,{code:l.invalid_type,expected:c.void,received:Y.parsedType}),X0}return t0(W.data)}}w8.create=(W)=>{return new w8({typeName:B0.ZodVoid,...K0(W)})};class O1 extends V0{_parse(W){let{ctx:X,status:Y}=this._processInputParams(W),Q=this._def;if(X.parsedType!==c.array)return d(X,{code:l.invalid_type,expected:c.array,received:X.parsedType}),X0;if(Q.exactLength!==null){let z=X.data.length>Q.exactLength.value,J=X.data.length<Q.exactLength.value;if(z||J)d(X,{code:z?l.too_big:l.too_small,minimum:J?Q.exactLength.value:void 0,maximum:z?Q.exactLength.value:void 0,type:"array",inclusive:!0,exact:!0,message:Q.exactLength.message}),Y.dirty()}if(Q.minLength!==null){if(X.data.length<Q.minLength.value)d(X,{code:l.too_small,minimum:Q.minLength.value,type:"array",inclusive:!0,exact:!1,message:Q.minLength.message}),Y.dirty()}if(Q.maxLength!==null){if(X.data.length>Q.maxLength.value)d(X,{code:l.too_big,maximum:Q.maxLength.value,type:"array",inclusive:!0,exact:!1,message:Q.maxLength.message}),Y.dirty()}if(X.common.async)return Promise.all([...X.data].map((z,J)=>{return Q.type._parseAsync(new R1(X,z,X.path,J))})).then((z)=>{return r0.mergeArray(Y,z)});let G=[...X.data].map((z,J)=>{return Q.type._parseSync(new R1(X,z,X.path,J))});return r0.mergeArray(Y,G)}get element(){return this._def.type}min(W,X){return new O1({...this._def,minLength:{value:W,message:t.toString(X)}})}max(W,X){return new O1({...this._def,maxLength:{value:W,message:t.toString(X)}})}length(W,X){return new O1({...this._def,exactLength:{value:W,message:t.toString(X)}})}nonempty(W){return this.min(1,W)}}O1.create=(W,X)=>{return new O1({type:W,minLength:null,maxLength:null,exactLength:null,typeName:B0.ZodArray,...K0(X)})};function mW(W){if(W instanceof u0){let X={};for(let Y in W.shape){let Q=W.shape[Y];X[Y]=w1.create(mW(Q))}return new u0({...W._def,shape:()=>X})}else if(W instanceof O1)return new O1({...W._def,type:mW(W.element)});else if(W instanceof w1)return w1.create(mW(W.unwrap()));else if(W instanceof l1)return l1.create(mW(W.unwrap()));else if(W instanceof v1)return v1.create(W.items.map((X)=>mW(X)));else return W}class u0 extends V0{constructor(){super(...arguments);this._cached=null,this.nonstrict=this.passthrough,this.augment=this.extend}_getCached(){if(this._cached!==null)return this._cached;let W=this._def.shape(),X=O0.objectKeys(W);return this._cached={shape:W,keys:X},this._cached}_parse(W){if(this._getType(W)!==c.object){let M=this._getOrReturnCtx(W);return d(M,{code:l.invalid_type,expected:c.object,received:M.parsedType}),X0}let{status:Y,ctx:Q}=this._processInputParams(W),{shape:G,keys:z}=this._getCached(),J=[];if(!(this._def.catchall instanceof P1&&this._def.unknownKeys==="strip")){for(let M in Q.data)if(!z.includes(M))J.push(M)}let B=[];for(let M of z){let q=G[M],j=Q.data[M];B.push({key:{status:"valid",value:M},value:q._parse(new R1(Q,j,Q.path,M)),alwaysSet:M in Q.data})}if(this._def.catchall instanceof P1){let M=this._def.unknownKeys;if(M==="passthrough")for(let q of J)B.push({key:{status:"valid",value:q},value:{status:"valid",value:Q.data[q]}});else if(M==="strict"){if(J.length>0)d(Q,{code:l.unrecognized_keys,keys:J}),Y.dirty()}else if(M==="strip");else throw Error("Internal ZodObject error: invalid unknownKeys value.")}else{let M=this._def.catchall;for(let q of J){let j=Q.data[q];B.push({key:{status:"valid",value:q},value:M._parse(new R1(Q,j,Q.path,q)),alwaysSet:q in Q.data})}}if(Q.common.async)return Promise.resolve().then(async()=>{let M=[];for(let q of B){let j=await q.key,I=await q.value;M.push({key:j,value:I,alwaysSet:q.alwaysSet})}return M}).then((M)=>{return r0.mergeObjectSync(Y,M)});else return r0.mergeObjectSync(Y,B)}get shape(){return this._def.shape()}strict(W){return t.errToObj,new u0({...this._def,unknownKeys:"strict",...W!==void 0?{errorMap:(X,Y)=>{let Q=this._def.errorMap?.(X,Y).message??Y.defaultError;if(X.code==="unrecognized_keys")return{message:t.errToObj(W).message??Q};return{message:Q}}}:{}})}strip(){return new u0({...this._def,unknownKeys:"strip"})}passthrough(){return new u0({...this._def,unknownKeys:"passthrough"})}extend(W){return new u0({...this._def,shape:()=>({...this._def.shape(),...W})})}merge(W){return new u0({unknownKeys:W._def.unknownKeys,catchall:W._def.catchall,shape:()=>({...this._def.shape(),...W._def.shape()}),typeName:B0.ZodObject})}setKey(W,X){return this.augment({[W]:X})}catchall(W){return new u0({...this._def,catchall:W})}pick(W){let X={};for(let Y of O0.objectKeys(W))if(W[Y]&&this.shape[Y])X[Y]=this.shape[Y];return new u0({...this._def,shape:()=>X})}omit(W){let X={};for(let Y of O0.objectKeys(this.shape))if(!W[Y])X[Y]=this.shape[Y];return new u0({...this._def,shape:()=>X})}deepPartial(){return mW(this)}partial(W){let X={};for(let Y of O0.objectKeys(this.shape)){let Q=this.shape[Y];if(W&&!W[Y])X[Y]=Q;else X[Y]=Q.optional()}return new u0({...this._def,shape:()=>X})}required(W){let X={};for(let Y of O0.objectKeys(this.shape))if(W&&!W[Y])X[Y]=this.shape[Y];else{let G=this.shape[Y];while(G instanceof w1)G=G._def.innerType;X[Y]=G}return new u0({...this._def,shape:()=>X})}keyof(){return u6(O0.objectKeys(this.shape))}}u0.create=(W,X)=>{return new u0({shape:()=>W,unknownKeys:"strip",catchall:P1.create(),typeName:B0.ZodObject,...K0(X)})};u0.strictCreate=(W,X)=>{return new u0({shape:()=>W,unknownKeys:"strict",catchall:P1.create(),typeName:B0.ZodObject,...K0(X)})};u0.lazycreate=(W,X)=>{return new u0({shape:W,unknownKeys:"strip",catchall:P1.create(),typeName:B0.ZodObject,...K0(X)})};class cW extends V0{_parse(W){let{ctx:X}=this._processInputParams(W),Y=this._def.options;function Q(G){for(let J of G)if(J.result.status==="valid")return J.result;for(let J of G)if(J.result.status==="dirty")return X.common.issues.push(...J.ctx.common.issues),J.result;let z=G.map((J)=>new X1(J.ctx.common.issues));return d(X,{code:l.invalid_union,unionErrors:z}),X0}if(X.common.async)return Promise.all(Y.map(async(G)=>{let z={...X,common:{...X.common,issues:[]},parent:null};return{result:await G._parseAsync({data:X.data,path:X.path,parent:z}),ctx:z}})).then(Q);else{let G=void 0,z=[];for(let B of Y){let M={...X,common:{...X.common,issues:[]},parent:null},q=B._parseSync({data:X.data,path:X.path,parent:M});if(q.status==="valid")return q;else if(q.status==="dirty"&&!G)G={result:q,ctx:M};if(M.common.issues.length)z.push(M.common.issues)}if(G)return X.common.issues.push(...G.ctx.common.issues),G.result;let J=z.map((B)=>new X1(B));return d(X,{code:l.invalid_union,unionErrors:J}),X0}}get options(){return this._def.options}}cW.create=(W,X)=>{return new cW({options:W,typeName:B0.ZodUnion,...K0(X)})};var m1=(W)=>{if(W instanceof iW)return m1(W.schema);else if(W instanceof D1)return m1(W.innerType());else if(W instanceof oW)return[W.value];else if(W instanceof a1)return W.options;else if(W instanceof rW)return O0.objectValues(W.enum);else if(W instanceof aW)return m1(W._def.innerType);else if(W instanceof uW)return[void 0];else if(W instanceof nW)return[null];else if(W instanceof w1)return[void 0,...m1(W.unwrap())];else if(W instanceof l1)return[null,...m1(W.unwrap())];else if(W instanceof c8)return m1(W.unwrap());else if(W instanceof tW)return m1(W.unwrap());else if(W instanceof sW)return m1(W._def.innerType);else return[]};class n8 extends V0{_parse(W){let{ctx:X}=this._processInputParams(W);if(X.parsedType!==c.object)return d(X,{code:l.invalid_type,expected:c.object,received:X.parsedType}),X0;let Y=this.discriminator,Q=X.data[Y],G=this.optionsMap.get(Q);if(!G)return d(X,{code:l.invalid_union_discriminator,options:Array.from(this.optionsMap.keys()),path:[Y]}),X0;if(X.common.async)return G._parseAsync({data:X.data,path:X.path,parent:X});else return G._parseSync({data:X.data,path:X.path,parent:X})}get discriminator(){return this._def.discriminator}get options(){return this._def.options}get optionsMap(){return this._def.optionsMap}static create(W,X,Y){let Q=new Map;for(let G of X){let z=m1(G.shape[W]);if(!z.length)throw Error(`A discriminator value for key \`${W}\` could not be extracted from all schema options`);for(let J of z){if(Q.has(J))throw Error(`Discriminator property ${String(W)} has duplicate value ${String(J)}`);Q.set(J,G)}}return new n8({typeName:B0.ZodDiscriminatedUnion,discriminator:W,options:X,optionsMap:Q,...K0(Y)})}}function V9(W,X){let Y=S1(W),Q=S1(X);if(W===X)return{valid:!0,data:W};else if(Y===c.object&&Q===c.object){let G=O0.objectKeys(X),z=O0.objectKeys(W).filter((B)=>G.indexOf(B)!==-1),J={...W,...X};for(let B of z){let M=V9(W[B],X[B]);if(!M.valid)return{valid:!1};J[B]=M.data}return{valid:!0,data:J}}else if(Y===c.array&&Q===c.array){if(W.length!==X.length)return{valid:!1};let G=[];for(let z=0;z<W.length;z++){let J=W[z],B=X[z],M=V9(J,B);if(!M.valid)return{valid:!1};G.push(M.data)}return{valid:!0,data:G}}else if(Y===c.date&&Q===c.date&&+W===+X)return{valid:!0,data:W};else return{valid:!1}}class dW extends V0{_parse(W){let{status:X,ctx:Y}=this._processInputParams(W),Q=(G,z)=>{if(p8(G)||p8(z))return X0;let J=V9(G.value,z.value);if(!J.valid)return d(Y,{code:l.invalid_intersection_types}),X0;if(u8(G)||u8(z))X.dirty();return{status:X.value,value:J.data}};if(Y.common.async)return Promise.all([this._def.left._parseAsync({data:Y.data,path:Y.path,parent:Y}),this._def.right._parseAsync({data:Y.data,path:Y.path,parent:Y})]).then(([G,z])=>Q(G,z));else return Q(this._def.left._parseSync({data:Y.data,path:Y.path,parent:Y}),this._def.right._parseSync({data:Y.data,path:Y.path,parent:Y}))}}dW.create=(W,X,Y)=>{return new dW({left:W,right:X,typeName:B0.ZodIntersection,...K0(Y)})};class v1 extends V0{_parse(W){let{status:X,ctx:Y}=this._processInputParams(W);if(Y.parsedType!==c.array)return d(Y,{code:l.invalid_type,expected:c.array,received:Y.parsedType}),X0;if(Y.data.length<this._def.items.length)return d(Y,{code:l.too_small,minimum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),X0;if(!this._def.rest&&Y.data.length>this._def.items.length)d(Y,{code:l.too_big,maximum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),X.dirty();let G=[...Y.data].map((z,J)=>{let B=this._def.items[J]||this._def.rest;if(!B)return null;return B._parse(new R1(Y,z,Y.path,J))}).filter((z)=>!!z);if(Y.common.async)return Promise.all(G).then((z)=>{return r0.mergeArray(X,z)});else return r0.mergeArray(X,G)}get items(){return this._def.items}rest(W){return new v1({...this._def,rest:W})}}v1.create=(W,X)=>{if(!Array.isArray(W))throw Error("You must pass an array of schemas to z.tuple([ ... ])");return new v1({items:W,typeName:B0.ZodTuple,rest:null,...K0(X)})};class R8 extends V0{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(W){let{status:X,ctx:Y}=this._processInputParams(W);if(Y.parsedType!==c.object)return d(Y,{code:l.invalid_type,expected:c.object,received:Y.parsedType}),X0;let Q=[],G=this._def.keyType,z=this._def.valueType;for(let J in Y.data)Q.push({key:G._parse(new R1(Y,J,Y.path,J)),value:z._parse(new R1(Y,Y.data[J],Y.path,J)),alwaysSet:J in Y.data});if(Y.common.async)return r0.mergeObjectAsync(X,Q);else return r0.mergeObjectSync(X,Q)}get element(){return this._def.valueType}static create(W,X,Y){if(X instanceof V0)return new R8({keyType:W,valueType:X,typeName:B0.ZodRecord,...K0(Y)});return new R8({keyType:V1.create(),valueType:W,typeName:B0.ZodRecord,...K0(X)})}}class D8 extends V0{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(W){let{status:X,ctx:Y}=this._processInputParams(W);if(Y.parsedType!==c.map)return d(Y,{code:l.invalid_type,expected:c.map,received:Y.parsedType}),X0;let Q=this._def.keyType,G=this._def.valueType,z=[...Y.data.entries()].map(([J,B],M)=>{return{key:Q._parse(new R1(Y,J,Y.path,[M,"key"])),value:G._parse(new R1(Y,B,Y.path,[M,"value"]))}});if(Y.common.async){let J=new Map;return Promise.resolve().then(async()=>{for(let B of z){let M=await B.key,q=await B.value;if(M.status==="aborted"||q.status==="aborted")return X0;if(M.status==="dirty"||q.status==="dirty")X.dirty();J.set(M.value,q.value)}return{status:X.value,value:J}})}else{let J=new Map;for(let B of z){let{key:M,value:q}=B;if(M.status==="aborted"||q.status==="aborted")return X0;if(M.status==="dirty"||q.status==="dirty")X.dirty();J.set(M.value,q.value)}return{status:X.value,value:J}}}}D8.create=(W,X,Y)=>{return new D8({valueType:X,keyType:W,typeName:B0.ZodMap,...K0(Y)})};class HW extends V0{_parse(W){let{status:X,ctx:Y}=this._processInputParams(W);if(Y.parsedType!==c.set)return d(Y,{code:l.invalid_type,expected:c.set,received:Y.parsedType}),X0;let Q=this._def;if(Q.minSize!==null){if(Y.data.size<Q.minSize.value)d(Y,{code:l.too_small,minimum:Q.minSize.value,type:"set",inclusive:!0,exact:!1,message:Q.minSize.message}),X.dirty()}if(Q.maxSize!==null){if(Y.data.size>Q.maxSize.value)d(Y,{code:l.too_big,maximum:Q.maxSize.value,type:"set",inclusive:!0,exact:!1,message:Q.maxSize.message}),X.dirty()}let G=this._def.valueType;function z(B){let M=new Set;for(let q of B){if(q.status==="aborted")return X0;if(q.status==="dirty")X.dirty();M.add(q.value)}return{status:X.value,value:M}}let J=[...Y.data.values()].map((B,M)=>G._parse(new R1(Y,B,Y.path,M)));if(Y.common.async)return Promise.all(J).then((B)=>z(B));else return z(J)}min(W,X){return new HW({...this._def,minSize:{value:W,message:t.toString(X)}})}max(W,X){return new HW({...this._def,maxSize:{value:W,message:t.toString(X)}})}size(W,X){return this.min(W,X).max(W,X)}nonempty(W){return this.min(1,W)}}HW.create=(W,X)=>{return new HW({valueType:W,minSize:null,maxSize:null,typeName:B0.ZodSet,...K0(X)})};class lW extends V0{constructor(){super(...arguments);this.validate=this.implement}_parse(W){let{ctx:X}=this._processInputParams(W);if(X.parsedType!==c.function)return d(X,{code:l.invalid_type,expected:c.function,received:X.parsedType}),X0;function Y(J,B){return V8({data:J,path:X.path,errorMaps:[X.common.contextualErrorMap,X.schemaErrorMap,hW(),$1].filter((M)=>!!M),issueData:{code:l.invalid_arguments,argumentsError:B}})}function Q(J,B){return V8({data:J,path:X.path,errorMaps:[X.common.contextualErrorMap,X.schemaErrorMap,hW(),$1].filter((M)=>!!M),issueData:{code:l.invalid_return_type,returnTypeError:B}})}let G={errorMap:X.common.contextualErrorMap},z=X.data;if(this._def.returns instanceof qW){let J=this;return t0(async function(...B){let M=new X1([]),q=await J._def.args.parseAsync(B,G).catch((C)=>{throw M.addIssue(Y(B,C)),M}),j=await Reflect.apply(z,this,q);return await J._def.returns._def.type.parseAsync(j,G).catch((C)=>{throw M.addIssue(Q(j,C)),M})})}else{let J=this;return t0(function(...B){let M=J._def.args.safeParse(B,G);if(!M.success)throw new X1([Y(B,M.error)]);let q=Reflect.apply(z,this,M.data),j=J._def.returns.safeParse(q,G);if(!j.success)throw new X1([Q(q,j.error)]);return j.data})}}parameters(){return this._def.args}returnType(){return this._def.returns}args(...W){return new lW({...this._def,args:v1.create(W).rest(i1.create())})}returns(W){return new lW({...this._def,returns:W})}implement(W){return this.parse(W)}strictImplement(W){return this.parse(W)}static create(W,X,Y){return new lW({args:W?W:v1.create([]).rest(i1.create()),returns:X||i1.create(),typeName:B0.ZodFunction,...K0(Y)})}}class iW extends V0{get schema(){return this._def.getter()}_parse(W){let{ctx:X}=this._processInputParams(W);return this._def.getter()._parse({data:X.data,path:X.path,parent:X})}}iW.create=(W,X)=>{return new iW({getter:W,typeName:B0.ZodLazy,...K0(X)})};class oW extends V0{_parse(W){if(W.data!==this._def.value){let X=this._getOrReturnCtx(W);return d(X,{received:X.data,code:l.invalid_literal,expected:this._def.value}),X0}return{status:"valid",value:W.data}}get value(){return this._def.value}}oW.create=(W,X)=>{return new oW({value:W,typeName:B0.ZodLiteral,...K0(X)})};function u6(W,X){return new a1({values:W,typeName:B0.ZodEnum,...K0(X)})}class a1 extends V0{_parse(W){if(typeof W.data!=="string"){let X=this._getOrReturnCtx(W),Y=this._def.values;return d(X,{expected:O0.joinValues(Y),received:X.parsedType,code:l.invalid_type}),X0}if(!this._cache)this._cache=new Set(this._def.values);if(!this._cache.has(W.data)){let X=this._getOrReturnCtx(W),Y=this._def.values;return d(X,{received:X.data,code:l.invalid_enum_value,options:Y}),X0}return t0(W.data)}get options(){return this._def.values}get enum(){let W={};for(let X of this._def.values)W[X]=X;return W}get Values(){let W={};for(let X of this._def.values)W[X]=X;return W}get Enum(){let W={};for(let X of this._def.values)W[X]=X;return W}extract(W,X=this._def){return a1.create(W,{...this._def,...X})}exclude(W,X=this._def){return a1.create(this.options.filter((Y)=>!W.includes(Y)),{...this._def,...X})}}a1.create=u6;class rW extends V0{_parse(W){let X=O0.getValidEnumValues(this._def.values),Y=this._getOrReturnCtx(W);if(Y.parsedType!==c.string&&Y.parsedType!==c.number){let Q=O0.objectValues(X);return d(Y,{expected:O0.joinValues(Q),received:Y.parsedType,code:l.invalid_type}),X0}if(!this._cache)this._cache=new Set(O0.getValidEnumValues(this._def.values));if(!this._cache.has(W.data)){let Q=O0.objectValues(X);return d(Y,{received:Y.data,code:l.invalid_enum_value,options:Q}),X0}return t0(W.data)}get enum(){return this._def.values}}rW.create=(W,X)=>{return new rW({values:W,typeName:B0.ZodNativeEnum,...K0(X)})};class qW extends V0{unwrap(){return this._def.type}_parse(W){let{ctx:X}=this._processInputParams(W);if(X.parsedType!==c.promise&&X.common.async===!1)return d(X,{code:l.invalid_type,expected:c.promise,received:X.parsedType}),X0;let Y=X.parsedType===c.promise?X.data:Promise.resolve(X.data);return t0(Y.then((Q)=>{return this._def.type.parseAsync(Q,{path:X.path,errorMap:X.common.contextualErrorMap})}))}}qW.create=(W,X)=>{return new qW({type:W,typeName:B0.ZodPromise,...K0(X)})};class D1 extends V0{innerType(){return this._def.schema}sourceType(){return this._def.schema._def.typeName===B0.ZodEffects?this._def.schema.sourceType():this._def.schema}_parse(W){let{status:X,ctx:Y}=this._processInputParams(W),Q=this._def.effect||null,G={addIssue:(z)=>{if(d(Y,z),z.fatal)X.abort();else X.dirty()},get path(){return Y.path}};if(G.addIssue=G.addIssue.bind(G),Q.type==="preprocess"){let z=Q.transform(Y.data,G);if(Y.common.async)return Promise.resolve(z).then(async(J)=>{if(X.value==="aborted")return X0;let B=await this._def.schema._parseAsync({data:J,path:Y.path,parent:Y});if(B.status==="aborted")return X0;if(B.status==="dirty")return GW(B.value);if(X.value==="dirty")return GW(B.value);return B});else{if(X.value==="aborted")return X0;let J=this._def.schema._parseSync({data:z,path:Y.path,parent:Y});if(J.status==="aborted")return X0;if(J.status==="dirty")return GW(J.value);if(X.value==="dirty")return GW(J.value);return J}}if(Q.type==="refinement"){let z=(J)=>{let B=Q.refinement(J,G);if(Y.common.async)return Promise.resolve(B);if(B instanceof Promise)throw Error("Async refinement encountered during synchronous parse operation. Use .parseAsync instead.");return J};if(Y.common.async===!1){let J=this._def.schema._parseSync({data:Y.data,path:Y.path,parent:Y});if(J.status==="aborted")return X0;if(J.status==="dirty")X.dirty();return z(J.value),{status:X.value,value:J.value}}else return this._def.schema._parseAsync({data:Y.data,path:Y.path,parent:Y}).then((J)=>{if(J.status==="aborted")return X0;if(J.status==="dirty")X.dirty();return z(J.value).then(()=>{return{status:X.value,value:J.value}})})}if(Q.type==="transform")if(Y.common.async===!1){let z=this._def.schema._parseSync({data:Y.data,path:Y.path,parent:Y});if(!d1(z))return X0;let J=Q.transform(z.value,G);if(J instanceof Promise)throw Error("Asynchronous transform encountered during synchronous parse operation. Use .parseAsync instead.");return{status:X.value,value:J}}else return this._def.schema._parseAsync({data:Y.data,path:Y.path,parent:Y}).then((z)=>{if(!d1(z))return X0;return Promise.resolve(Q.transform(z.value,G)).then((J)=>({status:X.value,value:J}))});O0.assertNever(Q)}}D1.create=(W,X,Y)=>{return new D1({schema:W,typeName:B0.ZodEffects,effect:X,...K0(Y)})};D1.createWithPreprocess=(W,X,Y)=>{return new D1({schema:X,effect:{type:"preprocess",transform:W},typeName:B0.ZodEffects,...K0(Y)})};class w1 extends V0{_parse(W){if(this._getType(W)===c.undefined)return t0(void 0);return this._def.innerType._parse(W)}unwrap(){return this._def.innerType}}w1.create=(W,X)=>{return new w1({innerType:W,typeName:B0.ZodOptional,...K0(X)})};class l1 extends V0{_parse(W){if(this._getType(W)===c.null)return t0(null);return this._def.innerType._parse(W)}unwrap(){return this._def.innerType}}l1.create=(W,X)=>{return new l1({innerType:W,typeName:B0.ZodNullable,...K0(X)})};class aW extends V0{_parse(W){let{ctx:X}=this._processInputParams(W),Y=X.data;if(X.parsedType===c.undefined)Y=this._def.defaultValue();return this._def.innerType._parse({data:Y,path:X.path,parent:X})}removeDefault(){return this._def.innerType}}aW.create=(W,X)=>{return new aW({innerType:W,typeName:B0.ZodDefault,defaultValue:typeof X.default==="function"?X.default:()=>X.default,...K0(X)})};class sW extends V0{_parse(W){let{ctx:X}=this._processInputParams(W),Y={...X,common:{...X.common,issues:[]}},Q=this._def.innerType._parse({data:Y.data,path:Y.path,parent:{...Y}});if($W(Q))return Q.then((G)=>{return{status:"valid",value:G.status==="valid"?G.value:this._def.catchValue({get error(){return new X1(Y.common.issues)},input:Y.data})}});else return{status:"valid",value:Q.status==="valid"?Q.value:this._def.catchValue({get error(){return new X1(Y.common.issues)},input:Y.data})}}removeCatch(){return this._def.innerType}}sW.create=(W,X)=>{return new sW({innerType:W,typeName:B0.ZodCatch,catchValue:typeof X.catch==="function"?X.catch:()=>X.catch,...K0(X)})};class _8 extends V0{_parse(W){if(this._getType(W)!==c.nan){let Y=this._getOrReturnCtx(W);return d(Y,{code:l.invalid_type,expected:c.nan,received:Y.parsedType}),X0}return{status:"valid",value:W.data}}}_8.create=(W)=>{return new _8({typeName:B0.ZodNaN,...K0(W)})};var L4=Symbol("zod_brand");class c8 extends V0{_parse(W){let{ctx:X}=this._processInputParams(W),Y=X.data;return this._def.type._parse({data:Y,path:X.path,parent:X})}unwrap(){return this._def.type}}class I8 extends V0{_parse(W){let{status:X,ctx:Y}=this._processInputParams(W);if(Y.common.async)return(async()=>{let G=await this._def.in._parseAsync({data:Y.data,path:Y.path,parent:Y});if(G.status==="aborted")return X0;if(G.status==="dirty")return X.dirty(),GW(G.value);else return this._def.out._parseAsync({data:G.value,path:Y.path,parent:Y})})();else{let Q=this._def.in._parseSync({data:Y.data,path:Y.path,parent:Y});if(Q.status==="aborted")return X0;if(Q.status==="dirty")return X.dirty(),{status:"dirty",value:Q.value};else return this._def.out._parseSync({data:Q.value,path:Y.path,parent:Y})}}static create(W,X){return new I8({in:W,out:X,typeName:B0.ZodPipeline})}}class tW extends V0{_parse(W){let X=this._def.innerType._parse(W),Y=(Q)=>{if(d1(Q))Q.value=Object.freeze(Q.value);return Q};return $W(X)?X.then((Q)=>Y(Q)):Y(X)}unwrap(){return this._def.innerType}}tW.create=(W,X)=>{return new tW({innerType:W,typeName:B0.ZodReadonly,...K0(X)})};function $6(W,X){let Y=typeof W==="function"?W(X):typeof W==="string"?{message:W}:W;return typeof Y==="string"?{message:Y}:Y}function n6(W,X={},Y){if(W)return BW.create().superRefine((Q,G)=>{let z=W(Q);if(z instanceof Promise)return z.then((J)=>{if(!J){let B=$6(X,Q),M=B.fatal??Y??!0;G.addIssue({code:"custom",...B,fatal:M})}});if(!z){let J=$6(X,Q),B=J.fatal??Y??!0;G.addIssue({code:"custom",...J,fatal:B})}return});return BW.create()}var j4={object:u0.lazycreate},B0;(function(W){W.ZodString="ZodString",W.ZodNumber="ZodNumber",W.ZodNaN="ZodNaN",W.ZodBigInt="ZodBigInt",W.ZodBoolean="ZodBoolean",W.ZodDate="ZodDate",W.ZodSymbol="ZodSymbol",W.ZodUndefined="ZodUndefined",W.ZodNull="ZodNull",W.ZodAny="ZodAny",W.ZodUnknown="ZodUnknown",W.ZodNever="ZodNever",W.ZodVoid="ZodVoid",W.ZodArray="ZodArray",W.ZodObject="ZodObject",W.ZodUnion="ZodUnion",W.ZodDiscriminatedUnion="ZodDiscriminatedUnion",W.ZodIntersection="ZodIntersection",W.ZodTuple="ZodTuple",W.ZodRecord="ZodRecord",W.ZodMap="ZodMap",W.ZodSet="ZodSet",W.ZodFunction="ZodFunction",W.ZodLazy="ZodLazy",W.ZodLiteral="ZodLiteral",W.ZodEnum="ZodEnum",W.ZodEffects="ZodEffects",W.ZodNativeEnum="ZodNativeEnum",W.ZodOptional="ZodOptional",W.ZodNullable="ZodNullable",W.ZodDefault="ZodDefault",W.ZodCatch="ZodCatch",W.ZodPromise="ZodPromise",W.ZodBranded="ZodBranded",W.ZodPipeline="ZodPipeline",W.ZodReadonly="ZodReadonly"})(B0||(B0={}));var N4=(W,X={message:`Input not instance of ${W.name}`})=>n6((Y)=>Y instanceof W,X),c6=V1.create,d6=o1.create,K4=_8.create,A4=r1.create,i6=pW.create,V4=zW.create,O4=O8.create,w4=uW.create,R4=nW.create,D4=BW.create,_4=i1.create,I4=P1.create,C4=w8.create,E4=O1.create,b4=u0.create,S4=u0.strictCreate,P4=cW.create,v4=n8.create,Z4=dW.create,T4=v1.create,k4=R8.create,g4=D8.create,x4=HW.create,f4=lW.create,y4=iW.create,h4=oW.create,$4=a1.create,m4=rW.create,l4=qW.create,p4=D1.create,u4=w1.create,n4=l1.create,c4=D1.createWithPreprocess,d4=I8.create,i4=()=>c6().optional(),o4=()=>d6().optional(),r4=()=>i6().optional(),a4={string:(W)=>V1.create({...W,coerce:!0}),number:(W)=>o1.create({...W,coerce:!0}),boolean:(W)=>pW.create({...W,coerce:!0}),bigint:(W)=>r1.create({...W,coerce:!0}),date:(W)=>zW.create({...W,coerce:!0})};var s4=X0;var WG=T0.union([T0.object({taskRunJwt:T0.string()}),T0.object({anthropicApiKey:T0.string()})]),QG=T0.object({workspaceDir:T0.string(),changedFiles:T0.array(T0.string()),prTitle:T0.string(),prDescription:T0.string(),baseBranch:T0.string(),headBranch:T0.string(),outputDir:T0.string(),pathToClaudeCodeExecutable:T0.string().optional(),installCommand:T0.string().optional(),devCommand:T0.string().optional(),auth:WG}),XG="/var/log/cmux/screenshot-collector";function JG(){try{t4("/var/log/cmux",{recursive:!0})}catch{}}async function g0(W){let Y=`${new Date().toISOString()} ${W}`;console.error(Y);try{await d8.appendFile(XG,`${Y}
`,{encoding:"utf8"})}catch{}}function YG(W){switch(W.type){case"assistant":{let X=W.message.content,Y=[];for(let Q of X)if(Q.type==="text")Y.push(`\uD83D\uDCAC ${Q.text}`);else if(Q.type==="tool_use")Y.push(GG(Q.name,Q.input));if(W.message.usage)Y.push(`   \u2514\u2500 tokens: in=${W.message.usage.input_tokens} out=${W.message.usage.output_tokens}`);return Y.join(`
`)}case"user":{let X=W.message.content;if(typeof X==="string")return`\uD83D\uDC64 User: ${X}`;if(Array.isArray(X)){let Y=[];for(let Q of X)if("type"in Q&&Q.type==="tool_result")Y.push(zG(Q.tool_use_id,Q.content));else if("type"in Q&&Q.type==="text")Y.push(`\uD83D\uDC64 User: ${Q.text}`);return Y.join(`
`)}return"\uD83D\uDC64 User message (complex content)"}case"result":{let X=`${W.num_turns} turns, ${W.duration_ms}ms`;if(W.subtype==="success")return`
\u2705 Success (${X}, $${W.total_cost_usd.toFixed(4)})
   Result: ${W.result}`;return`\u274C Error: ${W.subtype} (${X}, $${W.total_cost_usd.toFixed(4)})`}case"system":switch(W.subtype){case"init":return`
\uD83D\uDD27 System initialized
   Model: ${W.model}
   Tools: ${W.tools.length} available
   MCP Servers: ${W.mcp_servers.map((X)=>`${X.name}(${X.status})`).join(", ")}
   Permission Mode: ${W.permissionMode}`;case"compact_boundary":return`\uD83D\uDCE6 Compacted (${W.compact_metadata.trigger}, ${W.compact_metadata.pre_tokens} tokens)`;case"hook_response":return`\uD83E\uDE9D Hook: ${W.hook_name} (${W.hook_event}) - exit ${W.exit_code??"N/A"}`;case"status":return`\uD83D\uDD04 Status: ${W.status??"idle"}`;default:return"\uD83D\uDD27 System: unknown"}case"tool_progress":{let X=W.parent_tool_use_id===null?"":` (child of ${W.parent_tool_use_id})`;return`\u23F3 Tool progress: ${W.tool_name} ${X} after ${W.elapsed_time_seconds.toFixed(1)}s`}case"auth_status":{let X=W.output.length>0?` output="${W.output.join(" | ")}"`:"",Y=W.error?` error="${W.error}"`:"";return`\uD83D\uDD10 Auth status: ${W.isAuthenticating?"authenticating":"idle"}${X}${Y}`}case"stream_event":return"";default:return"\u2753 Unknown message type"}}function GG(W,X){let Y=qG(W),Q=HG(W,X);return`${Y} ${W}${Q}`}function zG(W,X){let Y;if(typeof X==="string")Y=X;else if(Array.isArray(X))Y=X.map((G)=>{if(typeof G==="object"&&G!==null&&"type"in G&&G.type==="tool_result")return BG(G.content);return JSON.stringify(G)}).join(" ");else Y=JSON.stringify(X);if(Y.length>200)Y=Y.slice(0,200)+"...";return`   ${typeof X==="object"&&X!==null&&"is_error"in X&&X.is_error===!0?"\u274C":"\u2713"} Result: ${Y}`}function BG(W){if(typeof W==="string")return W;return JSON.stringify(W)}function HG(W,X){switch(W){case"Read":return` ${X.file_path}`;case"Write":{let Y=X.file_path,Q=String(X.content||"").split(`
`).length;return` ${Y} (${Q} lines)`}case"Edit":return` ${X.file_path}`;case"Bash":{let Y=String(X.command||"");return` ${Y.length>50?Y.slice(0,50)+"...":Y}`}case"Glob":case"Grep":return` "${X.pattern}"`;case"mcp___playwright_mcp__browser_navigate":return` \u2192 ${X.url}`;case"mcp___playwright_mcp__browser_take_screenshot":return` \uD83D\uDCF8 ${X.name||"screenshot"}`;case"mcp___playwright_mcp__browser_click":return` ${X.selector}`;case"TodoWrite":{let Y=X.todos;if(!Y||Y.length===0)return" (0 items)";let Q=(z)=>{switch(z){case"completed":return"\u2705";case"in_progress":return"\u23F3";case"pending":return"\u2B55";default:return"\u2753"}};return Y.map((z)=>`
   ${Q(z.status)} ${z.content}`).join("")}default:{let Y=Object.keys(X);if(Y.length===0)return"";if(Y.length===1&&Y[0]){let Q=X[Y[0]];if(typeof Q==="string"&&Q.length<40)return` ${Q}`}return` {${Y.join(", ")}}`}}}function qG(W){if(W.startsWith("mcp___playwright_mcp__browser_"))switch(W.replace("mcp___playwright_mcp__browser_","")){case"navigate":case"navigate_back":return"\uD83C\uDF10";case"click":case"hover":return"\uD83D\uDC46";case"take_screenshot":case"snapshot":return"\uD83D\uDCF8";case"type":case"fill_form":return"\u2328\uFE0F";case"close":return"\u274C";default:return"\uD83C\uDFAD"}switch(W){case"Read":return"\uD83D\uDCD6";case"Write":return"\u270D\uFE0F";case"Edit":return"\u270F\uFE0F";case"Bash":return"\uD83D\uDD28";case"Glob":return"\uD83D\uDD0D";case"Grep":return"\uD83D\uDD0E";case"TodoWrite":return"\uD83D\uDCDD";case"Task":return"\uD83E\uDD16";case"WebFetch":return"\uD83C\uDF10";case"WebSearch":return"\uD83D\uDD0D";default:return"\uD83D\uDD27"}}var MG="/root/screenshots",UG=new Set([".png",".jpg",".jpeg",".webp"]);function FG(W){return UG.has(a0.extname(W).toLowerCase())}var LG=T0.object({hasUiChanges:T0.boolean(),images:T0.array(T0.object({path:T0.string().min(1),description:T0.string().min(1)})).default([])}),jG={$schema:"http://json-schema.org/draft-07/schema#",type:"object",additionalProperties:!1,required:["hasUiChanges","images"],properties:{hasUiChanges:{type:"boolean"},images:{type:"array",items:{type:"object",additionalProperties:!1,required:["path","description"],properties:{path:{type:"string"},description:{type:"string"}}}}}};async function r6(W){let X=await d8.readdir(W,{withFileTypes:!0}),Y=[],Q=!1;for(let G of X){let z=a0.join(W,G.name);if(G.isDirectory()){Q=!0;let J=await r6(z);Y.push(...J.files)}else if(G.isFile()&&FG(G.name))Y.push(z)}return{files:Y,hasNestedDirectories:Q}}function a6(W){if(a0.isAbsolute(W))return a0.normalize(W);return a0.resolve(MG,W)}function NG(W){return"taskRunJwt"in W}async function o6(W,X){let{workspaceDir:Y,changedFiles:Q,prTitle:G,prDescription:z,outputDir:J,auth:B,installCommand:M,devCommand:q}=W,j=a6(J),I=NG(B),C=!I?B.anthropicApiKey:void 0,V=(()=>{if(!M&&!q)return`
The user did not provide installation or dev commands. You will need to discover them by reading README.md, package.json, .devcontainer.json, or other configuration files.`;let A=["The user provided the following commands:"];if(M)A.push(`<install_command>
${M}
</install_command>`);else A.push("(No install command provided - check README.md or package.json)");if(q)A.push(`<dev_command>
${q}
</dev_command>`);else A.push("(No dev command provided - check README.md or package.json)");return`
`+A.join(`
`)})(),R=`You are a screenshot collector for pull request reviews. Your job is to determine if a PR contains UI changes and, if so, capture screenshots of those changes.

<PR_CONTEXT>
Title: ${G}
Description: ${z||"No description provided"}
Branch: ${X}
Files changed:
${Q.map((A)=>`- ${A}`).join(`
`)}
</PR_CONTEXT>

<ENVIRONMENT>
Working directory: ${Y}
Screenshot output directory: ${j}
${V}
</ENVIRONMENT>

<PHASE_1_ANALYSIS>
First, analyze the changed files to determine if this PR contains UI changes.

IMPORTANT: Base your decision on the ACTUAL FILES CHANGED, not the PR title or description. PR descriptions can be misleading or incomplete. If the diff contains UI-affecting code, there ARE UI changes regardless of what the description says.

UI changes ARE present if the PR modifies code that affects what users see in the browser:
- Frontend components or templates (any framework: React, Vue, Rails ERB, PHP Blade, Django templates, etc.)
- Stylesheets (CSS, SCSS, Tailwind, styled-components, etc.)
- Markup or template files (HTML, JSX, ERB, Twig, Jinja, Handlebars, etc.)
- Client-side JavaScript/TypeScript that affects rendering
- UI states like loading indicators, error messages, empty states, or toasts
- Accessibility attributes, ARIA labels, or semantic markup

UI changes are NOT present if the PR only modifies:
- Server-side logic that doesn't change what's rendered (API handlers, database queries, background jobs)
- Configuration files (unless they affect theming or UI behavior)
- Tests, documentation, or build scripts
- Type definitions or interfaces for non-UI code

If no UI changes exist: Set hasUiChanges=false, take ZERO screenshots, and explain why. Do not start the dev server or open a browser.
</PHASE_1_ANALYSIS>

<PHASE_2_CAPTURE>
If UI changes exist, capture screenshots:

1. FIRST, check if the dev server is ALREADY RUNNING:
   - Run \`tmux list-windows\` and \`tmux capture-pane -p -t <window>\` to see running processes and their logs
   - Check if there's a dev server process starting up or already running in any tmux window
   - The dev server is typically started automatically in this environment - BE PATIENT and monitor the logs
   - If you see the server is starting/compiling, WAIT for it to finish - do NOT kill it or restart it
   - Use \`ss -tlnp | grep LISTEN\` to see what ports have servers listening
2. ONLY if no server is running anywhere: Read CLAUDE.md, README.md, or package.json for setup instructions. Install dependencies if needed, then start the dev server.
3. BE PATIENT - servers can take time to compile. Monitor tmux logs to see progress. A response from curl (even 404) means the server is up. Do NOT restart the server if it's still compiling.
4. Navigate to the pages/components modified in the PR
5. Capture screenshots of the changes, including:
   - The default/resting state of changed components
   - Interactive states: hover, focus, active, disabled
   - Conditional states: loading, error, empty, success (if the PR modifies these!)
   - Hidden UI: modals, dropdowns, tooltips, accordions
   - Responsive layouts if the PR includes responsive changes
6. Save screenshots to ${j} with descriptive names like "component-state-${X}.png"
7. After taking a screenshot, always open the image to verify that the capture is expected
8. If screenshot seems outdated, refresh the page and take the screenshot again.
9. Delete any screenshot files from the filesystem that you do not want included
</PHASE_2_CAPTURE>

<WHAT_TO_CAPTURE>
Screenshot the UI states that the PR actually modifies. Be intentional:

- If the PR changes a loading spinner \u2192 screenshot the loading state
- If the PR changes error handling UI \u2192 screenshot the error state
- If the PR changes a skeleton loader \u2192 screenshot the skeleton
- If the PR changes hover styles \u2192 screenshot the hover state
- If the PR changes a modal \u2192 open and screenshot the modal

Don't screenshot loading/error states incidentally while waiting for the "real" UI. Screenshot them when they ARE the change.
</WHAT_TO_CAPTURE>

<CRITICAL_MISTAKES>
Avoid these failure modes:

FALSE POSITIVE: Taking screenshots when the PR has no UI changes. Backend-only, config, or test changes = hasUiChanges=false, zero screenshots.

FALSE NEGATIVE: Failing to capture screenshots when UI changes exist. If React components, CSS, or templates changed, you MUST capture them.

FAKE UI: Creating mock HTML files instead of screenshotting the real app. Never fabricate UIs. If the dev server won't start, report the failure.

WRONG PAGE: Screenshotting pages unrelated to the PR. Only capture components/pages that the changed files actually render.

DUPLICATE SCREENSHOTS: Taking multiple identical screenshots. Each screenshot should show something distinct.

INCOMPLETE CAPTURE: Missing important UI elements. Ensure full components are visible and not cut off.
</CRITICAL_MISTAKES>

<OUTPUT_REQUIREMENTS>
- Set hasUiChanges to true only if the PR modifies UI-rendering code AND you captured screenshots
- Set hasUiChanges to false if the PR has no UI changes (with zero screenshots)
- Include every screenshot path with a description of what it shows
- Do not close the browser when done
- Do not create summary documents
</OUTPUT_REQUIREMENTS>`;await g0(`Starting Claude Agent with browser MCP for branch: ${X}`);let U=[],L=null;try{let A=Object.prototype.hasOwnProperty.call(process.env,"ANTHROPIC_API_KEY"),N=process.env.ANTHROPIC_API_KEY;if(I)delete process.env.ANTHROPIC_API_KEY,await g0(`Using taskRun JWT auth. JWT present: ${!!B.taskRunJwt}, JWT length: ${B.taskRunJwt?.length??0}, JWT first 20 chars: ${B.taskRunJwt?.substring(0,20)??"N/A"}`),await g0("ANTHROPIC_BASE_URL: https://www.cmux.dev/api/anthropic");else if(C)process.env.ANTHROPIC_API_KEY=C,await g0(`Using API key auth. Key present: ${!!C}, Key length: ${C?.length??0}`);await g0(`Arguments to Claude Code: ${JSON.stringify({prompt:R,cwd:Y,pathToClaudeCodeExecutable:W.pathToClaudeCodeExecutable})}`);try{for await(let O of f6({prompt:R,options:{model:"claude-opus-4-5",mcpServers:{chrome:{command:"bunx",args:["chrome-devtools-mcp","--browserUrl","http://0.0.0.0:39382"]}},allowDangerouslySkipPermissions:!0,permissionMode:"bypassPermissions",cwd:Y,pathToClaudeCodeExecutable:W.pathToClaudeCodeExecutable,outputFormat:{type:"json_schema",schema:jG},env:{...process.env,IS_SANDBOX:"1",CLAUDE_CODE_ENABLE_TELEMETRY:"0",CLAUDE_CODE_DISABLE_NONESSENTIAL_TRAFFIC:"1",...I?{ANTHROPIC_API_KEY:"sk_placeholder_cmux_anthropic_api_key",ANTHROPIC_BASE_URL:"https://www.cmux.dev/api/anthropic",ANTHROPIC_CUSTOM_HEADERS:`x-cmux-token:${B.taskRunJwt}`}:{}},stderr:(S)=>g0(`[claude-code-stderr] ${S}`)}})){let S=YG(O);if(S)await g0(S);if(O.type==="result"&&"structured_output"in O){let Z=LG.safeParse(O.structured_output);if(Z.success)L=Z.data,await g0(`Structured output captured (hasUiChanges=${Z.data.hasUiChanges}, images=${Z.data.images.length})`);else await g0(`Structured output validation failed: ${Z.error.message}`)}}}catch(O){throw await g0(`Failed to capture screenshots with Claude Agent: ${O instanceof Error?O.message:String(O)}`),O}finally{if(A)if(N!==void 0)process.env.ANTHROPIC_API_KEY=N;else delete process.env.ANTHROPIC_API_KEY;else delete process.env.ANTHROPIC_API_KEY}try{let{files:O,hasNestedDirectories:S}=await r6(j);if(S)await g0(`Detected nested screenshot folders under ${j}. Please keep all screenshots directly in the output directory.`);let Z=Array.from(new Set(O.map((g)=>a0.normalize(g)))).sort();U.push(...Z)}catch(O){await g0(`Could not read screenshot directory: ${O instanceof Error?O.message:String(O)}`)}let _=new Map,x=a0.resolve(j);if(L)for(let O of L.images){let S=a0.isAbsolute(O.path)?a0.normalize(O.path):a0.normalize(a0.resolve(x,O.path));_.set(S,O.description)}let P=U.map((O)=>{let S=a0.normalize(O);return{path:O,description:_.get(S)}});if(L&&L.images.length>0&&_.size===0)await g0("Structured output provided image descriptions, but none matched saved files; ensure paths are absolute or relative to the output directory.");return{screenshots:P,hasUiChanges:L?.hasUiChanges}}catch(A){let N=A instanceof Error?A.message:String(A??"unknown error");if(await g0(`Failed to capture screenshots with Claude Agent: ${N}`),A instanceof Error){if(A.stack)await g0(`Stack trace: ${A.stack}`);let _=A,x=Object.keys(_).filter((P)=>!["message","stack","name"].includes(P)).map((P)=>`${P}: ${JSON.stringify(_[P])}`).join(", ");if(x)await g0(`Error details: ${x}`)}throw A}}async function KG(W){let{workspaceDir:X,changedFiles:Y,prTitle:Q,prDescription:G,baseBranch:z,headBranch:J,outputDir:B}=W,M=a6(B);try{if(await g0(`Starting PR screenshot capture in ${X}`),Y.length===0)return await g0("No files changed in PR"),{status:"skipped",reason:"No files changed in PR"};await g0(`Found ${Y.length} changed files: ${Y.join(", ")}`),await d8.mkdir(M,{recursive:!0});let q=[],j;if(!1){await g0(`Capturing 'before' screenshots for base branch: ${z}`);let V=await o6(W,z);if(q.push(...V.screenshots),V.hasUiChanges!==void 0)j=V.hasUiChanges;await g0(`Captured ${V.screenshots.length} 'before' screenshots`)}await g0(`Capturing 'after' screenshots for head branch: ${J}`);let C=await o6(W,J);if(q.push(...C.screenshots),C.hasUiChanges!==void 0)j=C.hasUiChanges;return await g0(`Captured ${C.screenshots.length} 'after' screenshots`),await g0(`Screenshot capture completed. Total: ${q.length} screenshots saved to ${M}`),{status:"completed",screenshots:q,hasUiChanges:j}}catch(q){let j=q instanceof Error?q.message:String(q??"unknown error");return await g0(`PR screenshot capture failed: ${j}`),{status:"failed",error:j}}}async function AG(){JG();let{values:W}=e4({options:{config:{type:"string",short:"c"},version:{type:"boolean",short:"v"}}});if(W.version)console.log("claude-screenshot-collector v__VERSION__"),process.exit(0);if(!W.config)console.error("Error: --config argument is required"),console.error("Usage: bun run claude-screenshot-collector.ts --config /path/to/config.json"),process.exit(1);try{let X=await d8.readFile(W.config,"utf8"),Y=JSON.parse(X),Q=QG.parse(Y);await g0(`Loaded config from ${W.config}`);let G=await KG(Q);console.log(JSON.stringify(G,null,2)),process.exit(G.status==="failed"?1:0)}catch(X){if(X instanceof T0.ZodError)console.error("Config validation error:",JSON.stringify(X.errors,null,2));else console.error("Fatal error:",X instanceof Error?X.message:String(X));process.exit(1)}}AG();
