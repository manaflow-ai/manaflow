# =============================================================================
# cmux Self-Hosting Environment Configuration
# =============================================================================
#
# Copy this file to .env.selfhost and fill in the values:
#   cp .env.selfhost.template .env.selfhost
#
# Then run:
#   docker compose -f docker-compose.selfhost.yml --env-file .env.selfhost up -d
#
# =============================================================================

# =============================================================================
# HOST CONFIGURATION
# =============================================================================
# Your server's IP address (used for browser access)
# For local development, use 127.0.0.1
# For remote access, use your server's public IP or hostname
HOST_IP=127.0.0.1

# =============================================================================
# CONVEX BACKEND (Required)
# =============================================================================
# Convex ports
CONVEX_PORT=9777
CONVEX_SITE_PORT=9778
CONVEX_DASHBOARD_PORT=6791

# Instance name (any identifier)
CONVEX_INSTANCE_NAME=cmux

# Instance secret - REQUIRED
# Generate with: openssl rand -hex 32
CONVEX_INSTANCE_SECRET=

# Admin key (optional, for admin operations)
# Generate with: cargo run --bin generate_key -- cmux $CONVEX_INSTANCE_SECRET
# Or leave empty for local development
CONVEX_SELF_HOSTED_ADMIN_KEY=

# Log level
CONVEX_LOG_LEVEL=info

# =============================================================================
# CMUX WORKER
# =============================================================================
# cmux image version (latest, main, or specific tag)
CMUX_VERSION=latest

# Worker ID (unique identifier for this worker)
WORKER_ID=cmux-worker-1

# Worker ports
WORKER_EXEC_PORT=39375
WORKER_PORT=39377
IDE_PORT=39378
PROXY_PORT=39379
VNC_PORT=39380
CDP_PORT=39381
CDP_TARGET_PORT=39382
PTY_PORT=39383

# Standalone mode ports (used with --profile standalone)
STANDALONE_IDE_PORT=8080
STANDALONE_VNC_PORT=8081
STANDALONE_WORKER_PORT=8082

# =============================================================================
# AUTHENTICATION (Optional but recommended)
# =============================================================================
# JWT secret for task run tokens
# Generate with: openssl rand -hex 32
CMUX_TASK_RUN_JWT_SECRET=

# =============================================================================
# GIT CONFIGURATION (Optional)
# =============================================================================
# GitHub Personal Access Token (for private repos)
GITHUB_TOKEN=

# Git author/committer info
GIT_AUTHOR_NAME=cmux
GIT_AUTHOR_EMAIL=cmux@localhost
GIT_COMMITTER_NAME=cmux
GIT_COMMITTER_EMAIL=cmux@localhost

# =============================================================================
# AI PROVIDER API KEYS (Optional - for agent functionality)
# =============================================================================
# Anthropic API key (for Claude Code)
ANTHROPIC_API_KEY=

# OpenAI API key (for other agents)
OPENAI_API_KEY=

# =============================================================================
# EXTERNAL STORAGE (Optional - for Convex)
# =============================================================================
# PostgreSQL URL (for production deployments)
DATABASE_URL=
POSTGRES_URL=

# AWS S3 (for file storage)
AWS_REGION=
AWS_ACCESS_KEY_ID=
AWS_SECRET_ACCESS_KEY=
S3_STORAGE_FILES_BUCKET=
