{"id":"cmux2-03i","title":"Handle 'too many open files' error when user opens too many sandboxes","description":"","status":"open","priority":2,"issue_type":"bug","created_at":"2025-12-02T21:37:29.675991-08:00","updated_at":"2025-12-02T21:37:29.675991-08:00","labels":["sandbox"]}
{"id":"cmux2-1af","title":"Implement cmux prune command for interactive cleanup of unused sandboxes","description":"","status":"in_progress","priority":2,"issue_type":"feature","created_at":"2025-12-02T15:28:30.679424-08:00","updated_at":"2025-12-05T22:41:18.336754-08:00","labels":["sandbox"]}
{"id":"cmux2-1fx","title":"Terminal shows stray # artifacts before prompts","description":"## Problem\nTerminal shows stray `#` characters appearing on their own lines before the actual shell prompt:\n```\n#\nroot@sandbox-15:/workspace (main)#\n#\nroot@sandbox-15:/workspace (main)#\n```\n\n## Hypotheses\n\n1. **Shell prompt carriage return issue**: The shell writes `#` first, then uses `\\r` to overwrite with full prompt, but our terminal isn't clearing the line properly on `\\r`\n\n2. **Terminal resize timing**: When terminal connects, resize signal causes shell to redraw prompt before size is properly set, leaving partial renders\n\n3. **vcs_info (git) in zsh prompt**: The `precmd() { vcs_info }` hook runs before each prompt. If it outputs anything or has timing issues with the async git status, could cause double renders\n\n4. **Line wrapping + resize**: Long prompt wrapping then getting redrawn at different width could leave the trailing `#` character as an artifact\n\n5. **Connection timing**: Terminal connects while shell is mid-prompt-output, causing partial characters to be captured\n\n## Relevant files\n- `src/mux/terminal.rs` - Virtual terminal emulator\n- `src/mux/grid.rs` - Grid resize handling\n- `src/bubblewrap.rs:419` - zsh PROMPT definition with vcs_info","status":"open","priority":2,"issue_type":"bug","created_at":"2025-12-03T18:37:04.803472-08:00","updated_at":"2025-12-03T18:40:33.119309-08:00","labels":["sandbox"]}
{"id":"cmux2-2dh","title":"Preinstall mise in sandbox","description":"","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-05T22:29:12.635166-08:00","updated_at":"2025-12-05T22:29:12.635166-08:00","labels":["sandbox"]}
{"id":"cmux2-2ry","title":"Port cmux-proxy - header-based HTTP/WS/TCP proxy","description":"Port the cmux-proxy crate from ../../crates/cmux-proxy to packages/sandbox.\n\n**Features to port:**\n- Header-based routing using X-Cmux-Host-Override header\n- HTTP/1.1 and HTTP/2 support with auto-detection\n- WebSocket upgrade handling and bidirectional proxying\n- TCP CONNECT tunneling for arbitrary TCP connections\n- Connection pooling and keep-alive management\n- Multiple listen addresses support\n- Configurable default upstream host\n\n**Use cases:**\n- Route external requests to sandboxed services based on headers\n- Enable WebSocket connections to sandboxed apps\n- TCP tunneling for database connections, etc.","status":"open","priority":2,"issue_type":"feature","created_at":"2025-12-04T18:58:08.348438-08:00","updated_at":"2025-12-04T18:58:08.348438-08:00","labels":["sandbox"]}
{"id":"cmux2-2s8","title":"Make zsh default shell and copy user's zshrc, plugins, and history into container","description":"","status":"closed","priority":2,"issue_type":"feature","created_at":"2025-12-02T15:28:19.053185-08:00","updated_at":"2025-12-02T16:17:08.574616-08:00","closed_at":"2025-12-02T16:17:08.574616-08:00","labels":["sandbox"]}
{"id":"cmux2-3tz","title":"Refactor virtual terminal using zellij strategy for performance and edge cases","description":"","status":"open","priority":3,"issue_type":"task","created_at":"2025-12-02T15:28:34.279873-08:00","updated_at":"2025-12-02T15:28:34.279873-08:00","labels":["sandbox"]}
{"id":"cmux2-5dx","title":"Dogfooding: Add command palette action for merging feature branches","description":"","status":"open","priority":2,"issue_type":"feature","created_at":"2025-12-02T15:28:42.184904-08:00","updated_at":"2025-12-02T15:28:42.184904-08:00","labels":["sandbox"]}
{"id":"cmux2-5jp","title":"Fix Alt+Shift+X keybinding not triggering DeleteSandbox","description":"When pressing Alt+Shift+X, it just types instead of triggering the delete sandbox command. The keybinding is defined with KeyCode::Char('X') (uppercase) but macOS terminals may report shift+letter differently.","status":"closed","priority":2,"issue_type":"bug","created_at":"2025-12-02T17:19:46.268812-08:00","updated_at":"2025-12-02T17:48:54.829342-08:00","closed_at":"2025-12-02T17:48:54.829342-08:00","labels":["sandbox"]}
{"id":"cmux2-5xq","title":"Support TUI pointer control in terminal (OSC22, xterm-style cursor sequences)","description":"","status":"open","priority":3,"issue_type":"feature","created_at":"2025-12-02T15:28:32.576193-08:00","updated_at":"2025-12-02T15:28:32.576193-08:00","labels":["sandbox"]}
{"id":"cmux2-73d","title":"Add fake CLIs for editors (zed, cursor, code, windsurf) that trigger open editor via unix socket, alias to cmux-bridge","description":"","status":"closed","priority":2,"issue_type":"feature","created_at":"2025-12-05T01:27:23.238274-08:00","updated_at":"2025-12-05T01:51:16.344611-08:00","closed_at":"2025-12-05T01:51:16.344611-08:00"}
{"id":"cmux2-7pm","title":"Port cmux-xterm - web-based terminal multiplexer server","description":"Port the cmux-xterm crate from ../../crates/cmux-xterm to packages/sandbox.\n\n**Features to port:**\n- PTY spawning and management\n- WebSocket-based terminal sessions\n- Multiple tab support via REST API (create/list/delete tabs)\n- Session state management with creation order tracking\n- Static file serving for web UI\n- Configurable command and arguments per tab\n- Terminal resize support (cols/rows)\n\n**Use cases:**\n- Expose sandbox terminals via web interface\n- Allow multiple terminal tabs per sandbox\n- WebSocket-based terminal access from frontend","status":"open","priority":2,"issue_type":"feature","created_at":"2025-12-04T18:58:09.847175-08:00","updated_at":"2025-12-04T18:58:09.847175-08:00","labels":["sandbox"]}
{"id":"cmux2-80u","title":"Implement text highlighting and copy to clipboard in virtual terminal","description":"","status":"open","priority":2,"issue_type":"feature","created_at":"2025-12-02T15:28:23.487953-08:00","updated_at":"2025-12-02T15:28:23.487953-08:00","labels":["sandbox"]}
{"id":"cmux2-880","title":"Port VNC websockify proxy from Go to Rust","description":"Port the noVNC websockify proxy from scripts/vnc-proxy/main.go to packages/sandbox (Rust).\n\n**Current Go implementation features:**\n- WebSocket to TCP VNC bridge (websockify protocol)\n- Configurable listen address/port (default 0.0.0.0:39380)\n- Configurable VNC target host/port (default 127.0.0.1:5901)  \n- Configurable websocket path (default /websockify)\n- Static file serving for noVNC web UI\n- Dial timeout and idle timeout configuration\n- Security headers (X-Content-Type-Options, Referrer-Policy, CORP)\n- Request logging middleware\n- Subprotocol negotiation support\n\n**Environment variables:**\n- CMUX_VNC_PROXY_HOST/PORT - listen address\n- CMUX_VNC_TARGET_HOST/PORT - VNC backend\n- CMUX_VNC_WS_PATH - websocket endpoint path\n- CMUX_VNC_WEB_DIR - static files directory\n- CMUX_VNC_DIAL_TIMEOUT - backend connection timeout\n- CMUX_VNC_IDLE_TIMEOUT - connection idle timeout\n\n**Benefits of Rust port:**\n- Single binary distribution (no Go runtime needed)\n- Consistent with rest of sandbox tooling\n- Can be integrated directly into sandbox server if desired\n- Better resource efficiency","status":"open","priority":2,"issue_type":"feature","created_at":"2025-12-04T19:06:53.389311-08:00","updated_at":"2025-12-04T19:06:53.389311-08:00","labels":["sandbox"]}
{"id":"cmux2-9a2","title":"Instrument and optimize sandbox creation time (parallelize bottlenecks)","description":"","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-02T15:28:40.510054-08:00","updated_at":"2025-12-02T15:28:40.510054-08:00","labels":["sandbox"]}
{"id":"cmux2-a97","title":"Support option+backspace (delete word) and cmd+backspace (delete to line start) in terminal","description":"","status":"closed","priority":2,"issue_type":"feature","created_at":"2025-12-02T15:28:26.847678-08:00","updated_at":"2025-12-02T15:39:02.101918-08:00","closed_at":"2025-12-02T15:39:02.101918-08:00","labels":["sandbox"]}
{"id":"cmux2-b7d","title":"Sync user's neovim/lazyvim config to sandbox","description":"## Problem\nSupport syncing user's nvim configuration (including lazyvim) to sandboxes without slowing down initial creation time.\n\n## Analysis\n\n### Lazyvim directory structure:\n- ~/.config/nvim - Config files, lua scripts, lazy-lock.json (~100KB-1MB)\n- ~/.local/share/nvim - Plugins installed by lazy.nvim (~500MB-2GB!)\n- ~/.local/state/nvim - State files (~small)\n- ~/.cache/nvim - Compiled lua, treesitter parsers (~100MB+)\n\n### Options considered:\n\n**1. Background sync after sandbox ready**\n- Start sandbox without nvim configs, sync in background\n- Con: User might try nvim before sync completes\n\n**2. Volume mount from host**\n- Mount ~/.config/nvim as read-only volume\n- Con: Security concerns, sandbox isolation breaks\n\n**3. Pre-baked image with nvim distributions**\n- Include lazyvim/nvchad in Docker image\n- Con: Large image, not personalized, version mismatches\n\n**4. Smart differential sync**\n- Cache tarball locally, only re-create if changed\n- Con: First run still slow\n\n**5. Config-only sync (RECOMMENDED)**\n- Only sync ~/.config/nvim (~1MB, fast)\n- Let lazy.nvim download plugins on first nvim launch\n- Pro: Small sync, always fresh plugins, personalized config\n- Con: First nvim launch triggers plugin install (~1-2min)\n\n**6. Hybrid with shared plugin volume**\n- Sync config, share plugin volume across sandboxes\n- Pro: Fast after first sandbox ever\n- Con: Complex, plugin conflicts possible\n\n## Recommendation\nStart with option 5 (config-only sync):\n1. Add ~/.config/nvim to sync_files detection\n2. Upload during sandbox creation (adds \u003c1s)\n3. First nvim launch triggers lazy.nvim plugin sync\n\nFuture enhancement: Create shared nvim plugin cache volume.","status":"open","priority":2,"issue_type":"feature","created_at":"2025-12-02T17:19:51.204711-08:00","updated_at":"2025-12-02T17:20:19.542345-08:00","labels":["sandbox"]}
{"id":"cmux2-bm1","title":"Upgrade node to 25.2.1","description":"","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-05T22:29:12.63612-08:00","updated_at":"2025-12-05T22:29:12.63612-08:00","labels":["sandbox"]}
{"id":"cmux2-dit","title":"Configure git diff to always use less pager even for small diffs","description":"","status":"closed","priority":3,"issue_type":"task","created_at":"2025-12-02T15:28:38.675495-08:00","updated_at":"2025-12-02T16:49:12.05496-08:00","closed_at":"2025-12-02T16:49:12.05496-08:00","labels":["sandbox"]}
{"id":"cmux2-edx","title":"Race condition: rapid sandbox creation causes state tearing","description":"When creating many sandboxes very quickly, there's 'tearing' of the state - the 'Creating sandbox' placeholder is not always correctly associated with the actual sandbox being created. This suggests a race condition in how placeholders are matched to completed sandboxes.","status":"closed","priority":2,"issue_type":"bug","created_at":"2025-12-02T18:12:02.199172-08:00","updated_at":"2025-12-02T18:32:38.76567-08:00","closed_at":"2025-12-02T18:32:38.76567-08:00","labels":["sandbox"]}
{"id":"cmux2-gnz","title":"Port cmux-env (envctl/envd) - directory-scoped environment variable daemon","description":"Port the cmux-env crate from ../../crates/cmux-env to packages/sandbox.\n\n**Features to port:**\n- envd daemon that manages environment variables via Unix socket\n- envctl CLI client for set/get/unset/list/load operations  \n- Directory-scoped env vars (not just global) - variables can be scoped to specific directories\n- Generation-based diffing for efficient shell hook updates\n- Shell hooks for bash/zsh/fish to automatically pick up env changes\n- .env file loading (with base64 support)\n- Auto-start daemon on first client request\n\n**Use cases:**\n- Allow agents to set env vars that persist across terminal sessions\n- Directory-scoped variables for project-specific configs\n- Shell integration for seamless env var propagation","status":"open","priority":2,"issue_type":"feature","created_at":"2025-12-04T18:58:06.832529-08:00","updated_at":"2025-12-04T18:58:06.832529-08:00","labels":["sandbox"]}
{"id":"cmux2-hre","title":"Fix remaining escape sequence TODOs from docs/escape-sequence-todos.md","description":"","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-02T15:28:35.721736-08:00","updated_at":"2025-12-02T16:38:11.260382-08:00","closed_at":"2025-12-02T16:38:11.260382-08:00","labels":["sandbox"]}
{"id":"cmux2-ic9","title":"Set up SSH access to sandboxes","description":"","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-02T21:10:42.153335-08:00","updated_at":"2025-12-03T20:15:07.006367-08:00","closed_at":"2025-12-03T20:15:01.371052-08:00","labels":["sandbox"]}
{"id":"cmux2-o5t","title":"Make links navigatable via command+click in sandbox terminal","description":"","status":"open","priority":2,"issue_type":"feature","created_at":"2025-12-02T15:28:29.18654-08:00","updated_at":"2025-12-02T15:28:29.18654-08:00","labels":["sandbox"]}
{"id":"cmux2-oad","title":"Auto-scroll to cursor when user is typing if not already in view","description":"","status":"closed","priority":2,"issue_type":"feature","created_at":"2025-12-02T15:28:37.338372-08:00","updated_at":"2025-12-02T16:47:10.561283-08:00","closed_at":"2025-12-02T16:47:10.561283-08:00","labels":["sandbox"]}
{"id":"cmux2-p8w","title":"Implement session persistence and reattachment (tmux-like behavior)","description":"Currently PTY sessions are killed when WebSocket disconnects. Need to:\n1. Decouple PTY process lifecycle from client connections\n2. Create persistent session registry that survives disconnects\n3. Support reattaching to existing sessions with scrollback preserved\n4. Keep TUI apps (vim, git diff, less) alive when client disconnects","status":"open","priority":2,"issue_type":"feature","created_at":"2025-12-02T22:11:39.143236-08:00","updated_at":"2025-12-02T22:11:39.143236-08:00","labels":["sandbox"]}
{"id":"cmux2-qa1","title":"Preinstall mise in sandbox","description":"","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-05T01:50:49.793224-08:00","updated_at":"2025-12-05T01:51:16.467898-08:00","closed_at":"2025-12-05T01:51:16.467898-08:00"}
{"id":"cmux2-qb1","title":"Add fake CLIs for editors (zed, cursor, code, windsurf) that trigger open editor via unix socket, alias to cmux-bridge","description":"","status":"open","priority":2,"issue_type":"feature","created_at":"2025-12-05T22:29:12.636805-08:00","updated_at":"2025-12-05T22:29:12.636805-08:00","labels":["sandbox"]}
{"id":"cmux2-qcr","title":"Fix Alt+B Open Browser - cmux browser doesn't accept --base-url flag","description":"Code spawns 'cmux browser $id --base-url $base_url' but the CLI only accepts the ID argument, not --base-url. Error: unexpected argument '--base-url' found","status":"open","priority":2,"issue_type":"bug","created_at":"2025-12-02T17:19:48.755945-08:00","updated_at":"2025-12-02T17:19:48.755945-08:00","labels":["sandbox"]}
{"id":"cmux2-qem","title":"Handle open commands inside sandboxes and propagate to host machine","description":"","status":"closed","priority":2,"issue_type":"feature","created_at":"2025-12-02T15:28:27.700385-08:00","updated_at":"2025-12-02T15:39:03.311959-08:00","closed_at":"2025-12-02T15:39:03.311959-08:00","labels":["sandbox"]}
{"id":"cmux2-rpn","title":"Implement better mouse scrolling behavior with momentum (like chat scroll area)","description":"","status":"open","priority":2,"issue_type":"feature","created_at":"2025-12-02T15:28:20.420206-08:00","updated_at":"2025-12-02T15:28:20.420206-08:00","labels":["sandbox"]}
{"id":"cmux2-s0f","title":"Add cmux prune command to cleanup sandboxes from N days ago (default 2 days, configurable)","description":"","status":"closed","priority":2,"issue_type":"feature","created_at":"2025-12-05T01:27:23.748533-08:00","updated_at":"2025-12-05T01:51:16.424645-08:00","closed_at":"2025-12-05T01:51:16.424645-08:00"}
{"id":"cmux2-som","title":"Upgrade node to 25.2.1","description":"","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-05T01:27:23.490942-08:00","updated_at":"2025-12-05T01:51:16.384145-08:00","closed_at":"2025-12-05T01:51:16.384145-08:00"}
{"id":"cmux2-ssw","title":"Preinstall emacs and neovim in Docker container (vim/zsh already done)","description":"","status":"closed","priority":2,"issue_type":"feature","created_at":"2025-12-02T15:28:16.814211-08:00","updated_at":"2025-12-02T15:58:11.308243-08:00","closed_at":"2025-12-02T15:58:11.308243-08:00","labels":["sandbox"]}
{"id":"cmux2-st6","title":"Optimize sandbox creation times with timing instrumentation","description":"","status":"closed","priority":2,"issue_type":"feature","created_at":"2025-12-04T17:13:25.281625-08:00","updated_at":"2025-12-04T17:44:22.275869-08:00","closed_at":"2025-12-04T17:44:22.275869-08:00","labels":["sandbox"]}
{"id":"cmux2-t33","title":"Fix Alt+E Open Editor - SSH URI uses sandbox_id not actual host","description":"Alt+E tries vscode-remote://ssh-remote+root@{sandbox_id}/workspace but sandbox_id is a UUID, not an SSH hostname. Need to use proper connection method - either container IP, port forwarding, or web-based editor.","status":"open","priority":2,"issue_type":"bug","created_at":"2025-12-02T17:19:47.617841-08:00","updated_at":"2025-12-02T17:19:47.617841-08:00","labels":["sandbox"],"dependencies":[{"issue_id":"cmux2-t33","depends_on_id":"cmux2-ic9","type":"blocks","created_at":"2025-12-02T21:10:48.728812-08:00","created_by":"daemon"}]}
{"id":"cmux2-ubb","title":"Add command palette actions for opening sandbox browser (alt+b) and editor (alt+e)","description":"","status":"closed","priority":2,"issue_type":"feature","created_at":"2025-12-02T15:28:21.761978-08:00","updated_at":"2025-12-02T16:44:05.75665-08:00","closed_at":"2025-12-02T16:44:05.75665-08:00","labels":["sandbox"]}
{"id":"cmux2-v0l","title":"Add cmux prune command to cleanup sandboxes from N days ago (default 2 days, configurable)","description":"","status":"open","priority":2,"issue_type":"feature","created_at":"2025-12-05T22:29:12.637532-08:00","updated_at":"2025-12-05T22:29:12.637532-08:00","labels":["sandbox"]}
{"id":"cmux2-v2g","title":"Alternate screen buffer content persists after app exit (git diff/less)","description":"After running git diff and it exits, the previous content stays on screen instead of being restored. This suggests alternate screen buffer (DECSET 1049) restore isn't working correctly.","status":"open","priority":2,"issue_type":"bug","created_at":"2025-12-02T17:19:49.997267-08:00","updated_at":"2025-12-02T17:19:49.997267-08:00","labels":["sandbox"]}
{"id":"cmux2-wf5","title":"Command palette option to copy entire scrollback to clipboard","description":"","status":"closed","priority":2,"issue_type":"feature","created_at":"2025-12-02T21:09:59.95193-08:00","updated_at":"2025-12-03T20:15:07.00784-08:00","closed_at":"2025-12-03T19:32:55.369802-08:00","labels":["sandbox"]}
{"id":"cmux2-xrq","title":"Add keyboard shortcut to delete sandbox (alt+shift+w is currently CloseTab)","description":"","status":"closed","priority":2,"issue_type":"feature","created_at":"2025-12-02T15:28:25.430463-08:00","updated_at":"2025-12-02T16:19:33.257153-08:00","closed_at":"2025-12-02T16:19:33.257153-08:00","labels":["sandbox"]}
{"id":"cmux2-xyz","title":"Add better logging for sandbox lifecycle (creation, cleanup, FD usage)","description":"","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-02T21:57:23.496291-08:00","updated_at":"2025-12-02T21:57:37.966722-08:00","closed_at":"2025-12-02T21:57:37.966722-08:00","labels":["sandbox"]}
